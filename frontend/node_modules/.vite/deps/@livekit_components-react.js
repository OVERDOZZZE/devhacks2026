import { r as __toESM, t as require_react } from "./react-CRcsxt9d.js";
import { ConnectionQuality, ConnectionState, LocalTrackPublication, LogLevel, MediaDeviceFailure, Mutex as _, ParticipantEvent, ParticipantKind as ParticipantInfo_Kind, RemoteAudioTrack, RemoteTrackPublication, Room, RoomEvent, TokenSourceConfigurable, Track, TrackEvent, VideoPresets, compareVersions, createAudioAnalyser, createLocalAudioTrack, createLocalTracks, createLocalVideoTrack, decodeTokenPayload, facingModeFromLocalTrack, getBrowser, setLogExtension, setLogLevel } from "./livekit-client.js";

//#region node_modules/@livekit/components-react/dist/contexts-D4V9wQRc.mjs
var import_react = /* @__PURE__ */ __toESM(require_react(), 1);
var Ue$1 = Math.min, fe$1 = Math.max, We = Math.round, Ie$1 = Math.floor, te$1 = (e) => ({
	x: e,
	y: e
}), Zn$1 = {
	left: "right",
	right: "left",
	bottom: "top",
	top: "bottom"
}, er$1 = {
	start: "end",
	end: "start"
};
function Pt$1(e, t, n) {
	return fe$1(e, Ue$1(t, n));
}
function Ke$1(e, t) {
	return typeof e == "function" ? e(t) : e;
}
function de$2(e) {
	return e.split("-")[0];
}
function Ge$1(e) {
	return e.split("-")[1];
}
function Xt$2(e) {
	return e === "x" ? "y" : "x";
}
function Zt$2(e) {
	return e === "y" ? "height" : "width";
}
var tr$1 = /* @__PURE__ */ new Set(["top", "bottom"]);
function ae(e) {
	return tr$1.has(de$2(e)) ? "y" : "x";
}
function en$1(e) {
	return Xt$2(ae(e));
}
function nr$1(e, t, n) {
	n === void 0 && (n = !1);
	const r = Ge$1(e), i = en$1(e), o = Zt$2(i);
	let s = i === "x" ? r === (n ? "end" : "start") ? "right" : "left" : r === "start" ? "bottom" : "top";
	return t.reference[o] > t.floating[o] && (s = Be$1(s)), [s, Be$1(s)];
}
function rr$1(e) {
	const t = Be$1(e);
	return [
		ut(e),
		t,
		ut(t)
	];
}
function ut(e) {
	return e.replace(/start|end/g, (t) => er$1[t]);
}
var Ot$1 = ["left", "right"], At$1 = ["right", "left"], ir$1 = ["top", "bottom"], or$1 = ["bottom", "top"];
function sr$1(e, t, n) {
	switch (e) {
		case "top":
		case "bottom": return n ? t ? At$1 : Ot$1 : t ? Ot$1 : At$1;
		case "left":
		case "right": return t ? ir$1 : or$1;
		default: return [];
	}
}
function ar$1(e, t, n, r) {
	const i = Ge$1(e);
	let o = sr$1(de$2(e), n === "start", r);
	return i && (o = o.map((s) => s + "-" + i), t && (o = o.concat(o.map(ut)))), o;
}
function Be$1(e) {
	return e.replace(/left|right|bottom|top/g, (t) => Zn$1[t]);
}
function cr$1(e) {
	return {
		top: 0,
		right: 0,
		bottom: 0,
		left: 0,
		...e
	};
}
function ur$1(e) {
	return typeof e != "number" ? cr$1(e) : {
		top: e,
		right: e,
		bottom: e,
		left: e
	};
}
function je(e) {
	const { x: t, y: n, width: r, height: i } = e;
	return {
		width: r,
		height: i,
		top: n,
		left: t,
		right: t + r,
		bottom: n + i,
		x: t,
		y: n
	};
}
function _t$1(e, t, n) {
	let { reference: r, floating: i } = e;
	const o = ae(t), s = en$1(t), a = Zt$2(s), c = de$2(t), u = o === "y", l = r.x + r.width / 2 - i.width / 2, f = r.y + r.height / 2 - i.height / 2, v = r[a] / 2 - i[a] / 2;
	let d;
	switch (c) {
		case "top":
			d = {
				x: l,
				y: r.y - i.height
			};
			break;
		case "bottom":
			d = {
				x: l,
				y: r.y + r.height
			};
			break;
		case "right":
			d = {
				x: r.x + r.width,
				y: f
			};
			break;
		case "left":
			d = {
				x: r.x - i.width,
				y: f
			};
			break;
		default: d = {
			x: r.x,
			y: r.y
		};
	}
	switch (Ge$1(t)) {
		case "start":
			d[s] -= v * (n && u ? -1 : 1);
			break;
		case "end":
			d[s] += v * (n && u ? -1 : 1);
			break;
	}
	return d;
}
var lr$1 = async (e, t, n) => {
	const { placement: r = "bottom", strategy: i = "absolute", middleware: o = [], platform: s } = n, a = o.filter(Boolean), c = await (s.isRTL == null ? void 0 : s.isRTL(t));
	let u = await s.getElementRects({
		reference: e,
		floating: t,
		strategy: i
	}), { x: l, y: f } = _t$1(u, r, c), v = r, d = {}, m = 0;
	for (let p = 0; p < a.length; p++) {
		const { name: g, fn: h } = a[p], { x, y: E, data: _, reset: b } = await h({
			x: l,
			y: f,
			initialPlacement: r,
			placement: v,
			strategy: i,
			middlewareData: d,
			rects: u,
			platform: s,
			elements: {
				reference: e,
				floating: t
			}
		});
		l = x ?? l, f = E ?? f, d = {
			...d,
			[g]: {
				...d[g],
				..._
			}
		}, b && m <= 50 && (m++, typeof b == "object" && (b.placement && (v = b.placement), b.rects && (u = b.rects === !0 ? await s.getElementRects({
			reference: e,
			floating: t,
			strategy: i
		}) : b.rects), {x: l, y: f} = _t$1(u, v, c)), p = -1);
	}
	return {
		x: l,
		y: f,
		placement: v,
		strategy: i,
		middlewareData: d
	};
};
async function tn$1(e, t) {
	var n;
	t === void 0 && (t = {});
	const { x: r, y: i, platform: o, rects: s, elements: a, strategy: c } = e, { boundary: u = "clippingAncestors", rootBoundary: l = "viewport", elementContext: f = "floating", altBoundary: v = !1, padding: d = 0 } = Ke$1(t, e), m = ur$1(d), g = a[v ? f === "floating" ? "reference" : "floating" : f], h = je(await o.getClippingRect({
		element: (n = await (o.isElement == null ? void 0 : o.isElement(g))) == null || n ? g : g.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a.floating)),
		boundary: u,
		rootBoundary: l,
		strategy: c
	})), x = f === "floating" ? {
		x: r,
		y: i,
		width: s.floating.width,
		height: s.floating.height
	} : s.reference, E = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a.floating)), _ = await (o.isElement == null ? void 0 : o.isElement(E)) ? await (o.getScale == null ? void 0 : o.getScale(E)) || {
		x: 1,
		y: 1
	} : {
		x: 1,
		y: 1
	}, b = je(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({
		elements: a,
		rect: x,
		offsetParent: E,
		strategy: c
	}) : x);
	return {
		top: (h.top - b.top + m.top) / _.y,
		bottom: (b.bottom - h.bottom + m.bottom) / _.y,
		left: (h.left - b.left + m.left) / _.x,
		right: (b.right - h.right + m.right) / _.x
	};
}
var fr$1 = function(e) {
	return e === void 0 && (e = {}), {
		name: "flip",
		options: e,
		async fn(t) {
			var n, r;
			const { placement: i, middlewareData: o, rects: s, initialPlacement: a, platform: c, elements: u } = t, { mainAxis: l = !0, crossAxis: f = !0, fallbackPlacements: v, fallbackStrategy: d = "bestFit", fallbackAxisSideDirection: m = "none", flipAlignment: p = !0, ...g } = Ke$1(e, t);
			if ((n = o.arrow) != null && n.alignmentOffset) return {};
			const h = de$2(i), x = ae(a), E = de$2(a) === a, _ = await (c.isRTL == null ? void 0 : c.isRTL(u.floating)), b = v || (E || !p ? [Be$1(a)] : rr$1(a)), S = m !== "none";
			!v && S && b.push(...ar$1(a, p, m, _));
			const C = [a, ...b], M = await tn$1(t, g), R = [];
			let W = ((r = o.flip) == null ? void 0 : r.overflows) || [];
			if (l && R.push(M[h]), f) {
				const k = nr$1(i, s, _);
				R.push(M[k[0]], M[k[1]]);
			}
			if (W = [...W, {
				placement: i,
				overflows: R
			}], !R.every((k) => k <= 0)) {
				var T, P;
				const k = (((T = o.flip) == null ? void 0 : T.index) || 0) + 1, F = C[k];
				if (F && (!(f === "alignment" ? x !== ae(F) : !1) || W.every((N) => ae(N.placement) === x ? N.overflows[0] > 0 : !0))) return {
					data: {
						index: k,
						overflows: W
					},
					reset: { placement: F }
				};
				let G = (P = W.filter((J) => J.overflows[0] <= 0).sort((J, N) => J.overflows[1] - N.overflows[1])[0]) == null ? void 0 : P.placement;
				if (!G) switch (d) {
					case "bestFit": {
						var j;
						const J = (j = W.filter((N) => {
							if (S) {
								const se = ae(N.placement);
								return se === x || se === "y";
							}
							return !0;
						}).map((N) => [N.placement, N.overflows.filter((se) => se > 0).reduce((se, Kn) => se + Kn, 0)]).sort((N, se) => N[1] - se[1])[0]) == null ? void 0 : j[0];
						J && (G = J);
						break;
					}
					case "initialPlacement":
						G = a;
						break;
				}
				if (i !== G) return { reset: { placement: G } };
			}
			return {};
		}
	};
}, dr$1 = /* @__PURE__ */ new Set(["left", "top"]);
async function pr$1(e, t) {
	const { placement: n, platform: r, elements: i } = e, o = await (r.isRTL == null ? void 0 : r.isRTL(i.floating)), s = de$2(n), a = Ge$1(n), c = ae(n) === "y", u = dr$1.has(s) ? -1 : 1, l = o && c ? -1 : 1, f = Ke$1(t, e);
	let { mainAxis: v, crossAxis: d, alignmentAxis: m } = typeof f == "number" ? {
		mainAxis: f,
		crossAxis: 0,
		alignmentAxis: null
	} : {
		mainAxis: f.mainAxis || 0,
		crossAxis: f.crossAxis || 0,
		alignmentAxis: f.alignmentAxis
	};
	return a && typeof m == "number" && (d = a === "end" ? m * -1 : m), c ? {
		x: d * l,
		y: v * u
	} : {
		x: v * u,
		y: d * l
	};
}
var hr$1 = function(e) {
	return e === void 0 && (e = 0), {
		name: "offset",
		options: e,
		async fn(t) {
			var n, r;
			const { x: i, y: o, placement: s, middlewareData: a } = t, c = await pr$1(t, e);
			return s === ((n = a.offset) == null ? void 0 : n.placement) && (r = a.arrow) != null && r.alignmentOffset ? {} : {
				x: i + c.x,
				y: o + c.y,
				data: {
					...c,
					placement: s
				}
			};
		}
	};
}, vr = function(e) {
	return e === void 0 && (e = {}), {
		name: "shift",
		options: e,
		async fn(t) {
			const { x: n, y: r, placement: i } = t, { mainAxis: o = !0, crossAxis: s = !1, limiter: a = { fn: (g) => {
				let { x: h, y: x } = g;
				return {
					x: h,
					y: x
				};
			} }, ...c } = Ke$1(e, t), u = {
				x: n,
				y: r
			}, l = await tn$1(t, c), f = ae(de$2(i)), v = Xt$2(f);
			let d = u[v], m = u[f];
			if (o) {
				const g = v === "y" ? "top" : "left", h = v === "y" ? "bottom" : "right", x = d + l[g], E = d - l[h];
				d = Pt$1(x, d, E);
			}
			if (s) {
				const g = f === "y" ? "top" : "left", h = f === "y" ? "bottom" : "right", x = m + l[g], E = m - l[h];
				m = Pt$1(x, m, E);
			}
			const p = a.fn({
				...t,
				[v]: d,
				[f]: m
			});
			return {
				...p,
				data: {
					x: p.x - n,
					y: p.y - r,
					enabled: {
						[v]: o,
						[f]: s
					}
				}
			};
		}
	};
};
function Qe() {
	return typeof window < "u";
}
function Se$1(e) {
	return nn$1(e) ? (e.nodeName || "").toLowerCase() : "#document";
}
function q$1(e) {
	var t;
	return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
function re$1(e) {
	var t;
	return (t = (nn$1(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;
}
function nn$1(e) {
	return Qe() ? e instanceof Node || e instanceof q$1(e).Node : !1;
}
function Z(e) {
	return Qe() ? e instanceof Element || e instanceof q$1(e).Element : !1;
}
function ne$2(e) {
	return Qe() ? e instanceof HTMLElement || e instanceof q$1(e).HTMLElement : !1;
}
function kt$1(e) {
	return !Qe() || typeof ShadowRoot > "u" ? !1 : e instanceof ShadowRoot || e instanceof q$1(e).ShadowRoot;
}
var mr$1 = /* @__PURE__ */ new Set(["inline", "contents"]);
function ke$1(e) {
	const { overflow: t, overflowX: n, overflowY: r, display: i } = ee$1(e);
	return /auto|scroll|overlay|hidden|clip/.test(t + r + n) && !mr$1.has(i);
}
var gr = /* @__PURE__ */ new Set([
	"table",
	"td",
	"th"
]);
function br$1(e) {
	return gr.has(Se$1(e));
}
var yr = [":popover-open", ":modal"];
function Je$1(e) {
	return yr.some((t) => {
		try {
			return e.matches(t);
		} catch {
			return !1;
		}
	});
}
var wr = [
	"transform",
	"translate",
	"scale",
	"rotate",
	"perspective"
], xr = [
	"transform",
	"translate",
	"scale",
	"rotate",
	"perspective",
	"filter"
], Sr = [
	"paint",
	"layout",
	"strict",
	"content"
];
function mt(e) {
	const t = gt(), n = Z(e) ? ee$1(e) : e;
	return wr.some((r) => n[r] ? n[r] !== "none" : !1) || (n.containerType ? n.containerType !== "normal" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== "none" : !1) || !t && (n.filter ? n.filter !== "none" : !1) || xr.some((r) => (n.willChange || "").includes(r)) || Sr.some((r) => (n.contain || "").includes(r));
}
function Tr(e) {
	let t = ue$2(e);
	for (; ne$2(t) && !ye$1(t);) {
		if (mt(t)) return t;
		if (Je$1(t)) return null;
		t = ue$2(t);
	}
	return null;
}
function gt() {
	return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
var Er = /* @__PURE__ */ new Set([
	"html",
	"body",
	"#document"
]);
function ye$1(e) {
	return Er.has(Se$1(e));
}
function ee$1(e) {
	return q$1(e).getComputedStyle(e);
}
function Xe(e) {
	return Z(e) ? {
		scrollLeft: e.scrollLeft,
		scrollTop: e.scrollTop
	} : {
		scrollLeft: e.scrollX,
		scrollTop: e.scrollY
	};
}
function ue$2(e) {
	if (Se$1(e) === "html") return e;
	const t = e.assignedSlot || e.parentNode || kt$1(e) && e.host || re$1(e);
	return kt$1(t) ? t.host : t;
}
function rn$1(e) {
	const t = ue$2(e);
	return ye$1(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : ne$2(t) && ke$1(t) ? t : rn$1(t);
}
function Pe$1(e, t, n) {
	var r;
	t === void 0 && (t = []), n === void 0 && (n = !0);
	const i = rn$1(e), o = i === ((r = e.ownerDocument) == null ? void 0 : r.body), s = q$1(i);
	if (o) {
		const a = lt(s);
		return t.concat(s, s.visualViewport || [], ke$1(i) ? i : [], a && n ? Pe$1(a) : []);
	}
	return t.concat(i, Pe$1(i, [], n));
}
function lt(e) {
	return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;
}
function on$1(e) {
	const t = ee$1(e);
	let n = parseFloat(t.width) || 0, r = parseFloat(t.height) || 0;
	const i = ne$2(e), o = i ? e.offsetWidth : n, s = i ? e.offsetHeight : r, a = We(n) !== o || We(r) !== s;
	return a && (n = o, r = s), {
		width: n,
		height: r,
		$: a
	};
}
function bt$1(e) {
	return Z(e) ? e : e.contextElement;
}
function me$1(e) {
	const t = bt$1(e);
	if (!ne$2(t)) return te$1(1);
	const n = t.getBoundingClientRect(), { width: r, height: i, $: o } = on$1(t);
	let s = (o ? We(n.width) : n.width) / r, a = (o ? We(n.height) : n.height) / i;
	return (!s || !Number.isFinite(s)) && (s = 1), (!a || !Number.isFinite(a)) && (a = 1), {
		x: s,
		y: a
	};
}
var Cr = /* @__PURE__ */ te$1(0);
function sn$1(e) {
	const t = q$1(e);
	return !gt() || !t.visualViewport ? Cr : {
		x: t.visualViewport.offsetLeft,
		y: t.visualViewport.offsetTop
	};
}
function Pr(e, t, n) {
	return t === void 0 && (t = !1), !n || t && n !== q$1(e) ? !1 : t;
}
function pe(e, t, n, r) {
	t === void 0 && (t = !1), n === void 0 && (n = !1);
	const i = e.getBoundingClientRect(), o = bt$1(e);
	let s = te$1(1);
	t && (r ? Z(r) && (s = me$1(r)) : s = me$1(e));
	const a = Pr(o, n, r) ? sn$1(o) : te$1(0);
	let c = (i.left + a.x) / s.x, u = (i.top + a.y) / s.y, l = i.width / s.x, f = i.height / s.y;
	if (o) {
		const v = q$1(o), d = r && Z(r) ? q$1(r) : r;
		let m = v, p = lt(m);
		for (; p && r && d !== m;) {
			const g = me$1(p), h = p.getBoundingClientRect(), x = ee$1(p), E = h.left + (p.clientLeft + parseFloat(x.paddingLeft)) * g.x, _ = h.top + (p.clientTop + parseFloat(x.paddingTop)) * g.y;
			c *= g.x, u *= g.y, l *= g.x, f *= g.y, c += E, u += _, m = q$1(p), p = lt(m);
		}
	}
	return je({
		width: l,
		height: f,
		x: c,
		y: u
	});
}
function Ze(e, t) {
	const n = Xe(e).scrollLeft;
	return t ? t.left + n : pe(re$1(e)).left + n;
}
function an$1(e, t) {
	const n = e.getBoundingClientRect();
	return {
		x: n.left + t.scrollLeft - Ze(e, n),
		y: n.top + t.scrollTop
	};
}
function Or(e) {
	let { elements: t, rect: n, offsetParent: r, strategy: i } = e;
	const o = i === "fixed", s = re$1(r), a = t ? Je$1(t.floating) : !1;
	if (r === s || a && o) return n;
	let c = {
		scrollLeft: 0,
		scrollTop: 0
	}, u = te$1(1);
	const l = te$1(0), f = ne$2(r);
	if ((f || !f && !o) && ((Se$1(r) !== "body" || ke$1(s)) && (c = Xe(r)), ne$2(r))) {
		const d = pe(r);
		u = me$1(r), l.x = d.x + r.clientLeft, l.y = d.y + r.clientTop;
	}
	const v = s && !f && !o ? an$1(s, c) : te$1(0);
	return {
		width: n.width * u.x,
		height: n.height * u.y,
		x: n.x * u.x - c.scrollLeft * u.x + l.x + v.x,
		y: n.y * u.y - c.scrollTop * u.y + l.y + v.y
	};
}
function Ar(e) {
	return Array.from(e.getClientRects());
}
function _r(e) {
	const t = re$1(e), n = Xe(e), r = e.ownerDocument.body, i = fe$1(t.scrollWidth, t.clientWidth, r.scrollWidth, r.clientWidth), o = fe$1(t.scrollHeight, t.clientHeight, r.scrollHeight, r.clientHeight);
	let s = -n.scrollLeft + Ze(e);
	const a = -n.scrollTop;
	return ee$1(r).direction === "rtl" && (s += fe$1(t.clientWidth, r.clientWidth) - i), {
		width: i,
		height: o,
		x: s,
		y: a
	};
}
var Lt$1 = 25;
function kr(e, t) {
	const n = q$1(e), r = re$1(e), i = n.visualViewport;
	let o = r.clientWidth, s = r.clientHeight, a = 0, c = 0;
	if (i) {
		o = i.width, s = i.height;
		const l = gt();
		(!l || l && t === "fixed") && (a = i.offsetLeft, c = i.offsetTop);
	}
	const u = Ze(r);
	if (u <= 0) {
		const l = r.ownerDocument, f = l.body, v = getComputedStyle(f), d = l.compatMode === "CSS1Compat" && parseFloat(v.marginLeft) + parseFloat(v.marginRight) || 0, m = Math.abs(r.clientWidth - f.clientWidth - d);
		m <= Lt$1 && (o -= m);
	} else u <= Lt$1 && (o += u);
	return {
		width: o,
		height: s,
		x: a,
		y: c
	};
}
var Lr = /* @__PURE__ */ new Set(["absolute", "fixed"]);
function Ir(e, t) {
	const n = pe(e, !0, t === "fixed"), r = n.top + e.clientTop, i = n.left + e.clientLeft, o = ne$2(e) ? me$1(e) : te$1(1);
	return {
		width: e.clientWidth * o.x,
		height: e.clientHeight * o.y,
		x: i * o.x,
		y: r * o.y
	};
}
function It$1(e, t, n) {
	let r;
	if (t === "viewport") r = kr(e, n);
	else if (t === "document") r = _r(re$1(e));
	else if (Z(t)) r = Ir(t, n);
	else {
		const i = sn$1(e);
		r = {
			x: t.x - i.x,
			y: t.y - i.y,
			width: t.width,
			height: t.height
		};
	}
	return je(r);
}
function cn$1(e, t) {
	const n = ue$2(e);
	return n === t || !Z(n) || ye$1(n) ? !1 : ee$1(n).position === "fixed" || cn$1(n, t);
}
function Mr(e, t) {
	const n = t.get(e);
	if (n) return n;
	let r = Pe$1(e, [], !1).filter((a) => Z(a) && Se$1(a) !== "body"), i = null;
	const o = ee$1(e).position === "fixed";
	let s = o ? ue$2(e) : e;
	for (; Z(s) && !ye$1(s);) {
		const a = ee$1(s), c = mt(s);
		!c && a.position === "fixed" && (i = null), (o ? !c && !i : !c && a.position === "static" && !!i && Lr.has(i.position) || ke$1(s) && !c && cn$1(e, s)) ? r = r.filter((l) => l !== s) : i = a, s = ue$2(s);
	}
	return t.set(e, r), r;
}
function Rr(e) {
	let { element: t, boundary: n, rootBoundary: r, strategy: i } = e;
	const s = [...n === "clippingAncestors" ? Je$1(t) ? [] : Mr(t, this._c) : [].concat(n), r], a = s[0], c = s.reduce((u, l) => {
		const f = It$1(t, l, i);
		return u.top = fe$1(f.top, u.top), u.right = Ue$1(f.right, u.right), u.bottom = Ue$1(f.bottom, u.bottom), u.left = fe$1(f.left, u.left), u;
	}, It$1(t, a, i));
	return {
		width: c.right - c.left,
		height: c.bottom - c.top,
		x: c.left,
		y: c.top
	};
}
function Dr(e) {
	const { width: t, height: n } = on$1(e);
	return {
		width: t,
		height: n
	};
}
function Fr(e, t, n) {
	const r = ne$2(t), i = re$1(t), o = n === "fixed", s = pe(e, !0, o, t);
	let a = {
		scrollLeft: 0,
		scrollTop: 0
	};
	const c = te$1(0);
	function u() {
		c.x = Ze(i);
	}
	if (r || !r && !o) if ((Se$1(t) !== "body" || ke$1(i)) && (a = Xe(t)), r) {
		const d = pe(t, !0, o, t);
		c.x = d.x + t.clientLeft, c.y = d.y + t.clientTop;
	} else i && u();
	o && !r && i && u();
	const l = i && !r && !o ? an$1(i, a) : te$1(0);
	return {
		x: s.left + a.scrollLeft - c.x - l.x,
		y: s.top + a.scrollTop - c.y - l.y,
		width: s.width,
		height: s.height
	};
}
function rt(e) {
	return ee$1(e).position === "static";
}
function Mt$1(e, t) {
	if (!ne$2(e) || ee$1(e).position === "fixed") return null;
	if (t) return t(e);
	let n = e.offsetParent;
	return re$1(e) === n && (n = n.ownerDocument.body), n;
}
function un$1(e, t) {
	const n = q$1(e);
	if (Je$1(e)) return n;
	if (!ne$2(e)) {
		let i = ue$2(e);
		for (; i && !ye$1(i);) {
			if (Z(i) && !rt(i)) return i;
			i = ue$2(i);
		}
		return n;
	}
	let r = Mt$1(e, t);
	for (; r && br$1(r) && rt(r);) r = Mt$1(r, t);
	return r && ye$1(r) && rt(r) && !mt(r) ? n : r || Tr(e) || n;
}
var Nr = async function(e) {
	const t = this.getOffsetParent || un$1, n = this.getDimensions, r = await n(e.floating);
	return {
		reference: Fr(e.reference, await t(e.floating), e.strategy),
		floating: {
			x: 0,
			y: 0,
			width: r.width,
			height: r.height
		}
	};
};
function $r(e) {
	return ee$1(e).direction === "rtl";
}
var Ur = {
	convertOffsetParentRelativeRectToViewportRelativeRect: Or,
	getDocumentElement: re$1,
	getClippingRect: Rr,
	getOffsetParent: un$1,
	getElementRects: Nr,
	getClientRects: Ar,
	getDimensions: Dr,
	getScale: me$1,
	isElement: Z,
	isRTL: $r
};
function ln$1(e, t) {
	return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;
}
function Wr(e, t) {
	let n = null, r;
	const i = re$1(e);
	function o() {
		var a;
		clearTimeout(r), (a = n) == null || a.disconnect(), n = null;
	}
	function s(a, c) {
		a === void 0 && (a = !1), c === void 0 && (c = 1), o();
		const u = e.getBoundingClientRect(), { left: l, top: f, width: v, height: d } = u;
		if (a || t(), !v || !d) return;
		const m = Ie$1(f), p = Ie$1(i.clientWidth - (l + v)), g = Ie$1(i.clientHeight - (f + d)), h = Ie$1(l), E = {
			rootMargin: -m + "px " + -p + "px " + -g + "px " + -h + "px",
			threshold: fe$1(0, Ue$1(1, c)) || 1
		};
		let _ = !0;
		function b(S) {
			const C = S[0].intersectionRatio;
			if (C !== c) {
				if (!_) return s();
				C ? s(!1, C) : r = setTimeout(() => {
					s(!1, 1e-7);
				}, 1e3);
			}
			C === 1 && !ln$1(u, e.getBoundingClientRect()) && s(), _ = !1;
		}
		try {
			n = new IntersectionObserver(b, {
				...E,
				root: i.ownerDocument
			});
		} catch {
			n = new IntersectionObserver(b, E);
		}
		n.observe(e);
	}
	return s(!0), o;
}
function Br(e, t, n, r) {
	r === void 0 && (r = {});
	const { ancestorScroll: i = !0, ancestorResize: o = !0, elementResize: s = typeof ResizeObserver == "function", layoutShift: a = typeof IntersectionObserver == "function", animationFrame: c = !1 } = r, u = bt$1(e), l = i || o ? [...u ? Pe$1(u) : [], ...Pe$1(t)] : [];
	l.forEach((h) => {
		i && h.addEventListener("scroll", n, { passive: !0 }), o && h.addEventListener("resize", n);
	});
	const f = u && a ? Wr(u, n) : null;
	let v = -1, d = null;
	s && (d = new ResizeObserver((h) => {
		let [x] = h;
		x && x.target === u && d && (d.unobserve(t), cancelAnimationFrame(v), v = requestAnimationFrame(() => {
			var E;
			(E = d) == null || E.observe(t);
		})), n();
	}), u && !c && d.observe(u), d.observe(t));
	let m, p = c ? pe(e) : null;
	c && g();
	function g() {
		const h = pe(e);
		p && !ln$1(p, h) && n(), p = h, m = requestAnimationFrame(g);
	}
	return n(), () => {
		var h;
		l.forEach((x) => {
			i && x.removeEventListener("scroll", n), o && x.removeEventListener("resize", n);
		}), f?.(), (h = d) == null || h.disconnect(), d = null, c && cancelAnimationFrame(m);
	};
}
var jr = hr$1, Vr = vr, Hr = fr$1, zr = (e, t, n) => {
	const r = /* @__PURE__ */ new Map(), i = {
		platform: Ur,
		...n
	}, o = {
		...i.platform,
		_c: r
	};
	return lr$1(e, t, {
		...i,
		platform: o
	});
};
var os = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Yr(e) {
	return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var Fe = { exports: {} }, qr = Fe.exports, Rt$1;
function Kr() {
	return Rt$1 || (Rt$1 = 1, (function(e) {
		(function(t, n) {
			e.exports ? e.exports = n() : t.log = n();
		})(qr, function() {
			var t = function() {}, n = "undefined", r = typeof window !== n && typeof window.navigator !== n && /Trident\/|MSIE /.test(window.navigator.userAgent), i = [
				"trace",
				"debug",
				"info",
				"warn",
				"error"
			], o = {}, s = null;
			function a(p, g) {
				var h = p[g];
				if (typeof h.bind == "function") return h.bind(p);
				try {
					return Function.prototype.bind.call(h, p);
				} catch {
					return function() {
						return Function.prototype.apply.apply(h, [p, arguments]);
					};
				}
			}
			function c() {
				console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
			}
			function u(p) {
				return p === "debug" && (p = "log"), typeof console === n ? !1 : p === "trace" && r ? c : console[p] !== void 0 ? a(console, p) : console.log !== void 0 ? a(console, "log") : t;
			}
			function l() {
				for (var p = this.getLevel(), g = 0; g < i.length; g++) {
					var h = i[g];
					this[h] = g < p ? t : this.methodFactory(h, p, this.name);
				}
				if (this.log = this.debug, typeof console === n && p < this.levels.SILENT) return "No console available for logging";
			}
			function f(p) {
				return function() {
					typeof console !== n && (l.call(this), this[p].apply(this, arguments));
				};
			}
			function v(p, g, h) {
				return u(p) || f.apply(this, arguments);
			}
			function d(p, g) {
				var h = this, x, E, _, b = "loglevel";
				typeof p == "string" ? b += ":" + p : typeof p == "symbol" && (b = void 0);
				function S(T) {
					var P = (i[T] || "silent").toUpperCase();
					if (!(typeof window === n || !b)) {
						try {
							window.localStorage[b] = P;
							return;
						} catch {}
						try {
							window.document.cookie = encodeURIComponent(b) + "=" + P + ";";
						} catch {}
					}
				}
				function C() {
					var T;
					if (!(typeof window === n || !b)) {
						try {
							T = window.localStorage[b];
						} catch {}
						if (typeof T === n) try {
							var P = window.document.cookie, j = encodeURIComponent(b), k = P.indexOf(j + "=");
							k !== -1 && (T = /^([^;]+)/.exec(P.slice(k + j.length + 1))[1]);
						} catch {}
						return h.levels[T] === void 0 && (T = void 0), T;
					}
				}
				function M() {
					if (!(typeof window === n || !b)) {
						try {
							window.localStorage.removeItem(b);
						} catch {}
						try {
							window.document.cookie = encodeURIComponent(b) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
						} catch {}
					}
				}
				function R(T) {
					var P = T;
					if (typeof P == "string" && h.levels[P.toUpperCase()] !== void 0 && (P = h.levels[P.toUpperCase()]), typeof P == "number" && P >= 0 && P <= h.levels.SILENT) return P;
					throw new TypeError("log.setLevel() called with invalid level: " + T);
				}
				h.name = p, h.levels = {
					TRACE: 0,
					DEBUG: 1,
					INFO: 2,
					WARN: 3,
					ERROR: 4,
					SILENT: 5
				}, h.methodFactory = g || v, h.getLevel = function() {
					return _ ?? E ?? x;
				}, h.setLevel = function(T, P) {
					return _ = R(T), P !== !1 && S(_), l.call(h);
				}, h.setDefaultLevel = function(T) {
					E = R(T), C() || h.setLevel(T, !1);
				}, h.resetLevel = function() {
					_ = null, M(), l.call(h);
				}, h.enableAll = function(T) {
					h.setLevel(h.levels.TRACE, T);
				}, h.disableAll = function(T) {
					h.setLevel(h.levels.SILENT, T);
				}, h.rebuild = function() {
					if (s !== h && (x = R(s.getLevel())), l.call(h), s === h) for (var T in o) o[T].rebuild();
				}, x = R(s ? s.getLevel() : "WARN");
				var W = C();
				W != null && (_ = R(W)), l.call(h);
			}
			s = new d(), s.getLogger = function(g) {
				if (typeof g != "symbol" && typeof g != "string" || g === "") throw new TypeError("You must supply a name when creating a logger.");
				var h = o[g];
				return h || (h = o[g] = new d(g, s.methodFactory)), h;
			};
			var m = typeof window !== n ? window.log : void 0;
			return s.noConflict = function() {
				return typeof window !== n && window.log === s && (window.log = m), s;
			}, s.getLoggers = function() {
				return o;
			}, s.default = s, s;
		});
	})(Fe)), Fe.exports;
}
var Qr = /* @__PURE__ */ Yr(Kr());
var ft = function(e, t) {
	return ft = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {
		n.__proto__ = r;
	} || function(n, r) {
		for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i]);
	}, ft(e, t);
};
function oe$2(e, t) {
	if (typeof t != "function" && t !== null) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
	ft(e, t);
	function n() {
		this.constructor = e;
	}
	e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
function Jr(e, t, n, r) {
	function i(o) {
		return o instanceof n ? o : new n(function(s) {
			s(o);
		});
	}
	return new (n || (n = Promise))(function(o, s) {
		function a(l) {
			try {
				u(r.next(l));
			} catch (f) {
				s(f);
			}
		}
		function c(l) {
			try {
				u(r.throw(l));
			} catch (f) {
				s(f);
			}
		}
		function u(l) {
			l.done ? o(l.value) : i(l.value).then(a, c);
		}
		u((r = r.apply(e, t || [])).next());
	});
}
function fn$1(e, t) {
	var n = {
		label: 0,
		sent: function() {
			if (o[0] & 1) throw o[1];
			return o[1];
		},
		trys: [],
		ops: []
	}, r, i, o, s = Object.create((typeof Iterator == "function" ? Iterator : Object).prototype);
	return s.next = a(0), s.throw = a(1), s.return = a(2), typeof Symbol == "function" && (s[Symbol.iterator] = function() {
		return this;
	}), s;
	function a(u) {
		return function(l) {
			return c([u, l]);
		};
	}
	function c(u) {
		if (r) throw new TypeError("Generator is already executing.");
		for (; s && (s = 0, u[0] && (n = 0)), n;) try {
			if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
			switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
				case 0:
				case 1:
					o = u;
					break;
				case 4: return n.label++, {
					value: u[1],
					done: !1
				};
				case 5:
					n.label++, i = u[1], u = [0];
					continue;
				case 7:
					u = n.ops.pop(), n.trys.pop();
					continue;
				default:
					if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
						n = 0;
						continue;
					}
					if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
						n.label = u[1];
						break;
					}
					if (u[0] === 6 && n.label < o[1]) {
						n.label = o[1], o = u;
						break;
					}
					if (o && n.label < o[2]) {
						n.label = o[2], n.ops.push(u);
						break;
					}
					o[2] && n.ops.pop(), n.trys.pop();
					continue;
			}
			u = t.call(e, n);
		} catch (l) {
			u = [6, l], i = 0;
		} finally {
			r = o = 0;
		}
		if (u[0] & 5) throw u[1];
		return {
			value: u[0] ? u[1] : void 0,
			done: !0
		};
	}
}
function we$1(e) {
	var t = typeof Symbol == "function" && Symbol.iterator, n = t && e[t], r = 0;
	if (n) return n.call(e);
	if (e && typeof e.length == "number") return { next: function() {
		return e && r >= e.length && (e = void 0), {
			value: e && e[r++],
			done: !e
		};
	} };
	throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function he(e, t) {
	var n = typeof Symbol == "function" && e[Symbol.iterator];
	if (!n) return e;
	var r = n.call(e), i, o = [], s;
	try {
		for (; (t === void 0 || t-- > 0) && !(i = r.next()).done;) o.push(i.value);
	} catch (a) {
		s = { error: a };
	} finally {
		try {
			i && !i.done && (n = r.return) && n.call(r);
		} finally {
			if (s) throw s.error;
		}
	}
	return o;
}
function xe$1(e, t, n) {
	if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++) (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
	return e.concat(o || Array.prototype.slice.call(t));
}
function ge$1(e) {
	return this instanceof ge$1 ? (this.v = e, this) : new ge$1(e);
}
function Xr(e, t, n) {
	if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
	var r = n.apply(e, t || []), i, o = [];
	return i = Object.create((typeof AsyncIterator == "function" ? AsyncIterator : Object).prototype), a("next"), a("throw"), a("return", s), i[Symbol.asyncIterator] = function() {
		return this;
	}, i;
	function s(d) {
		return function(m) {
			return Promise.resolve(m).then(d, f);
		};
	}
	function a(d, m) {
		r[d] && (i[d] = function(p) {
			return new Promise(function(g, h) {
				o.push([
					d,
					p,
					g,
					h
				]) > 1 || c(d, p);
			});
		}, m && (i[d] = m(i[d])));
	}
	function c(d, m) {
		try {
			u(r[d](m));
		} catch (p) {
			v(o[0][3], p);
		}
	}
	function u(d) {
		d.value instanceof ge$1 ? Promise.resolve(d.value.v).then(l, f) : v(o[0][2], d);
	}
	function l(d) {
		c("next", d);
	}
	function f(d) {
		c("throw", d);
	}
	function v(d, m) {
		d(m), o.shift(), o.length && c(o[0][0], o[0][1]);
	}
}
function Zr(e) {
	if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
	var t = e[Symbol.asyncIterator], n;
	return t ? t.call(e) : (e = typeof we$1 == "function" ? we$1(e) : e[Symbol.iterator](), n = {}, r("next"), r("throw"), r("return"), n[Symbol.asyncIterator] = function() {
		return this;
	}, n);
	function r(o) {
		n[o] = e[o] && function(s) {
			return new Promise(function(a, c) {
				s = e[o](s), i(a, c, s.done, s.value);
			});
		};
	}
	function i(o, s, a, c) {
		Promise.resolve(c).then(function(u) {
			o({
				value: u,
				done: a
			});
		}, s);
	}
}
function O$2(e) {
	return typeof e == "function";
}
function yt$1(e) {
	var t = function(r) {
		Error.call(r), r.stack = (/* @__PURE__ */ new Error()).stack;
	}, n = e(t);
	return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;
}
var it = yt$1(function(e) {
	return function(n) {
		e(this), this.message = n ? n.length + ` errors occurred during unsubscription:
` + n.map(function(r, i) {
			return i + 1 + ") " + r.toString();
		}).join(`
  `) : "", this.name = "UnsubscriptionError", this.errors = n;
	};
});
function Ve$1(e, t) {
	if (e) {
		var n = e.indexOf(t);
		0 <= n && e.splice(n, 1);
	}
}
var Le$1 = (function() {
	function e(t) {
		this.initialTeardown = t, this.closed = !1, this._parentage = null, this._finalizers = null;
	}
	return e.prototype.unsubscribe = function() {
		var t, n, r, i, o;
		if (!this.closed) {
			this.closed = !0;
			var s = this._parentage;
			if (s) if (this._parentage = null, Array.isArray(s)) try {
				for (var a = we$1(s), c = a.next(); !c.done; c = a.next()) c.value.remove(this);
			} catch (p) {
				t = { error: p };
			} finally {
				try {
					c && !c.done && (n = a.return) && n.call(a);
				} finally {
					if (t) throw t.error;
				}
			}
			else s.remove(this);
			var l = this.initialTeardown;
			if (O$2(l)) try {
				l();
			} catch (p) {
				o = p instanceof it ? p.errors : [p];
			}
			var f = this._finalizers;
			if (f) {
				this._finalizers = null;
				try {
					for (var v = we$1(f), d = v.next(); !d.done; d = v.next()) {
						var m = d.value;
						try {
							Dt$1(m);
						} catch (p) {
							o = o ?? [], p instanceof it ? o = xe$1(xe$1([], he(o)), he(p.errors)) : o.push(p);
						}
					}
				} catch (p) {
					r = { error: p };
				} finally {
					try {
						d && !d.done && (i = v.return) && i.call(v);
					} finally {
						if (r) throw r.error;
					}
				}
			}
			if (o) throw new it(o);
		}
	}, e.prototype.add = function(t) {
		var n;
		if (t && t !== this) if (this.closed) Dt$1(t);
		else {
			if (t instanceof e) {
				if (t.closed || t._hasParent(this)) return;
				t._addParent(this);
			}
			(this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);
		}
	}, e.prototype._hasParent = function(t) {
		var n = this._parentage;
		return n === t || Array.isArray(n) && n.includes(t);
	}, e.prototype._addParent = function(t) {
		var n = this._parentage;
		this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;
	}, e.prototype._removeParent = function(t) {
		var n = this._parentage;
		n === t ? this._parentage = null : Array.isArray(n) && Ve$1(n, t);
	}, e.prototype.remove = function(t) {
		var n = this._finalizers;
		n && Ve$1(n, t), t instanceof e && t._removeParent(this);
	}, e.EMPTY = (function() {
		var t = new e();
		return t.closed = !0, t;
	})(), e;
})(), dn$1 = Le$1.EMPTY;
function pn$1(e) {
	return e instanceof Le$1 || e && "closed" in e && O$2(e.remove) && O$2(e.add) && O$2(e.unsubscribe);
}
function Dt$1(e) {
	O$2(e) ? e() : e.unsubscribe();
}
var ei = { Promise: void 0 }, ti = {
	setTimeout: function(e, t) {
		for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];
		return setTimeout.apply(void 0, xe$1([e, t], he(n)));
	},
	clearTimeout: function(e) {
		return clearTimeout(e);
	},
	delegate: void 0
};
function hn$1(e) {
	ti.setTimeout(function() {
		throw e;
	});
}
function He() {}
function Ne$1(e) {
	e();
}
var wt$1 = (function(e) {
	oe$2(t, e);
	function t(n) {
		var r = e.call(this) || this;
		return r.isStopped = !1, n ? (r.destination = n, pn$1(n) && n.add(r)) : r.destination = ii, r;
	}
	return t.create = function(n, r, i) {
		return new Oe$1(n, r, i);
	}, t.prototype.next = function(n) {
		this.isStopped || this._next(n);
	}, t.prototype.error = function(n) {
		this.isStopped || (this.isStopped = !0, this._error(n));
	}, t.prototype.complete = function() {
		this.isStopped || (this.isStopped = !0, this._complete());
	}, t.prototype.unsubscribe = function() {
		this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this), this.destination = null);
	}, t.prototype._next = function(n) {
		this.destination.next(n);
	}, t.prototype._error = function(n) {
		try {
			this.destination.error(n);
		} finally {
			this.unsubscribe();
		}
	}, t.prototype._complete = function() {
		try {
			this.destination.complete();
		} finally {
			this.unsubscribe();
		}
	}, t;
})(Le$1), ni = (function() {
	function e(t) {
		this.partialObserver = t;
	}
	return e.prototype.next = function(t) {
		var n = this.partialObserver;
		if (n.next) try {
			n.next(t);
		} catch (r) {
			Me$1(r);
		}
	}, e.prototype.error = function(t) {
		var n = this.partialObserver;
		if (n.error) try {
			n.error(t);
		} catch (r) {
			Me$1(r);
		}
		else Me$1(t);
	}, e.prototype.complete = function() {
		var t = this.partialObserver;
		if (t.complete) try {
			t.complete();
		} catch (n) {
			Me$1(n);
		}
	}, e;
})(), Oe$1 = (function(e) {
	oe$2(t, e);
	function t(n, r, i) {
		var o = e.call(this) || this, s;
		return O$2(n) || !n ? s = {
			next: n ?? void 0,
			error: r ?? void 0,
			complete: i ?? void 0
		} : s = n, o.destination = new ni(s), o;
	}
	return t;
})(wt$1);
function Me$1(e) {
	hn$1(e);
}
function ri(e) {
	throw e;
}
var ii = {
	closed: !0,
	next: He,
	error: ri,
	complete: He
}, xt$1 = (function() {
	return typeof Symbol == "function" && Symbol.observable || "@@observable";
})();
function et$1(e) {
	return e;
}
function oi(e) {
	return e.length === 0 ? et$1 : e.length === 1 ? e[0] : function(n) {
		return e.reduce(function(r, i) {
			return i(r);
		}, n);
	};
}
var L$1 = (function() {
	function e(t) {
		t && (this._subscribe = t);
	}
	return e.prototype.lift = function(t) {
		var n = new e();
		return n.source = this, n.operator = t, n;
	}, e.prototype.subscribe = function(t, n, r) {
		var i = this, o = ai(t) ? t : new Oe$1(t, n, r);
		return Ne$1(function() {
			var s = i, a = s.operator, c = s.source;
			o.add(a ? a.call(o, c) : c ? i._subscribe(o) : i._trySubscribe(o));
		}), o;
	}, e.prototype._trySubscribe = function(t) {
		try {
			return this._subscribe(t);
		} catch (n) {
			t.error(n);
		}
	}, e.prototype.forEach = function(t, n) {
		var r = this;
		return n = Ft$1(n), new n(function(i, o) {
			var s = new Oe$1({
				next: function(a) {
					try {
						t(a);
					} catch (c) {
						o(c), s.unsubscribe();
					}
				},
				error: o,
				complete: i
			});
			r.subscribe(s);
		});
	}, e.prototype._subscribe = function(t) {
		var n;
		return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);
	}, e.prototype[xt$1] = function() {
		return this;
	}, e.prototype.pipe = function() {
		for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
		return oi(t)(this);
	}, e.prototype.toPromise = function(t) {
		var n = this;
		return t = Ft$1(t), new t(function(r, i) {
			var o;
			n.subscribe(function(s) {
				return o = s;
			}, function(s) {
				return i(s);
			}, function() {
				return r(o);
			});
		});
	}, e.create = function(t) {
		return new e(t);
	}, e;
})();
function Ft$1(e) {
	var t;
	return (t = e ?? ei.Promise) !== null && t !== void 0 ? t : Promise;
}
function si(e) {
	return e && O$2(e.next) && O$2(e.error) && O$2(e.complete);
}
function ai(e) {
	return e && e instanceof wt$1 || si(e) && pn$1(e);
}
function ci(e) {
	return O$2(e == null ? void 0 : e.lift);
}
function B$1(e) {
	return function(t) {
		if (ci(t)) return t.lift(function(n) {
			try {
				return e(n, this);
			} catch (r) {
				this.error(r);
			}
		});
		throw new TypeError("Unable to lift unknown Observable type");
	};
}
function z$1(e, t, n, r, i) {
	return new ui(e, t, n, r, i);
}
var ui = (function(e) {
	oe$2(t, e);
	function t(n, r, i, o, s, a) {
		var c = e.call(this, n) || this;
		return c.onFinalize = s, c.shouldUnsubscribe = a, c._next = r ? function(u) {
			try {
				r(u);
			} catch (l) {
				n.error(l);
			}
		} : e.prototype._next, c._error = o ? function(u) {
			try {
				o(u);
			} catch (l) {
				n.error(l);
			} finally {
				this.unsubscribe();
			}
		} : e.prototype._error, c._complete = i ? function() {
			try {
				i();
			} catch (u) {
				n.error(u);
			} finally {
				this.unsubscribe();
			}
		} : e.prototype._complete, c;
	}
	return t.prototype.unsubscribe = function() {
		var n;
		if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
			var r = this.closed;
			e.prototype.unsubscribe.call(this), !r && ((n = this.onFinalize) === null || n === void 0 || n.call(this));
		}
	}, t;
})(wt$1), li = yt$1(function(e) {
	return function() {
		e(this), this.name = "ObjectUnsubscribedError", this.message = "object unsubscribed";
	};
}), ie$2 = (function(e) {
	oe$2(t, e);
	function t() {
		var n = e.call(this) || this;
		return n.closed = !1, n.currentObservers = null, n.observers = [], n.isStopped = !1, n.hasError = !1, n.thrownError = null, n;
	}
	return t.prototype.lift = function(n) {
		var r = new Nt$1(this, this);
		return r.operator = n, r;
	}, t.prototype._throwIfClosed = function() {
		if (this.closed) throw new li();
	}, t.prototype.next = function(n) {
		var r = this;
		Ne$1(function() {
			var i, o;
			if (r._throwIfClosed(), !r.isStopped) {
				r.currentObservers || (r.currentObservers = Array.from(r.observers));
				try {
					for (var s = we$1(r.currentObservers), a = s.next(); !a.done; a = s.next()) a.value.next(n);
				} catch (u) {
					i = { error: u };
				} finally {
					try {
						a && !a.done && (o = s.return) && o.call(s);
					} finally {
						if (i) throw i.error;
					}
				}
			}
		});
	}, t.prototype.error = function(n) {
		var r = this;
		Ne$1(function() {
			if (r._throwIfClosed(), !r.isStopped) {
				r.hasError = r.isStopped = !0, r.thrownError = n;
				for (var i = r.observers; i.length;) i.shift().error(n);
			}
		});
	}, t.prototype.complete = function() {
		var n = this;
		Ne$1(function() {
			if (n._throwIfClosed(), !n.isStopped) {
				n.isStopped = !0;
				for (var r = n.observers; r.length;) r.shift().complete();
			}
		});
	}, t.prototype.unsubscribe = function() {
		this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;
	}, Object.defineProperty(t.prototype, "observed", {
		get: function() {
			var n;
			return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype._trySubscribe = function(n) {
		return this._throwIfClosed(), e.prototype._trySubscribe.call(this, n);
	}, t.prototype._subscribe = function(n) {
		return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);
	}, t.prototype._innerSubscribe = function(n) {
		var r = this, i = this, o = i.hasError, s = i.isStopped, a = i.observers;
		return o || s ? dn$1 : (this.currentObservers = null, a.push(n), new Le$1(function() {
			r.currentObservers = null, Ve$1(a, n);
		}));
	}, t.prototype._checkFinalizedStatuses = function(n) {
		var r = this, i = r.hasError, o = r.thrownError, s = r.isStopped;
		i ? n.error(o) : s && n.complete();
	}, t.prototype.asObservable = function() {
		var n = new L$1();
		return n.source = this, n;
	}, t.create = function(n, r) {
		return new Nt$1(n, r);
	}, t;
})(L$1), Nt$1 = (function(e) {
	oe$2(t, e);
	function t(n, r) {
		var i = e.call(this) || this;
		return i.destination = n, i.source = r, i;
	}
	return t.prototype.next = function(n) {
		var r, i;
		(i = (r = this.destination) === null || r === void 0 ? void 0 : r.next) === null || i === void 0 || i.call(r, n);
	}, t.prototype.error = function(n) {
		var r, i;
		(i = (r = this.destination) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, n);
	}, t.prototype.complete = function() {
		var n, r;
		(r = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r === void 0 || r.call(n);
	}, t.prototype._subscribe = function(n) {
		var r, i;
		return (i = (r = this.source) === null || r === void 0 ? void 0 : r.subscribe(n)) !== null && i !== void 0 ? i : dn$1;
	}, t;
})(ie$2), vn$1 = (function(e) {
	oe$2(t, e);
	function t(n) {
		var r = e.call(this) || this;
		return r._value = n, r;
	}
	return Object.defineProperty(t.prototype, "value", {
		get: function() {
			return this.getValue();
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype._subscribe = function(n) {
		var r = e.prototype._subscribe.call(this, n);
		return !r.closed && n.next(this._value), r;
	}, t.prototype.getValue = function() {
		var n = this, r = n.hasError, i = n.thrownError, o = n._value;
		if (r) throw i;
		return this._throwIfClosed(), o;
	}, t.prototype.next = function(n) {
		e.prototype.next.call(this, this._value = n);
	}, t;
})(ie$2), fi = { now: function() {
	return Date.now();
} }, di = (function(e) {
	oe$2(t, e);
	function t(n, r) {
		return e.call(this) || this;
	}
	return t.prototype.schedule = function(n, r) {
		return this;
	}, t;
})(Le$1), $t$2 = {
	setInterval: function(e, t) {
		for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];
		return setInterval.apply(void 0, xe$1([e, t], he(n)));
	},
	clearInterval: function(e) {
		return clearInterval(e);
	},
	delegate: void 0
}, pi = (function(e) {
	oe$2(t, e);
	function t(n, r) {
		var i = e.call(this, n, r) || this;
		return i.scheduler = n, i.work = r, i.pending = !1, i;
	}
	return t.prototype.schedule = function(n, r) {
		var i;
		if (r === void 0 && (r = 0), this.closed) return this;
		this.state = n;
		var o = this.id, s = this.scheduler;
		return o != null && (this.id = this.recycleAsyncId(s, o, r)), this.pending = !0, this.delay = r, this.id = (i = this.id) !== null && i !== void 0 ? i : this.requestAsyncId(s, this.id, r), this;
	}, t.prototype.requestAsyncId = function(n, r, i) {
		return i === void 0 && (i = 0), $t$2.setInterval(n.flush.bind(n, this), i);
	}, t.prototype.recycleAsyncId = function(n, r, i) {
		if (i === void 0 && (i = 0), i != null && this.delay === i && this.pending === !1) return r;
		r != null && $t$2.clearInterval(r);
	}, t.prototype.execute = function(n, r) {
		if (this.closed) return /* @__PURE__ */ new Error("executing a cancelled action");
		this.pending = !1;
		var i = this._execute(n, r);
		if (i) return i;
		this.pending === !1 && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));
	}, t.prototype._execute = function(n, r) {
		var i = !1, o;
		try {
			this.work(n);
		} catch (s) {
			i = !0, o = s || /* @__PURE__ */ new Error("Scheduled action threw falsy error");
		}
		if (i) return this.unsubscribe(), o;
	}, t.prototype.unsubscribe = function() {
		if (!this.closed) {
			var n = this, r = n.id, i = n.scheduler, o = i.actions;
			this.work = this.state = this.scheduler = null, this.pending = !1, Ve$1(o, this), r != null && (this.id = this.recycleAsyncId(i, r, null)), this.delay = null, e.prototype.unsubscribe.call(this);
		}
	}, t;
})(di), Ut$1 = (function() {
	function e(t, n) {
		n === void 0 && (n = e.now), this.schedulerActionCtor = t, this.now = n;
	}
	return e.prototype.schedule = function(t, n, r) {
		return n === void 0 && (n = 0), new this.schedulerActionCtor(this, t).schedule(r, n);
	}, e.now = fi.now, e;
})(), vi = new ((function(e) {
	oe$2(t, e);
	function t(n, r) {
		r === void 0 && (r = Ut$1.now);
		var i = e.call(this, n, r) || this;
		return i.actions = [], i._active = !1, i;
	}
	return t.prototype.flush = function(n) {
		var r = this.actions;
		if (this._active) {
			r.push(n);
			return;
		}
		var i;
		this._active = !0;
		do
			if (i = n.execute(n.state, n.delay)) break;
		while (n = r.shift());
		if (this._active = !1, i) {
			for (; n = r.shift();) n.unsubscribe();
			throw i;
		}
	}, t;
})(Ut$1))(pi);
function mi(e) {
	return e && O$2(e.schedule);
}
function gi(e) {
	return e[e.length - 1];
}
function St$1(e) {
	return mi(gi(e)) ? e.pop() : void 0;
}
var Tt$1 = (function(e) {
	return e && typeof e.length == "number" && typeof e != "function";
});
function mn$1(e) {
	return O$2(e == null ? void 0 : e.then);
}
function gn$1(e) {
	return O$2(e[xt$1]);
}
function bn$1(e) {
	return Symbol.asyncIterator && O$2(e == null ? void 0 : e[Symbol.asyncIterator]);
}
function yn$1(e) {
	return /* @__PURE__ */ new TypeError("You provided " + (e !== null && typeof e == "object" ? "an invalid object" : "'" + e + "'") + " where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.");
}
function bi() {
	return typeof Symbol != "function" || !Symbol.iterator ? "@@iterator" : Symbol.iterator;
}
var wn = bi();
function xn$1(e) {
	return O$2(e == null ? void 0 : e[wn]);
}
function Sn$1(e) {
	return Xr(this, arguments, function() {
		var n, r, i, o;
		return fn$1(this, function(s) {
			switch (s.label) {
				case 0: n = e.getReader(), s.label = 1;
				case 1: s.trys.push([
					1,
					,
					9,
					10
				]), s.label = 2;
				case 2: return [4, ge$1(n.read())];
				case 3: return r = s.sent(), i = r.value, o = r.done, o ? [4, ge$1(void 0)] : [3, 5];
				case 4: return [2, s.sent()];
				case 5: return [4, ge$1(i)];
				case 6: return [4, s.sent()];
				case 7: return s.sent(), [3, 2];
				case 8: return [3, 10];
				case 9: return n.releaseLock(), [7];
				case 10: return [2];
			}
		});
	});
}
function Tn$1(e) {
	return O$2(e == null ? void 0 : e.getReader);
}
function Q$1(e) {
	if (e instanceof L$1) return e;
	if (e != null) {
		if (gn$1(e)) return yi(e);
		if (Tt$1(e)) return wi(e);
		if (mn$1(e)) return xi(e);
		if (bn$1(e)) return En$1(e);
		if (xn$1(e)) return Si(e);
		if (Tn$1(e)) return Ti(e);
	}
	throw yn$1(e);
}
function yi(e) {
	return new L$1(function(t) {
		var n = e[xt$1]();
		if (O$2(n.subscribe)) return n.subscribe(t);
		throw new TypeError("Provided object does not correctly implement Symbol.observable");
	});
}
function wi(e) {
	return new L$1(function(t) {
		for (var n = 0; n < e.length && !t.closed; n++) t.next(e[n]);
		t.complete();
	});
}
function xi(e) {
	return new L$1(function(t) {
		e.then(function(n) {
			t.closed || (t.next(n), t.complete());
		}, function(n) {
			return t.error(n);
		}).then(null, hn$1);
	});
}
function Si(e) {
	return new L$1(function(t) {
		var n, r;
		try {
			for (var i = we$1(e), o = i.next(); !o.done; o = i.next()) {
				var s = o.value;
				if (t.next(s), t.closed) return;
			}
		} catch (a) {
			n = { error: a };
		} finally {
			try {
				o && !o.done && (r = i.return) && r.call(i);
			} finally {
				if (n) throw n.error;
			}
		}
		t.complete();
	});
}
function En$1(e) {
	return new L$1(function(t) {
		Ei(e, t).catch(function(n) {
			return t.error(n);
		});
	});
}
function Ti(e) {
	return En$1(Sn$1(e));
}
function Ei(e, t) {
	var n, r, i, o;
	return Jr(this, void 0, void 0, function() {
		var s, a;
		return fn$1(this, function(c) {
			switch (c.label) {
				case 0: c.trys.push([
					0,
					5,
					6,
					11
				]), n = Zr(e), c.label = 1;
				case 1: return [4, n.next()];
				case 2:
					if (r = c.sent(), !!r.done) return [3, 4];
					if (s = r.value, t.next(s), t.closed) return [2];
					c.label = 3;
				case 3: return [3, 1];
				case 4: return [3, 11];
				case 5: return a = c.sent(), i = { error: a }, [3, 11];
				case 6: return c.trys.push([
					6,
					,
					9,
					10
				]), r && !r.done && (o = n.return) ? [4, o.call(n)] : [3, 8];
				case 7: c.sent(), c.label = 8;
				case 8: return [3, 10];
				case 9:
					if (i) throw i.error;
					return [7];
				case 10: return [7];
				case 11: return t.complete(), [2];
			}
		});
	});
}
function ce(e, t, n, r, i) {
	r === void 0 && (r = 0), i === void 0 && (i = !1);
	var o = t.schedule(function() {
		n(), i ? e.add(this.schedule(null, r)) : this.unsubscribe();
	}, r);
	if (e.add(o), !i) return o;
}
function Cn$1(e, t) {
	return t === void 0 && (t = 0), B$1(function(n, r) {
		n.subscribe(z$1(r, function(i) {
			return ce(r, e, function() {
				return r.next(i);
			}, t);
		}, function() {
			return ce(r, e, function() {
				return r.complete();
			}, t);
		}, function(i) {
			return ce(r, e, function() {
				return r.error(i);
			}, t);
		}));
	});
}
function Pn(e, t) {
	return t === void 0 && (t = 0), B$1(function(n, r) {
		r.add(e.schedule(function() {
			return n.subscribe(r);
		}, t));
	});
}
function Ci(e, t) {
	return Q$1(e).pipe(Pn(t), Cn$1(t));
}
function Pi(e, t) {
	return Q$1(e).pipe(Pn(t), Cn$1(t));
}
function Oi(e, t) {
	return new L$1(function(n) {
		var r = 0;
		return t.schedule(function() {
			r === e.length ? n.complete() : (n.next(e[r++]), n.closed || this.schedule());
		});
	});
}
function Ai(e, t) {
	return new L$1(function(n) {
		var r;
		return ce(n, t, function() {
			r = e[wn](), ce(n, t, function() {
				var i, o, s;
				try {
					i = r.next(), o = i.value, s = i.done;
				} catch (a) {
					n.error(a);
					return;
				}
				s ? n.complete() : n.next(o);
			}, 0, !0);
		}), function() {
			return O$2(r == null ? void 0 : r.return) && r.return();
		};
	});
}
function On(e, t) {
	if (!e) throw new Error("Iterable cannot be null");
	return new L$1(function(n) {
		ce(n, t, function() {
			var r = e[Symbol.asyncIterator]();
			ce(n, t, function() {
				r.next().then(function(i) {
					i.done ? n.complete() : n.next(i.value);
				});
			}, 0, !0);
		});
	});
}
function _i(e, t) {
	return On(Sn$1(e), t);
}
function ki(e, t) {
	if (e != null) {
		if (gn$1(e)) return Ci(e, t);
		if (Tt$1(e)) return Oi(e, t);
		if (mn$1(e)) return Pi(e, t);
		if (bn$1(e)) return On(e, t);
		if (xn$1(e)) return Ai(e, t);
		if (Tn$1(e)) return _i(e, t);
	}
	throw yn$1(e);
}
function be$1(e, t) {
	return t ? ki(e, t) : Q$1(e);
}
function dt() {
	for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
	return be$1(e, St$1(e));
}
function Li(e) {
	return e instanceof Date && !isNaN(e);
}
var Ii = yt$1(function(e) {
	return function(n) {
		n === void 0 && (n = null), e(this), this.message = "Timeout has occurred", this.name = "TimeoutError", this.info = n;
	};
});
function Mi(e, t) {
	var n = Li(e) ? { first: e } : typeof e == "number" ? { each: e } : e, r = n.first, i = n.each, o = n.with, s = o === void 0 ? Ri : o, a = n.scheduler, c = a === void 0 ? vi : a, u = n.meta, l = u === void 0 ? null : u;
	if (r == null && i == null) throw new TypeError("No timeout provided.");
	return B$1(function(f, v) {
		var d, m, p = null, g = 0, h = function(x) {
			m = ce(v, c, function() {
				try {
					d.unsubscribe(), Q$1(s({
						meta: l,
						lastValue: p,
						seen: g
					})).subscribe(v);
				} catch (E) {
					v.error(E);
				}
			}, x);
		};
		d = f.subscribe(z$1(v, function(x) {
			m?.unsubscribe(), g++, v.next(p = x), i > 0 && h(i);
		}, void 0, void 0, function() {
			m != null && m.closed || m == null || m.unsubscribe(), p = null;
		})), !g && h(r != null ? typeof r == "number" ? r : +r - c.now() : i);
	});
}
function Ri(e) {
	throw new Ii(e);
}
function A$1(e, t) {
	return B$1(function(n, r) {
		var i = 0;
		n.subscribe(z$1(r, function(o) {
			r.next(e.call(t, o, i++));
		}));
	});
}
var Di = Array.isArray;
function Fi(e, t) {
	return Di(t) ? e.apply(void 0, xe$1([], he(t))) : e(t);
}
function Ni(e) {
	return A$1(function(t) {
		return Fi(e, t);
	});
}
function $i(e, t, n, r, i, o, s, a) {
	var c = [], u = 0, l = 0, f = !1, v = function() {
		f && !c.length && !u && t.complete();
	}, d = function(p) {
		return u < r ? m(p) : c.push(p);
	}, m = function(p) {
		u++;
		var g = !1;
		Q$1(n(p, l++)).subscribe(z$1(t, function(h) {
			t.next(h);
		}, function() {
			g = !0;
		}, void 0, function() {
			if (g) try {
				u--;
				for (var h = function() {
					var x = c.shift();
					s || m(x);
				}; c.length && u < r;) h();
				v();
			} catch (x) {
				t.error(x);
			}
		}));
	};
	return e.subscribe(z$1(t, d, function() {
		f = !0, v();
	})), function() {};
}
function Ae$1(e, t, n) {
	return n === void 0 && (n = Infinity), O$2(t) ? Ae$1(function(r, i) {
		return A$1(function(o, s) {
			return t(r, o, i, s);
		})(Q$1(e(r, i)));
	}, n) : (typeof t == "number" && (n = t), B$1(function(r, i) {
		return $i(r, i, e, n);
	}));
}
function Ui(e) {
	return Ae$1(et$1, e);
}
function Wi() {
	return Ui(1);
}
function ze$1() {
	for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
	return Wi()(be$1(e, St$1(e)));
}
var Bi = ["addListener", "removeListener"], ji = ["addEventListener", "removeEventListener"], Vi = ["on", "off"];
function pt$1(e, t, n, r) {
	if (O$2(n) && (r = n, n = void 0), r) return pt$1(e, t, n).pipe(Ni(r));
	var i = he(Yi(e) ? ji.map(function(a) {
		return function(c) {
			return e[a](t, c, n);
		};
	}) : Hi(e) ? Bi.map(Wt$2(e, t)) : zi(e) ? Vi.map(Wt$2(e, t)) : [], 2), o = i[0], s = i[1];
	if (!o && Tt$1(e)) return Ae$1(function(a) {
		return pt$1(a, t, n);
	})(Q$1(e));
	if (!o) throw new TypeError("Invalid event target");
	return new L$1(function(a) {
		var c = function() {
			for (var u = [], l = 0; l < arguments.length; l++) u[l] = arguments[l];
			return a.next(1 < u.length ? u : u[0]);
		};
		return o(c), function() {
			return s(c);
		};
	});
}
function Wt$2(e, t) {
	return function(n) {
		return function(r) {
			return e[n](t, r);
		};
	};
}
function Hi(e) {
	return O$2(e.addListener) && O$2(e.removeListener);
}
function zi(e) {
	return O$2(e.on) && O$2(e.off);
}
function Yi(e) {
	return O$2(e.addEventListener) && O$2(e.removeEventListener);
}
function tt$1(e, t) {
	return B$1(function(n, r) {
		var i = 0;
		n.subscribe(z$1(r, function(o) {
			return e.call(t, o, i++) && r.next(o);
		}));
	});
}
function qi(e, t, n, r, i) {
	return function(o, s) {
		var a = n, c = t, u = 0;
		o.subscribe(z$1(s, function(l) {
			var f = u++;
			c = a ? e(c, l, f) : (a = !0, l), s.next(c);
		}, i));
	};
}
function Ki(e, t) {
	return t === void 0 && (t = et$1), e = e ?? Gi, B$1(function(n, r) {
		var i, o = !0;
		n.subscribe(z$1(r, function(s) {
			var a = t(s);
			(o || !e(i, a)) && (o = !1, i = a, r.next(s));
		}));
	});
}
function Gi(e, t) {
	return e === t;
}
function Qi(e) {
	return B$1(function(t, n) {
		try {
			t.subscribe(n);
		} finally {
			n.add(e);
		}
	});
}
function $e(e, t) {
	return B$1(qi(e, t, arguments.length >= 2, !0));
}
function Ji(e) {
	e === void 0 && (e = {});
	var t = e.connector, n = t === void 0 ? function() {
		return new ie$2();
	} : t, r = e.resetOnError, i = r === void 0 ? !0 : r, o = e.resetOnComplete, s = o === void 0 ? !0 : o, a = e.resetOnRefCountZero, c = a === void 0 ? !0 : a;
	return function(u) {
		var l, f, v, d = 0, m = !1, p = !1, g = function() {
			f?.unsubscribe(), f = void 0;
		}, h = function() {
			g(), l = v = void 0, m = p = !1;
		}, x = function() {
			var E = l;
			h(), E?.unsubscribe();
		};
		return B$1(function(E, _) {
			d++, !p && !m && g();
			var b = v = v ?? n();
			_.add(function() {
				d--, d === 0 && !p && !m && (f = ot(x, c));
			}), b.subscribe(_), !l && d > 0 && (l = new Oe$1({
				next: function(S) {
					return b.next(S);
				},
				error: function(S) {
					p = !0, g(), f = ot(h, i, S), b.error(S);
				},
				complete: function() {
					m = !0, g(), f = ot(h, s), b.complete();
				}
			}), Q$1(E).subscribe(l));
		})(u);
	};
}
function ot(e, t) {
	for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];
	if (t === !0) {
		e();
		return;
	}
	if (t !== !1) {
		var i = new Oe$1({ next: function() {
			i.unsubscribe(), e();
		} });
		return Q$1(t.apply(void 0, xe$1([], he(n)))).subscribe(i);
	}
}
function Xi(e) {
	return B$1(function(t, n) {
		var r = !1, i = z$1(n, function() {
			i?.unsubscribe(), r = !0;
		}, He);
		Q$1(e).subscribe(i), t.subscribe(z$1(n, function(o) {
			return r && n.next(o);
		}));
	});
}
function U() {
	for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
	var n = St$1(e);
	return B$1(function(r, i) {
		(n ? ze$1(e, r, n) : ze$1(e, r)).subscribe(i);
	});
}
function An(e, t) {
	return B$1(function(n, r) {
		var i = null, o = 0, s = !1, a = function() {
			return s && !i && r.complete();
		};
		n.subscribe(z$1(r, function(c) {
			i?.unsubscribe();
			var u = 0, l = o++;
			Q$1(e(c, l)).subscribe(i = z$1(r, function(f) {
				return r.next(t ? t(c, f, l, u++) : f);
			}, function() {
				i = null, a();
			}));
		}, function() {
			s = !0, a();
		}));
	});
}
function Bt$1(e) {
	return B$1(function(t, n) {
		Q$1(e).subscribe(z$1(n, function() {
			return n.complete();
		}, He)), !n.closed && t.subscribe(n);
	});
}
function Zi(e, t, n) {
	var r = O$2(e) || t || n ? {
		next: e,
		error: t,
		complete: n
	} : e;
	return r ? B$1(function(i, o) {
		var s;
		(s = r.subscribe) === null || s === void 0 || s.call(r);
		var a = !0;
		i.subscribe(z$1(o, function(c) {
			var u;
			(u = r.next) === null || u === void 0 || u.call(r, c), o.next(c);
		}, function() {
			var c;
			a = !1, (c = r.complete) === null || c === void 0 || c.call(r), o.complete();
		}, function(c) {
			var u;
			a = !1, (u = r.error) === null || u === void 0 || u.call(r, c), o.error(c);
		}, function() {
			var c, u;
			a && ((c = r.unsubscribe) === null || c === void 0 || c.call(r)), (u = r.finalize) === null || u === void 0 || u.call(r);
		}));
	}) : et$1;
}
var eo = Object.defineProperty, to = Object.defineProperties, no = Object.getOwnPropertyDescriptors, jt$2 = Object.getOwnPropertySymbols, ro = Object.prototype.hasOwnProperty, io = Object.prototype.propertyIsEnumerable, Vt$1 = (e, t) => (t = Symbol[e]) ? t : Symbol.for("Symbol." + e), Ht$1 = (e, t, n) => t in e ? eo(e, t, {
	enumerable: !0,
	configurable: !0,
	writable: !0,
	value: n
}) : e[t] = n, X = (e, t) => {
	for (var n in t || (t = {})) ro.call(t, n) && Ht$1(e, n, t[n]);
	if (jt$2) for (var n of jt$2(t)) io.call(t, n) && Ht$1(e, n, t[n]);
	return e;
}, le = (e, t) => to(e, no(t)), H$1 = (e, t, n) => new Promise((r, i) => {
	var o = (c) => {
		try {
			a(n.next(c));
		} catch (u) {
			i(u);
		}
	}, s = (c) => {
		try {
			a(n.throw(c));
		} catch (u) {
			i(u);
		}
	}, a = (c) => c.done ? r(c.value) : Promise.resolve(c.value).then(o, s);
	a((n = n.apply(e, t)).next());
}), oo = (e, t, n) => (t = e[Vt$1("asyncIterator")]) ? t.call(e) : (e = e[Vt$1("iterator")](), t = {}, n = (r, i) => (i = e[r]) && (t[r] = (o) => new Promise((s, a, c) => (o = i.call(e, o), c = o.done, Promise.resolve(o.value).then((u) => s({
	value: u,
	done: c
}), a)))), n("next"), n("return"), t), _n$1 = "lk";
function K$1(e) {
	return typeof e > "u" ? !1 : so(e) || ao(e);
}
function so(e) {
	var t;
	return e ? e.hasOwnProperty("participant") && e.hasOwnProperty("source") && e.hasOwnProperty("track") && typeof ((t = e.publication) == null ? void 0 : t.track) < "u" : !1;
}
function ao(e) {
	return e ? e.hasOwnProperty("participant") && e.hasOwnProperty("source") && e.hasOwnProperty("publication") && typeof e.publication < "u" : !1;
}
function _e(e) {
	return e ? e.hasOwnProperty("participant") && e.hasOwnProperty("source") && typeof e.publication > "u" : !1;
}
function V$1(e) {
	if (typeof e == "string" || typeof e == "number") return `${e}`;
	if (_e(e)) return `${e.participant.identity}_${e.source}_placeholder`;
	if (K$1(e)) return `${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;
	throw new Error(`Can't generate a id for the given track reference: ${e}`);
}
function ss(e, t) {
	return e === void 0 || t === void 0 ? !1 : K$1(e) && K$1(t) ? e.publication.trackSid === t.publication.trackSid : V$1(e) === V$1(t);
}
function as(e, t) {
	return typeof t > "u" ? !1 : K$1(e) ? t.some((n) => n.participant.identity === e.participant.identity && K$1(n) && n.publication.trackSid === e.publication.trackSid) : _e(e) ? t.some((n) => n.participant.identity === e.participant.identity && _e(n) && n.source === e.source) : !1;
}
function co(e, t) {
	return _e(e) && K$1(t) && t.participant.identity === e.participant.identity && t.source === e.source;
}
function cs() {
	const e = document.createElement("p");
	e.style.width = "100%", e.style.height = "200px";
	const t = document.createElement("div");
	t.style.position = "absolute", t.style.top = "0px", t.style.left = "0px", t.style.visibility = "hidden", t.style.width = "200px", t.style.height = "150px", t.style.overflow = "hidden", t.appendChild(e), document.body.appendChild(t);
	const n = e.offsetWidth;
	t.style.overflow = "scroll";
	let r = e.offsetWidth;
	return n === r && (r = t.clientWidth), document.body.removeChild(t), n - r;
}
function us() {
	return typeof document < "u";
}
function uo(e) {
	e = X({}, e);
	const u = `(?:(?:(?:[a-z]+:)?//)?|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${(/* @__PURE__ */ new RegExp("(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}", "g")).source}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;
	return e.exact ? new RegExp(`(?:^${u}$)`, "i") : new RegExp(u, "ig");
}
var zt$1 = "[^\\.\\s@:](?:[^\\s@:]*[^\\s@:\\.])?@[^\\.\\s@]+(?:\\.[^\\.\\s@]+)*";
function lo({ exact: e } = {}) {
	return e ? new RegExp(`^${zt$1}$`) : new RegExp(zt$1, "g");
}
function ls(e, t, n) {
	return Br(e, t, () => H$1(this, null, function* () {
		const { x: i, y: o } = yield zr(e, t, {
			placement: "top",
			middleware: [
				jr(6),
				Hr(),
				Vr({ padding: 5 })
			]
		});
		n?.(i, o);
	}));
}
function fs(e, t) {
	return !e.contains(t.target);
}
var ds = () => ({
	email: lo(),
	url: uo({})
});
function ps(e, t) {
	const n = Object.entries(t).map(([o, s], a) => Array.from(e.matchAll(s)).map(({ index: c, 0: u }) => ({
		type: o,
		weight: a,
		content: u,
		index: c ?? 0
	}))).flat().sort((o, s) => {
		const a = o.index - s.index;
		return a !== 0 ? a : o.weight - s.weight;
	}).filter(({ index: o }, s, a) => {
		if (s === 0) return !0;
		const c = a[s - 1];
		return c.index + c.content.length <= o;
	}), r = [];
	let i = 0;
	for (const { type: o, content: s, index: a } of n) a > i && r.push(e.substring(i, a)), r.push({
		type: o,
		content: s
	}), i = a + s.length;
	return e.length > i && r.push(e.substring(i)), r;
}
var kn$1 = [
	...[
		RoomEvent.ConnectionStateChanged,
		RoomEvent.RoomMetadataChanged,
		RoomEvent.ActiveSpeakersChanged,
		RoomEvent.ConnectionQualityChanged,
		RoomEvent.ParticipantConnected,
		RoomEvent.ParticipantDisconnected,
		RoomEvent.ParticipantPermissionsChanged,
		RoomEvent.ParticipantMetadataChanged,
		RoomEvent.ParticipantNameChanged,
		RoomEvent.ParticipantAttributesChanged,
		RoomEvent.TrackMuted,
		RoomEvent.TrackUnmuted,
		RoomEvent.TrackPublished,
		RoomEvent.TrackUnpublished,
		RoomEvent.TrackStreamStateChanged,
		RoomEvent.TrackSubscriptionFailed,
		RoomEvent.TrackSubscriptionPermissionChanged,
		RoomEvent.TrackSubscriptionStatusChanged
	],
	RoomEvent.LocalTrackPublished,
	RoomEvent.LocalTrackUnpublished
], po = [
	ParticipantEvent.TrackPublished,
	ParticipantEvent.TrackUnpublished,
	ParticipantEvent.TrackMuted,
	ParticipantEvent.TrackUnmuted,
	ParticipantEvent.TrackStreamStateChanged,
	ParticipantEvent.TrackSubscribed,
	ParticipantEvent.TrackUnsubscribed,
	ParticipantEvent.TrackSubscriptionPermissionChanged,
	ParticipantEvent.TrackSubscriptionFailed,
	ParticipantEvent.LocalTrackPublished,
	ParticipantEvent.LocalTrackUnpublished
], Ln = [
	...[
		ParticipantEvent.ConnectionQualityChanged,
		ParticipantEvent.IsSpeakingChanged,
		ParticipantEvent.ParticipantMetadataChanged,
		ParticipantEvent.ParticipantPermissionsChanged,
		ParticipantEvent.TrackMuted,
		ParticipantEvent.TrackUnmuted,
		ParticipantEvent.TrackPublished,
		ParticipantEvent.TrackUnpublished,
		ParticipantEvent.TrackStreamStateChanged,
		ParticipantEvent.TrackSubscriptionFailed,
		ParticipantEvent.TrackSubscriptionPermissionChanged,
		ParticipantEvent.TrackSubscriptionStatusChanged
	],
	ParticipantEvent.LocalTrackPublished,
	ParticipantEvent.LocalTrackUnpublished
], I$1 = Qr.getLogger("lk-components-js");
I$1.setDefaultLevel("WARN");
function hs(e, t = {}) {
	var n;
	I$1.setLevel(e), setLogLevel((n = t.liveKitClientLogLevel) != null ? n : e);
}
function vs(e, t = {}) {
	var n;
	const r = I$1.methodFactory;
	I$1.methodFactory = (i, o, s) => {
		const a = r(i, o, s), c = LogLevel[i], u = c >= o && c < LogLevel.silent;
		return (l, f) => {
			f ? a(l, f) : a(l), u && e(c, l, f);
		};
	}, I$1.setLevel(I$1.getLevel()), setLogExtension((n = t.liveKitClientLogExtension) != null ? n : e);
}
var ms = [
	{
		columns: 1,
		rows: 1
	},
	{
		columns: 1,
		rows: 2,
		orientation: "portrait"
	},
	{
		columns: 2,
		rows: 1,
		orientation: "landscape"
	},
	{
		columns: 2,
		rows: 2,
		minWidth: 560
	},
	{
		columns: 3,
		rows: 3,
		minWidth: 700
	},
	{
		columns: 4,
		rows: 4,
		minWidth: 960
	},
	{
		columns: 5,
		rows: 5,
		minWidth: 1100
	}
];
function vo(e, t, n, r) {
	if (e.length < 1) throw new Error("At least one grid layout definition must be provided.");
	const i = mo(e);
	if (n <= 0 || r <= 0) return i[0];
	let o = 0;
	const s = n / r > 1 ? "landscape" : "portrait";
	let a = i.find((c, u, l) => {
		o = u;
		const f = l.findIndex((v, d) => {
			const m = !v.orientation || v.orientation === s, p = d > u, g = v.maxTiles === c.maxTiles;
			return p && g && m;
		}) !== -1;
		return c.maxTiles >= t && !f;
	});
	if (a === void 0) if (a = i[i.length - 1], a) I$1.warn(`No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${a}).`);
	else throw new Error("No layout or fallback layout found.");
	if ((n < a.minWidth || r < a.minHeight) && o > 0) {
		const c = i[o - 1];
		a = vo(i.slice(0, o), c.maxTiles, n, r);
	}
	return a;
}
function mo(e) {
	return [...e].map((t) => {
		var n, r;
		return {
			name: `${t.columns}x${t.rows}`,
			columns: t.columns,
			rows: t.rows,
			maxTiles: t.columns * t.rows,
			minWidth: (n = t.minWidth) != null ? n : 0,
			minHeight: (r = t.minHeight) != null ? r : 0,
			orientation: t.orientation
		};
	}).sort((t, n) => t.maxTiles !== n.maxTiles ? t.maxTiles - n.maxTiles : t.minWidth !== 0 || n.minWidth !== 0 ? t.minWidth - n.minWidth : t.minHeight !== 0 || n.minHeight !== 0 ? t.minHeight - n.minHeight : 0);
}
function gs() {
	return typeof navigator < "u" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;
}
function bs(e, t) {
	var n;
	return le(X({}, e), {
		receivedAtMediaTimestamp: (n = t.rtpTimestamp) != null ? n : 0,
		receivedAt: t.timestamp
	});
}
function ys(e, t, n) {
	return [...e, ...t].reduceRight((r, i) => (r.find((o) => o.id === i.id) || r.unshift(i), r), []).slice(0 - n);
}
var go = /* @__PURE__ */ ((e) => (e.AgentState = "lk.agent.state", e.PublishOnBehalf = "lk.publish_on_behalf", e.TranscriptionFinal = "lk.transcription_final", e.TranscriptionSegmentId = "lk.segment_id", e.TranscribedTrackId = "lk.transcribed_track_id", e))(go || {}), In$1 = [], Mn$1 = {
	showChat: !1,
	unreadMessages: 0,
	showSettings: !1
};
function bo(e) {
	return typeof e == "object";
}
function ws(e) {
	return Array.isArray(e) && e.filter(bo).length > 0;
}
function Rn(e, t) {
	return t.audioLevel - e.audioLevel;
}
function Dn$1(e, t) {
	return e.isSpeaking === t.isSpeaking ? 0 : e.isSpeaking ? -1 : 1;
}
function Fn$1(e, t) {
	var n, r, i, o;
	return e.lastSpokeAt !== void 0 || t.lastSpokeAt !== void 0 ? ((r = (n = t.lastSpokeAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = e.lastSpokeAt) == null ? void 0 : i.getTime()) != null ? o : 0) : 0;
}
function Ye(e, t) {
	var n, r, i, o;
	return ((r = (n = e.joinedAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = t.joinedAt) == null ? void 0 : i.getTime()) != null ? o : 0);
}
function yo(e, t) {
	return K$1(e) ? K$1(t) ? 0 : -1 : K$1(t) ? 1 : 0;
}
function wo(e, t) {
	const n = e.participant.isCameraEnabled;
	return n !== t.participant.isCameraEnabled ? n ? -1 : 1 : 0;
}
function xs(e) {
	const t = [], n = [], r = [], i = [];
	e.forEach((a) => {
		a.participant.isLocal && a.source === Track.Source.Camera ? t.push(a) : a.source === Track.Source.ScreenShare ? n.push(a) : a.source === Track.Source.Camera ? r.push(a) : i.push(a);
	});
	const o = xo(n), s = So(r);
	return [
		...t,
		...o,
		...s,
		...i
	];
}
function xo(e) {
	const t = [], n = [];
	return e.forEach((i) => {
		i.participant.isLocal ? t.push(i) : n.push(i);
	}), t.sort((i, o) => Ye(i.participant, o.participant)), n.sort((i, o) => Ye(i.participant, o.participant)), [...n, ...t];
}
function So(e) {
	const t = [], n = [];
	return e.forEach((r) => {
		r.participant.isLocal ? t.push(r) : n.push(r);
	}), n.sort((r, i) => r.participant.isSpeaking && i.participant.isSpeaking ? Rn(r.participant, i.participant) : r.participant.isSpeaking !== i.participant.isSpeaking ? Dn$1(r.participant, i.participant) : r.participant.lastSpokeAt !== i.participant.lastSpokeAt ? Fn$1(r.participant, i.participant) : K$1(r) !== K$1(i) ? yo(r, i) : r.participant.isCameraEnabled !== i.participant.isCameraEnabled ? wo(r, i) : Ye(r.participant, i.participant)), [...t, ...n];
}
function Ss(e) {
	const t = [...e];
	t.sort((r, i) => {
		if (r.isSpeaking && i.isSpeaking) return Rn(r, i);
		if (r.isSpeaking !== i.isSpeaking) return Dn$1(r, i);
		if (r.lastSpokeAt !== i.lastSpokeAt) return Fn$1(r, i);
		const o = r.videoTrackPublications.size > 0;
		return o !== i.videoTrackPublications.size > 0 ? o ? -1 : 1 : Ye(r, i);
	});
	const n = t.find((r) => r.isLocal);
	if (n) {
		const r = t.indexOf(n);
		r >= 0 && (t.splice(r, 1), t.length > 0 ? t.splice(0, 0, n) : t.push(n));
	}
	return t;
}
function To(e, t) {
	return e.reduce((n, r, i) => i % t === 0 ? [...n, [r]] : [...n.slice(0, -1), [...n.slice(-1)[0], r]], []);
}
function Yt$2(e, t) {
	const n = Math.max(e.length, t.length);
	return new Array(n).fill([]).map((r, i) => [e[i], t[i]]);
}
function qe(e, t, n) {
	return e.filter((r) => !t.map((i) => n(i)).includes(n(r)));
}
function ht(e) {
	return e.map((t) => typeof t == "string" || typeof t == "number" ? `${t}` : V$1(t));
}
function Eo(e, t) {
	return {
		dropped: qe(e, t, V$1),
		added: qe(t, e, V$1)
	};
}
function Co(e) {
	return e.added.length !== 0 || e.dropped.length !== 0;
}
function vt(e, t) {
	const n = t.findIndex((r) => V$1(r) === V$1(e));
	if (n === -1) throw new Error(`Element not part of the array: ${V$1(e)} not in ${ht(t)}`);
	return n;
}
function Po(e, t, n) {
	const r = vt(e, n), i = vt(t, n);
	return n.splice(r, 1, t), n.splice(i, 1, e), n;
}
function Oo(e, t) {
	const n = vt(e, t);
	return t.splice(n, 1), t;
}
function Ao(e, t) {
	return [...t, e];
}
function st(e, t) {
	return To(e, t);
}
function Ts(e, t, n) {
	let r = _o(e, t);
	if (r.length < t.length) {
		const s = qe(t, r, V$1);
		r = [...r, ...s];
	}
	if (Yt$2(st(r, n), st(t, n)).forEach(([s, a], c) => {
		if (s && a) {
			const u = st(r, n)[c], l = Eo(u, a);
			Co(l) && (I$1.debug(`Detected visual changes on page: ${c}, current: ${ht(s)}, next: ${ht(a)}`, { changes: l }), l.added.length === l.dropped.length && Yt$2(l.added, l.dropped).forEach(([f, v]) => {
				if (f && v) r = Po(f, v, r);
				else throw new Error(`For a swap action we need a addition and a removal one is missing: ${f}, ${v}`);
			}), l.added.length === 0 && l.dropped.length > 0 && l.dropped.forEach((f) => {
				r = Oo(f, r);
			}), l.added.length > 0 && l.dropped.length === 0 && l.added.forEach((f) => {
				r = Ao(f, r);
			}));
		}
	}), r.length > t.length) {
		const s = qe(r, t, V$1);
		r = r.filter((a) => !s.map(V$1).includes(V$1(a)));
	}
	return r;
}
function _o(e, t) {
	return e.map((n) => {
		return t.find((i) => V$1(n) === V$1(i) || typeof n != "number" && _e(n) && K$1(i) && co(n, i)) ?? n;
	});
}
function Y$1(e) {
	return `${_n$1}-${e}`;
}
function Es(e) {
	const t = qt$1(e), n = Nn$1(e.participant).pipe(A$1(() => qt$1(e)), U(t));
	return {
		className: Y$1(e.source === Track.Source.Camera || e.source === Track.Source.ScreenShare ? "participant-media-video" : "participant-media-audio"),
		trackObserver: n
	};
}
function qt$1(e) {
	if (K$1(e)) return e.publication;
	{
		const { source: t, name: n, participant: r } = e;
		if (t && n) return r.getTrackPublications().find((i) => i.source === t && i.trackName === n);
		if (n) return r.getTrackPublicationByName(n);
		if (t) return r.getTrackPublication(t);
		throw new Error("At least one of source and name needs to be defined");
	}
}
function ve$1(e, ...t) {
	return new L$1((r) => {
		const i = () => {
			r.next(e);
		};
		return t.forEach((s) => {
			e.on(s, i);
		}), () => {
			t.forEach((s) => {
				e.off(s, i);
			});
		};
	}).pipe(U(e));
}
function Te(e, t) {
	return new L$1((r) => {
		const i = (...s) => {
			r.next(s);
		};
		return e.on(t, i), () => {
			e.off(t, i);
		};
	});
}
function Cs(e) {
	return Te(e, RoomEvent.ConnectionStateChanged).pipe(A$1(([t]) => t), U(e.state));
}
function Ps(e) {
	return ve$1(e, RoomEvent.RoomMetadataChanged, RoomEvent.ConnectionStateChanged).pipe(A$1((n) => ({
		name: n.name,
		metadata: n.metadata
	})));
}
function Os(e) {
	return Te(e, RoomEvent.ActiveSpeakersChanged).pipe(A$1(([t]) => t));
}
function As(e, t, n = !0) {
	return ze$1(new L$1((o) => {
		Room.getLocalDevices(e, n).then((s) => {
			o.next(s), o.complete();
		}).catch((s) => {
			t?.(s), o.next([]), o.complete();
		});
	}), new L$1((o) => {
		var s;
		const a = () => H$1(this, null, function* () {
			try {
				const c = yield Room.getLocalDevices(e, n);
				o.next(c);
			} catch (c) {
				t?.(c);
			}
		});
		if (typeof window < "u") {
			if (!window.isSecureContext) throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");
			(s = navigator == null ? void 0 : navigator.mediaDevices) == null || s.addEventListener("devicechange", a);
		}
		return () => {
			var c;
			(c = navigator == null ? void 0 : navigator.mediaDevices) == null || c.removeEventListener("devicechange", a);
		};
	}));
}
function ko(e) {
	return Te(e, RoomEvent.DataReceived);
}
function Lo(e) {
	return ve$1(e, RoomEvent.AudioPlaybackStatusChanged).pipe(A$1((n) => ({ canPlayAudio: n.canPlaybackAudio })));
}
function Io(e) {
	return ve$1(e, RoomEvent.VideoPlaybackStatusChanged).pipe(A$1((n) => ({ canPlayVideo: n.canPlaybackVideo })));
}
function Mo(e, t) {
	return Te(e, RoomEvent.ActiveDeviceChanged).pipe(tt$1(([n]) => n === t), A$1(([n, r]) => (I$1.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged", {
		kind: n,
		deviceId: r
	}), r)));
}
function _s(e, t) {
	return Te(e, RoomEvent.ParticipantEncryptionStatusChanged).pipe(tt$1(([, n]) => (t == null ? void 0 : t.identity) === (n == null ? void 0 : n.identity) || !n && (t == null ? void 0 : t.identity) === e.localParticipant.identity), A$1(([n]) => n), U(t != null && t.isLocal ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)));
}
function ks(e) {
	return Te(e, RoomEvent.RecordingStatusChanged).pipe(A$1(([t]) => t), U(e.isRecording));
}
function Ee$1(e, ...t) {
	return new L$1((r) => {
		const i = () => {
			r.next(e);
		};
		return t.forEach((s) => {
			e.on(s, i);
		}), () => {
			t.forEach((s) => {
				e.off(s, i);
			});
		};
	}).pipe(U(e));
}
function Nn$1(e) {
	return Ee$1(e, ParticipantEvent.TrackMuted, ParticipantEvent.TrackUnmuted, ParticipantEvent.ParticipantPermissionsChanged, ParticipantEvent.TrackPublished, ParticipantEvent.TrackUnpublished, ParticipantEvent.LocalTrackPublished, ParticipantEvent.LocalTrackUnpublished, ParticipantEvent.MediaDevicesError, ParticipantEvent.TrackSubscriptionStatusChanged).pipe(A$1((n) => {
		const { isMicrophoneEnabled: r, isCameraEnabled: i, isScreenShareEnabled: o } = n, s = n.getTrackPublication(Track.Source.Microphone);
		return {
			isCameraEnabled: i,
			isMicrophoneEnabled: r,
			isScreenShareEnabled: o,
			cameraTrack: n.getTrackPublication(Track.Source.Camera),
			microphoneTrack: s,
			participant: n
		};
	}));
}
function Ro(e) {
	return e ? Ee$1(e, ParticipantEvent.ParticipantMetadataChanged, ParticipantEvent.ParticipantNameChanged).pipe(A$1(({ name: n, identity: r, metadata: i }) => ({
		name: n,
		identity: r,
		metadata: i
	})), U({
		name: e.name,
		identity: e.identity,
		metadata: e.metadata
	})) : void 0;
}
function Do(e) {
	return nt$1(e, ParticipantEvent.ConnectionQualityChanged).pipe(A$1(([n]) => n), U(e.connectionQuality));
}
function nt$1(e, t) {
	return new L$1((r) => {
		const i = (...s) => {
			r.next(s);
		};
		return e.on(t, i), () => {
			e.off(t, i);
		};
	});
}
function Fo(e) {
	var t, n, r, i;
	return Ee$1(e.participant, ParticipantEvent.TrackMuted, ParticipantEvent.TrackUnmuted, ParticipantEvent.TrackSubscribed, ParticipantEvent.TrackUnsubscribed, ParticipantEvent.LocalTrackPublished, ParticipantEvent.LocalTrackUnpublished).pipe(A$1((o) => {
		var s, a;
		const c = (s = e.publication) != null ? s : o.getTrackPublication(e.source);
		return (a = c == null ? void 0 : c.isMuted) != null ? a : !0;
	}), U((i = (r = (t = e.publication) == null ? void 0 : t.isMuted) != null ? r : (n = e.participant.getTrackPublication(e.source)) == null ? void 0 : n.isMuted) != null ? i : !0));
}
function Ls(e) {
	return nt$1(e, ParticipantEvent.IsSpeakingChanged).pipe(A$1(([t]) => t));
}
function Is(e, t = {}) {
	var n;
	let r;
	const i = new L$1((c) => (r = c, () => a.unsubscribe())).pipe(U(Array.from(e.remoteParticipants.values()))), o = (n = t.additionalRoomEvents) != null ? n : kn$1, a = ve$1(e, ...Array.from(/* @__PURE__ */ new Set([
		RoomEvent.ParticipantConnected,
		RoomEvent.ParticipantDisconnected,
		RoomEvent.ConnectionStateChanged,
		...o
	]))).subscribe((c) => r == null ? void 0 : r.next(Array.from(c.remoteParticipants.values())));
	return e.remoteParticipants.size > 0 && r?.next(Array.from(e.remoteParticipants.values())), i;
}
function Ms(e, t, n = {}) {
	var r;
	const i = (r = n.additionalEvents) != null ? r : Ln;
	return ve$1(e, RoomEvent.ParticipantConnected, RoomEvent.ParticipantDisconnected, RoomEvent.ConnectionStateChanged).pipe(An((s) => {
		const a = s.getParticipantByIdentity(t);
		return a ? Ee$1(a, ...i) : new L$1((c) => c.next(void 0));
	}), U(e.getParticipantByIdentity(t)));
}
function Rs(e) {
	return nt$1(e, ParticipantEvent.ParticipantPermissionsChanged).pipe(A$1(() => e.permissions), U(e.permissions));
}
function Ds(e, { kind: t, identity: n }, r = {}) {
	var i;
	const o = (i = r.additionalEvents) != null ? i : Ln, s = (c) => {
		let u = !0;
		return t && (u = u && c.kind === t), n && (u = u && c.identity === n), u;
	};
	return ve$1(e, RoomEvent.ParticipantConnected, RoomEvent.ParticipantDisconnected, RoomEvent.ConnectionStateChanged).pipe(An((c) => {
		const u = Array.from(c.remoteParticipants.values()).find((l) => s(l));
		return u ? Ee$1(u, ...o) : new L$1((l) => l.next(void 0));
	}), U(Array.from(e.remoteParticipants.values()).find((c) => s(c))));
}
function Fs(e) {
	return typeof e > "u" ? new L$1() : nt$1(e, ParticipantEvent.AttributesChanged).pipe(A$1(([t]) => ({
		changed: t,
		attributes: e.attributes
	})), U({
		changed: e.attributes,
		attributes: e.attributes
	}));
}
function Ns(e, t, n, r, i) {
	const { localParticipant: o } = t, s = (f, v) => {
		let d = !1;
		switch (f) {
			case Track.Source.Camera:
				d = v.isCameraEnabled;
				break;
			case Track.Source.Microphone:
				d = v.isMicrophoneEnabled;
				break;
			case Track.Source.ScreenShare:
				d = v.isScreenShareEnabled;
				break;
		}
		return d;
	}, a = Nn$1(o).pipe(A$1((f) => s(e, f.participant)), U(s(e, o))), c = new ie$2(), u = (f, v) => H$1(this, null, function* () {
		try {
			switch (v ?? (v = n), c.next(!0), e) {
				case Track.Source.Camera: return yield o.setCameraEnabled(f ?? !o.isCameraEnabled, v, r), o.isCameraEnabled;
				case Track.Source.Microphone: return yield o.setMicrophoneEnabled(f ?? !o.isMicrophoneEnabled, v, r), o.isMicrophoneEnabled;
				case Track.Source.ScreenShare: return yield o.setScreenShareEnabled(f ?? !o.isScreenShareEnabled, v, r), o.isScreenShareEnabled;
				default: throw new TypeError("Tried to toggle unsupported source");
			}
		} catch (d) {
			if (i && d instanceof Error) {
				i?.(d);
				return;
			} else throw d;
		} finally {
			c.next(!1);
		}
	});
	return {
		className: Y$1("button"),
		toggle: u,
		enabledObserver: a,
		pendingObserver: c.asObservable()
	};
}
function $s() {
	let e = !1;
	const t = new ie$2(), n = new ie$2(), r = (o) => H$1(this, null, function* () {
		n.next(!0), e = o ?? !e, t.next(e), n.next(!1);
	});
	return {
		className: Y$1("button"),
		toggle: r,
		enabledObserver: t.asObservable(),
		pendingObserver: n.asObservable()
	};
}
function Us(e, t, n) {
	const r = new vn$1(void 0), i = Mo(t, e), o = (a, ...c) => H$1(this, [a, ...c], function* (u, l = {}) {
		var f, v, d;
		if (t) {
			const m = getBrowser();
			if (e === "audiooutput" && ((m == null ? void 0 : m.name) === "Safari" || (m == null ? void 0 : m.os) === "iOS")) {
				I$1.warn("Switching audio output device is not supported on Safari and iOS.");
				return;
			}
			I$1.debug(`Switching active device of kind "${e}" with id ${u}.`), yield t.switchActiveDevice(e, u, l.exact);
			const p = (f = t.getActiveDevice(e)) != null ? f : u;
			p !== u && u !== "default" && I$1.info(`We tried to select the device with id (${u}), but the browser decided to select the device with id (${p}) instead.`);
			let g;
			e === "audioinput" ? g = (v = t.localParticipant.getTrackPublication(Track.Source.Microphone)) == null ? void 0 : v.track : e === "videoinput" && (g = (d = t.localParticipant.getTrackPublication(Track.Source.Camera)) == null ? void 0 : d.track);
			const h = u === "default" && !g || u === "default" && (g == null ? void 0 : g.mediaStreamTrack.label.startsWith("Default"));
			r.next(h ? u : p);
		}
	});
	return {
		className: Y$1("media-device-select"),
		activeDeviceObservable: i,
		setActiveMediaDevice: o
	};
}
function Ws(e) {
	const t = (r) => {
		e.disconnect(r);
	};
	return {
		className: Y$1("disconnect-button"),
		disconnect: t
	};
}
function Bs(e) {
	return {
		className: Y$1("connection-quality"),
		connectionQualityObserver: Do(e)
	};
}
function js(e) {
	let t = "track-muted-indicator-camera";
	switch (e.source) {
		case Track.Source.Camera:
			t = "track-muted-indicator-camera";
			break;
		case Track.Source.Microphone:
			t = "track-muted-indicator-microphone";
			break;
	}
	return {
		className: Y$1(t),
		mediaMutedObserver: Fo(e)
	};
}
function Vs(e) {
	return {
		className: "lk-participant-name",
		infoObserver: Ro(e)
	};
}
function Hs() {
	return { className: Y$1("participant-tile") };
}
var No = {
	CHAT: "lk.chat",
	TRANSCRIPTION: "lk.transcription"
}, $o = { CHAT: "lk-chat-topic" };
function $n$1(e, t) {
	return H$1(this, arguments, function* (n, r, i = {}) {
		const { reliable: o, destinationIdentities: s, topic: a } = i;
		yield n.publishData(r, {
			destinationIdentities: s,
			topic: a,
			reliable: o
		});
	});
}
function Uo(e, t, n) {
	const r = Array.isArray(t) ? t : [t], i = ko(e).pipe(tt$1(([, , , c]) => t === void 0 || c !== void 0 && r.includes(c)), A$1(([c, u, , l]) => {
		const f = {
			payload: c,
			topic: l,
			from: u
		};
		return n?.(f), f;
	}));
	let o;
	return {
		messageObservable: i,
		isSendingObservable: new L$1((c) => {
			o = c;
		}),
		send: (c, ...u) => H$1(this, [c, ...u], function* (l, f = {}) {
			o.next(!0);
			try {
				yield $n$1(e.localParticipant, l, X({ topic: r[0] }, f));
			} finally {
				o.next(!1);
			}
		})
	};
}
var Wo = class {
	constructor(e, t) {
		this._isResolved = !1, this.onFinally = t, this.promise = new Promise((n, r) => H$1(this, null, function* () {
			this.resolve = n, this.reject = r, e && (yield e(n, r));
		})).finally(() => {
			var n;
			this._isResolved = !0, (n = this.onFinally) == null || n.call(this);
		});
	}
	get isResolved() {
		return this._isResolved;
	}
}, Re$2 = /* @__PURE__ */ new WeakMap(), De = /* @__PURE__ */ new Map();
function Bo(e) {
	return e.ignoreLegacy == !0;
}
var jo = (e) => JSON.parse(new TextDecoder().decode(e)), Vo = (e) => new TextEncoder().encode(JSON.stringify(e));
function zs(e, t) {
	var n, r, i, o, s, a;
	const c = () => {
		var b, S, C;
		return ((b = e.serverInfo) == null ? void 0 : b.edition) === 1 || !!((S = e.serverInfo) != null && S.version) && compareVersions((C = e.serverInfo) == null ? void 0 : C.version, "1.8.2") > 0;
	}, u = new ie$2(), l = (n = t == null ? void 0 : t.channelTopic) != null ? n : No.CHAT, f = (r = t == null ? void 0 : t.channelTopic) != null ? r : $o.CHAT;
	let v = !1;
	Re$2.has(e) || (v = !0);
	const d = (i = Re$2.get(e)) != null ? i : /* @__PURE__ */ new Map(), m = (o = d.get(l)) != null ? o : new ie$2();
	d.set(l, m), Re$2.set(e, d);
	const p = (s = t == null ? void 0 : t.messageDecoder) != null ? s : jo;
	if (v) {
		e.registerTextStreamHandler(l, (S, C) => H$1(this, null, function* () {
			const { id: M, timestamp: R, attributes: W, attachedStreamIds: T } = S.info, P = new Map((T ?? []).map((k) => [k, new Wo()]));
			De.set(M, P), be$1(S).pipe($e((k, F) => k + F), Ae$1((k) => P.size === 0 ? dt({
				chunk: k,
				attachedFiles: []
			}) : be$1(P.values()).pipe(Ae$1((F) => be$1(F.promise)), $e((F, G) => [...F, new File(G.buffer, G.fileName)], []), A$1((F) => ({
				chunk: k,
				attachedFiles: F
			})))), A$1(({ chunk: k, attachedFiles: F }) => ({
				id: M,
				timestamp: R,
				message: k,
				from: e.getParticipantByIdentity(C.identity),
				type: "chatMessage",
				attributes: W,
				attachedFiles: F
			})), Qi(() => De.delete(M))).subscribe({ next: (k) => m.next(k) });
		})), e.registerByteStreamHandler(l, (S) => H$1(this, null, function* () {
			var C, M;
			const { id: R } = S.info, W = Array.from(De).find(([, N]) => N.has(R));
			if (!W) return;
			const T = W[0], P = [];
			try {
				for (var j = oo(S), k, F, G; k = !(F = yield j.next()).done; k = !1) {
					const N = F.value;
					P.push(N);
				}
			} catch (N) {
				G = [N];
			} finally {
				try {
					k && (F = j.return) && (yield F.call(j));
				} finally {
					if (G) throw G[0];
				}
			}
			const J = (C = De.get(T)) == null ? void 0 : C.get(R);
			J && ((M = J.resolve) == null || M.call(J, {
				fileName: S.info.name,
				buffer: P
			}));
		}));
		const { messageObservable: b } = Uo(e, [f]);
		b.pipe(A$1((S) => {
			const C = p(S.payload);
			return Bo(C) ? void 0 : le(X({}, C), {
				type: "chatMessage",
				from: S.from
			});
		}), tt$1((S) => !!S), Bt$1(u)).subscribe(m);
	}
	const g = m.pipe($e((b, S) => {
		if ("id" in S && b.find((C) => {
			var M, R;
			return ((M = C.from) == null ? void 0 : M.identity) === ((R = S.from) == null ? void 0 : R.identity) && C.id === S.id;
		})) {
			const C = b.findIndex((M) => M.id === S.id);
			if (C > -1) {
				const M = b[C];
				b[C] = le(X({}, S), {
					timestamp: M.timestamp,
					editTimestamp: S.timestamp
				});
			}
			return [...b];
		}
		return [...b, S];
	}, []), Bt$1(u)), h = new vn$1(!1), x = (a = t == null ? void 0 : t.messageEncoder) != null ? a : Vo, E = (b, S) => H$1(this, null, function* () {
		S || (S = {}), S.topic ?? (S.topic = l), h.next(!0);
		try {
			const R = {
				id: (yield e.localParticipant.sendText(b, S)).id,
				timestamp: Date.now(),
				message: b
			}, T = le(X({}, le(X({}, R), { attachedFiles: S.attachments })), {
				type: "chatMessage",
				from: e.localParticipant,
				attributes: S.attributes
			});
			m.next(T);
			const P = x(le(X({}, R), { ignoreLegacy: c() }));
			try {
				yield $n$1(e.localParticipant, P, {
					reliable: !0,
					topic: f
				});
			} catch (j) {
				I$1.info("could not send message in legacy chat format", j);
			}
			return T;
		} finally {
			h.next(!1);
		}
	});
	function _() {
		u.next(), u.complete(), m.complete(), Re$2.delete(e), e.unregisterTextStreamHandler(l), e.unregisterByteStreamHandler(l);
	}
	return e.once(RoomEvent.Disconnected, _), {
		messageObservable: g,
		isSendingObservable: h,
		send: E
	};
}
function Ys() {
	const e = (n) => H$1(this, null, function* () {
		I$1.info("Start Audio for room: ", n), yield n.startAudio();
	});
	return {
		className: Y$1("start-audio-button"),
		roomAudioPlaybackAllowedObservable: Lo,
		handleStartAudioPlayback: e
	};
}
function qs() {
	const e = (n) => H$1(this, null, function* () {
		I$1.info("Start Video for room: ", n), yield n.startVideo();
	});
	return {
		className: Y$1("start-audio-button"),
		roomVideoPlaybackAllowedObservable: Io,
		handleStartVideoPlayback: e
	};
}
function Ks() {
	return { className: [Y$1("button"), Y$1("chat-toggle")].join(" ") };
}
function Gs() {
	return { className: [Y$1("button"), Y$1("focus-toggle-button")].join(" ") };
}
function Qs() {
	return { className: "lk-clear-pin-button lk-button" };
}
function Js() {
	return { className: "lk-room-container" };
}
function Kt$2(e, t, n = !0) {
	const i = [e.localParticipant, ...Array.from(e.remoteParticipants.values())], o = [];
	return i.forEach((s) => {
		t.forEach((a) => {
			const c = Array.from(s.trackPublications.values()).filter((u) => u.source === a && (!n || u.track)).map((u) => ({
				participant: s,
				publication: u,
				source: u.source
			}));
			o.push(...c);
		});
	}), {
		trackReferences: o,
		participants: i
	};
}
function Gt$2(e, t, n = !1) {
	const { sources: r, kind: i, name: o } = t;
	return Array.from(e.trackPublications.values()).filter((a) => (!r || r.includes(a.source)) && (!i || a.kind === i) && (!o || a.trackName === o) && (!n || a.track)).map((a) => ({
		participant: e,
		publication: a,
		source: a.source
	}));
}
function Xs(e, t, n) {
	var r, i;
	const o = (r = n.additionalRoomEvents) != null ? r : kn$1, s = (i = n.onlySubscribed) != null ? i : !0;
	return ve$1(e, ...Array.from((/* @__PURE__ */ new Set([
		RoomEvent.ParticipantConnected,
		RoomEvent.ParticipantDisconnected,
		RoomEvent.ConnectionStateChanged,
		RoomEvent.LocalTrackPublished,
		RoomEvent.LocalTrackUnpublished,
		RoomEvent.TrackPublished,
		RoomEvent.TrackUnpublished,
		RoomEvent.TrackSubscriptionStatusChanged,
		...o
	])).values())).pipe(A$1((u) => {
		const l = Kt$2(u, t, s);
		return I$1.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`, l), l;
	}), U(Kt$2(e, t, s)));
}
function Zs(e, t) {
	return Ee$1(e, ...po).pipe(A$1((r) => {
		const i = Gt$2(r, t);
		return I$1.debug(`TrackReference[] was updated. (length ${i.length})`, i), i;
	}), U(Gt$2(e, t)));
}
function Un$1(e, t) {
	return new L$1((r) => {
		const i = (...s) => {
			r.next(s);
		};
		return e.on(t, i), () => {
			e.off(t, i);
		};
	});
}
function ea(e) {
	return Un$1(e, TrackEvent.TranscriptionReceived);
}
function ta(e) {
	return Un$1(e, TrackEvent.TimeSyncUpdate).pipe(A$1(([t]) => t));
}
function na(e, t = 1e3) {
	if (e === null) return dt(!1);
	const n = pt$1(e, "mousemove", { passive: !0 }).pipe(A$1(() => !0)), r = n.pipe(Mi({
		each: t,
		with: () => ze$1(dt(!1), r.pipe(Xi(n)))
	}), Ki());
	return r;
}
function Ho(e, t) {
	if (typeof localStorage > "u") {
		I$1.error("Local storage is not available.");
		return;
	}
	try {
		if (t) {
			const n = Object.fromEntries(Object.entries(t).filter(([, r]) => r !== ""));
			localStorage.setItem(e, JSON.stringify(n));
		}
	} catch (n) {
		I$1.error(`Error setting item to local storage: ${n}`);
	}
}
function zo(e) {
	if (typeof localStorage > "u") {
		I$1.error("Local storage is not available.");
		return;
	}
	try {
		const t = localStorage.getItem(e);
		if (!t) {
			I$1.warn(`Item with key ${e} does not exist in local storage.`);
			return;
		}
		return JSON.parse(t);
	} catch (t) {
		I$1.error(`Error getting item from local storage: ${t}`);
		return;
	}
}
function Yo(e) {
	return {
		load: () => zo(e),
		save: (t) => Ho(e, t)
	};
}
var qo = `${_n$1}-user-choices`, Ce$1 = {
	videoEnabled: !0,
	audioEnabled: !0,
	videoDeviceId: "default",
	audioDeviceId: "default",
	username: ""
}, { load: Ko, save: Go } = Yo(qo);
function ra(e, t = !1) {
	t !== !0 && Go(e);
}
function ia$1(e, t = !1) {
	var n, r, i, o, s;
	const a = {
		videoEnabled: (n = e == null ? void 0 : e.videoEnabled) != null ? n : Ce$1.videoEnabled,
		audioEnabled: (r = e == null ? void 0 : e.audioEnabled) != null ? r : Ce$1.audioEnabled,
		videoDeviceId: (i = e == null ? void 0 : e.videoDeviceId) != null ? i : Ce$1.videoDeviceId,
		audioDeviceId: (o = e == null ? void 0 : e.audioDeviceId) != null ? o : Ce$1.audioDeviceId,
		username: (s = e == null ? void 0 : e.username) != null ? s : Ce$1.username
	};
	if (t) return a;
	{
		const c = Ko();
		return X(X({}, a), c ?? {});
	}
}
var at$1 = null, ct$1 = null, Qo = 0;
function Qt$2() {
	return at$1 || (at$1 = /* @__PURE__ */ new Map()), at$1;
}
function Jo() {
	return ct$1 || (ct$1 = /* @__PURE__ */ new WeakMap()), ct$1;
}
function Xo(e, t) {
	const n = Jo();
	let r = n.get(e);
	return r || (r = `room_${Qo++}`, n.set(e, r)), `${r}:${t}`;
}
function oa$1(e, t) {
	const n = Xo(e, t), r = Qt$2(), i = r.get(n);
	if (i) return i;
	const o = new ie$2();
	let s = [];
	const a = "lk.segment_id", c = o.pipe(Zi({
		subscribe: () => {
			e.registerTextStreamHandler(t, (u, l) => H$1(this, null, function* () {
				var f;
				const v = be$1(u).pipe($e((m, p) => m + p, "")), d = !!((f = u.info.attributes) != null && f[a]);
				v.subscribe((m) => {
					const p = s.findIndex((g) => {
						var h, x;
						return g.streamInfo.id === u.info.id || d && ((h = g.streamInfo.attributes) == null ? void 0 : h[a]) === ((x = u.info.attributes) == null ? void 0 : x[a]);
					});
					p !== -1 ? (s[p] = le(X({}, s[p]), { text: m }), o.next([...s])) : (s.push({
						text: m,
						participantInfo: l,
						streamInfo: u.info
					}), o.next([...s]));
				});
			}));
		},
		finalize: () => {
			e.unregisterTextStreamHandler(t);
		}
	}), Ji());
	return r.set(n, c), e.on(RoomEvent.Disconnected, () => {
		Qt$2().delete(n), s = [], o.next([]);
	}), c;
}
function Wn$1(e, t) {
	if (t.msg === "show_chat") return {
		...e,
		showChat: !0,
		unreadMessages: 0
	};
	if (t.msg === "hide_chat") return {
		...e,
		showChat: !1
	};
	if (t.msg === "toggle_chat") {
		const n = {
			...e,
			showChat: !e.showChat
		};
		return n.showChat === !0 && (n.unreadMessages = 0), n;
	} else return t.msg === "unread_msg" ? {
		...e,
		unreadMessages: t.count
	} : t.msg === "toggle_settings" ? {
		...e,
		showSettings: !e.showSettings
	} : { ...e };
}
function Bn$1(e, t) {
	return t.msg === "set_pin" ? [t.trackReference] : t.msg === "clear_pin" ? [] : { ...e };
}
var jn = import_react.createContext(void 0);
function sa$1() {
	const e = import_react.useContext(jn);
	if (!e) throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");
	return e;
}
function aa(e) {
	const t = Zo();
	if (e ?? (e = t), !e) throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");
	return e;
}
function ca$1() {
	const [e, t] = import_react.useReducer(Bn$1, In$1), [n, r] = import_react.useReducer(Wn$1, Mn$1);
	return {
		pin: {
			dispatch: t,
			state: e
		},
		widget: {
			dispatch: r,
			state: n
		}
	};
}
function ua$1(e) {
	const [t, n] = import_react.useReducer(Bn$1, In$1), [r, i] = import_react.useReducer(Wn$1, Mn$1);
	return e ?? {
		pin: {
			dispatch: n,
			state: t
		},
		widget: {
			dispatch: i,
			state: r
		}
	};
}
function Zo() {
	return import_react.useContext(jn);
}
var Vn = import_react.createContext(void 0);
function la$1() {
	const e = import_react.useContext(Vn);
	if (!e) throw Error("tried to access track context outside of track context provider");
	return e;
}
function Hn$1() {
	return import_react.useContext(Vn);
}
function fa$1(e) {
	const t = Hn$1(), n = e ?? t;
	if (!n) throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");
	return n;
}
var zn = import_react.createContext(void 0);
function da$1() {
	const e = import_react.useContext(zn);
	if (!e) throw Error("tried to access participant context outside of participant context provider");
	return e;
}
function es() {
	return import_react.useContext(zn);
}
function pa$1(e) {
	const t = es(), n = Hn$1(), r = e ?? t ?? (n == null ? void 0 : n.participant);
	if (!r) throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");
	return r;
}
var Yn = import_react.createContext(void 0);
function ha$1() {
	const e = import_react.useContext(Yn);
	if (!e) throw Error("tried to access room context outside of livekit room component");
	return e;
}
function ts() {
	return import_react.useContext(Yn);
}
function va$1(e) {
	const t = ts(), n = e ?? t;
	if (!n) throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");
	return n;
}
var qn$1 = import_react.createContext(void 0);
function ma$1() {
	const e = import_react.useContext(qn$1);
	if (!e) throw Error("tried to access session context outside of SessionProvider component");
	return e;
}
function ns() {
	return import_react.useContext(qn$1);
}
function ga$1(e) {
	const t = ns(), n = e ?? t;
	if (!n) throw new Error("No session provided, make sure you are inside a Session context or pass the session explicitly");
	return n;
}
var rs = import_react.createContext(void 0);
function ba$1(e) {
	const t = import_react.useContext(rs);
	if (e === !0) {
		if (t) return t;
		throw Error("tried to access feature context, but none is present");
	}
	return t;
}

//#endregion
//#region node_modules/@livekit/components-react/dist/room-BP3SCCCd.mjs
function L(n) {
	var e, o, t = "";
	if (typeof n == "string" || typeof n == "number") t += n;
	else if (typeof n == "object") if (Array.isArray(n)) {
		var r = n.length;
		for (e = 0; e < r; e++) n[e] && (o = L(n[e])) && (t && (t += " "), t += o);
	} else for (o in n) n[o] && (t && (t += " "), t += o);
	return t;
}
function A() {
	for (var n, e, o = 0, t = "", r = arguments.length; o < r; o++) (n = arguments[o]) && (e = L(n)) && (t && (t += " "), t += e);
	return t;
}
function I(...n) {
	return (...e) => {
		for (const o of n) if (typeof o == "function") try {
			o(...e);
		} catch (t) {
			console.error(t);
		}
	};
}
function M(...n) {
	const e = { ...n[0] };
	for (let o = 1; o < n.length; o++) {
		const t = n[o];
		for (const r in t) {
			const d = e[r], a = t[r];
			typeof d == "function" && typeof a == "function" && r[0] === "o" && r[1] === "n" && r.charCodeAt(2) >= 65 && r.charCodeAt(2) <= 90 ? e[r] = I(d, a) : (r === "className" || r === "UNSAFE_className") && typeof d == "string" && typeof a == "string" ? e[r] = A(d, a) : e[r] = a !== void 0 ? a : d;
		}
	}
	return e;
}
function J(n) {
	return n !== void 0;
}
function G(...n) {
	return M(...n.filter(J));
}
function H(n, e, o) {
	return import_react.Children.map(n, (t) => import_react.isValidElement(t) && import_react.Children.only(n) ? (t.props.className && (e ?? (e = {}), e.className = A(t.props.className, e.className), e.style = {
		...t.props.style,
		...e.style
	}), import_react.cloneElement(t, {
		...e,
		key: o
	})) : t);
}
function Q(n) {
	var e, o;
	if (typeof window < "u" && typeof process < "u" && (((e = process == null ? void 0 : process.env) == null ? void 0 : e.NODE_ENV) === "dev" || ((o = process == null ? void 0 : process.env) == null ? void 0 : o.NODE_ENV) === "development")) {
		const t = document.querySelector(".lk-room-container");
		t && !getComputedStyle(t).getPropertyValue("--lk-has-imported-styles") && I$1.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.");
	}
}
function T(n, e) {
	return n === "processor" && e && typeof e == "object" && "name" in e ? e.name : n === "e2ee" && e ? "e2ee-enabled" : e;
}
var q = {
	connect: !0,
	audio: !1,
	video: !1
};
function $(n) {
	const { token: e, serverUrl: o, options: t, room: r, connectOptions: d, connect: a, audio: p, video: y, screen: g, onConnected: v, onDisconnected: h, onError: c, onMediaDeviceFailure: b, onEncryptionError: E, simulateParticipants: w, ...N } = {
		...q,
		...n
	};
	t && r && I$1.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");
	const [s, O] = import_react.useState(), C = import_react.useRef(a);
	import_react.useEffect(() => {
		O(r ?? new Room(t));
	}, [r, JSON.stringify(t, T)]);
	const F = import_react.useMemo(() => {
		const { className: m } = Js();
		return M(N, { className: m });
	}, [N]);
	return import_react.useEffect(() => {
		if (!s) return;
		const m = () => {
			const f = s.localParticipant;
			I$1.debug("trying to publish local tracks"), Promise.all([
				f.setMicrophoneEnabled(!!p, typeof p != "boolean" ? p : void 0),
				f.setCameraEnabled(!!y, typeof y != "boolean" ? y : void 0),
				f.setScreenShareEnabled(!!g, typeof g != "boolean" ? g : void 0)
			]).catch((R) => {
				I$1.warn(R), c?.(R);
			});
		}, P = (f, R) => {
			const K = MediaDeviceFailure.getFailure(f);
			b?.(K, R);
		}, S = (f) => {
			E?.(f);
		}, k = (f) => {
			h?.(f);
		}, D = () => {
			v?.();
		};
		return s.on(RoomEvent.SignalConnected, m).on(RoomEvent.MediaDevicesError, P).on(RoomEvent.EncryptionError, S).on(RoomEvent.Disconnected, k).on(RoomEvent.Connected, D), () => {
			s.off(RoomEvent.SignalConnected, m).off(RoomEvent.MediaDevicesError, P).off(RoomEvent.EncryptionError, S).off(RoomEvent.Disconnected, k).off(RoomEvent.Connected, D);
		};
	}, [
		s,
		p,
		y,
		g,
		c,
		E,
		b,
		v,
		h
	]), import_react.useEffect(() => {
		if (s) {
			if (w) {
				s.simulateParticipants({
					participants: { count: w },
					publish: {
						audio: !0,
						useRealTracks: !0
					}
				});
				return;
			}
			if (a) {
				if (C.current = !0, I$1.debug("connecting"), !e) {
					I$1.debug("no token yet");
					return;
				}
				if (!o) {
					I$1.warn("no livekit url provided"), c?.(Error("no livekit url provided"));
					return;
				}
				s.connect(o, e, d).catch((m) => {
					I$1.warn(m), C.current === !0 && c?.(m);
				});
			} else I$1.debug("disconnecting because connect is false"), C.current = !1, s.disconnect();
		}
	}, [
		a,
		e,
		JSON.stringify(d),
		s,
		c,
		o,
		w
	]), import_react.useEffect(() => {
		if (s) return () => {
			I$1.info("disconnecting on onmount"), s.disconnect();
		};
	}, [s]), {
		room: s,
		htmlProps: F
	};
}
var W = /* @__PURE__ */ import_react.forwardRef(function(e, o) {
	const { room: t, htmlProps: r } = $(e);
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: o,
		...r
	}, t && /* @__PURE__ */ import_react.createElement(Yn.Provider, { value: t }, /* @__PURE__ */ import_react.createElement(rs.Provider, { value: e.featureFlags }, e.children)));
});

//#endregion
//#region node_modules/@livekit/components-react/dist/hooks-hQJmeINB.mjs
var jt$1 = (e) => {
	const n = import_react.useRef(e);
	return import_react.useEffect(() => {
		n.current = e;
	}), n;
};
function Wt$1(e, n) {
	const t = Gt$1(), r = jt$1(n);
	return import_react.useLayoutEffect(() => {
		let o = !1;
		const i = e.current;
		if (!i) return;
		function a(c, u) {
			o || r.current(c, u);
		}
		return t?.subscribe(i, a), () => {
			o = !0, t?.unsubscribe(i, a);
		};
	}, [
		e.current,
		t,
		r
	]), t == null ? void 0 : t.observer;
}
function zt() {
	let e = !1, n = [];
	const t = /* @__PURE__ */ new Map();
	if (typeof window > "u") return;
	const r = new ResizeObserver((o, i) => {
		n = n.concat(o), e || window.requestAnimationFrame(() => {
			const a = /* @__PURE__ */ new Set();
			for (let c = 0; c < n.length; c++) {
				if (a.has(n[c].target)) continue;
				a.add(n[c].target);
				t.get(n[c].target)?.forEach((p) => p(n[c], i));
			}
			n = [], e = !1;
		}), e = !0;
	});
	return {
		observer: r,
		subscribe(o, i) {
			r.observe(o);
			const a = t.get(o) ?? [];
			a.push(i), t.set(o, a);
		},
		unsubscribe(o, i) {
			const a = t.get(o) ?? [];
			if (a.length === 1) {
				r.unobserve(o), t.delete(o);
				return;
			}
			const c = a.indexOf(i);
			c !== -1 && a.splice(c, 1), t.set(o, a);
		}
	};
}
var de$1;
var Gt$1 = () => de$1 || (de$1 = zt()), Jt$1 = (e) => {
	const [n, t] = import_react.useState({
		width: 0,
		height: 0
	});
	import_react.useLayoutEffect(() => {
		if (e.current) {
			const { width: o, height: i } = e.current.getBoundingClientRect();
			t({
				width: o,
				height: i
			});
		}
	}, [e.current]);
	return Wt$1(e, import_react.useCallback((o) => t(o.contentRect), [])), n;
};
function O$1(e, n, t = !0) {
	const [r, o] = import_react.useState(n);
	return import_react.useEffect(() => {
		if (t && o(n), typeof window > "u" || !e) return;
		const i = e.subscribe(o);
		return () => i.unsubscribe();
	}, [e, t]), r;
}
function Dn(e) {
	const n = (i) => typeof window < "u" ? window.matchMedia(i).matches : !1, [t, r] = import_react.useState(n(e));
	function o() {
		r(n(e));
	}
	return import_react.useEffect(() => {
		const i = window.matchMedia(e);
		return o(), i.addListener ? i.addListener(o) : i.addEventListener("change", o), () => {
			i.removeListener ? i.removeListener(o) : i.removeEventListener("change", o);
		};
	}, [e]), t;
}
function In(e) {
	const n = va$1(e), t = import_react.useCallback(async () => {
		await n.startAudio();
	}, [n]), { canPlayAudio: o } = O$1(import_react.useMemo(() => Lo(n), [n]), { canPlayAudio: n.canPlaybackAudio });
	return {
		canPlayAudio: o,
		startAudio: t
	};
}
function Nn(e) {
	const { state: n, dispatch: t } = sa$1().pin;
	return { buttonProps: import_react.useMemo(() => {
		const { className: o } = Qs();
		return M(e, {
			className: o,
			disabled: !(n != null && n.length),
			onClick: () => {
				t && t({ msg: "clear_pin" });
			}
		});
	}, [
		e,
		t,
		n
	]) };
}
function _n(e = {}) {
	const n = pa$1(e.participant), { className: t, connectionQualityObserver: r } = import_react.useMemo(() => Bs(n), [n]);
	return {
		className: t,
		quality: O$1(r, n.connectionQuality)
	};
}
function re(e) {
	const n = va$1(e);
	return O$1(import_react.useMemo(() => Cs(n), [n]), n.state);
}
function Fn(e, n) {
	const t = typeof e == "function" ? e : n, r = typeof e == "string" ? e : void 0, o = ha$1(), { send: i, messageObservable: a, isSendingObservable: c } = import_react.useMemo(() => Uo(o, r, t), [
		o,
		r,
		t
	]);
	return {
		message: O$1(a, void 0),
		send: i,
		isSending: O$1(c, !1)
	};
}
function xn(e) {
	const n = ha$1(), t = re(n);
	return { buttonProps: import_react.useMemo(() => {
		const { className: o, disconnect: i } = Ws(n);
		return M(e, {
			className: o,
			onClick: () => i(e.stopTracks ?? !0),
			disabled: t === ConnectionState.Disconnected
		});
	}, [
		n,
		e,
		t
	]) };
}
function $t(e) {
	if (e.publication instanceof LocalTrackPublication) {
		const n = e.publication.track;
		if (n) {
			const { facingMode: t } = facingModeFromLocalTrack(n);
			return t;
		}
	}
	return "undefined";
}
function Un({ trackRef: e, props: n }) {
	const t = fa$1(e), r = Zo(), { className: o } = import_react.useMemo(() => Gs(), []), i = import_react.useMemo(() => as(t, r == null ? void 0 : r.pin.state), [t, r == null ? void 0 : r.pin.state]);
	return {
		mergedProps: import_react.useMemo(() => M(n, {
			className: o,
			onClick: (c) => {
				var u, p, h, l, d;
				(u = n.onClick) == null || u.call(n, c), i ? (h = r == null ? void 0 : (p = r.pin).dispatch) == null || h.call(p, { msg: "clear_pin" }) : (d = r == null ? void 0 : (l = r.pin).dispatch) == null || d.call(l, {
					msg: "set_pin",
					trackReference: t
				});
			}
		}), [
			n,
			o,
			t,
			i,
			r == null ? void 0 : r.pin
		]),
		inFocus: i
	};
}
function Hn(e, n, t = {}) {
	const r = t.gridLayouts ?? ms, { width: o, height: i } = Jt$1(e), a = vo(r, n, o, i);
	return import_react.useEffect(() => {
		e.current && a && (e.current.style.setProperty("--lk-col-count", a == null ? void 0 : a.columns.toString()), e.current.style.setProperty("--lk-row-count", a == null ? void 0 : a.rows.toString()));
	}, [e, a]), {
		layout: a,
		containerWidth: o,
		containerHeight: i
	};
}
function Ee(e, n = {}) {
	var c, u;
	const r = pa$1(typeof e == "string" ? n.participant : e.participant), o = typeof e == "string" ? {
		participant: r,
		source: e
	} : e, [i, a] = import_react.useState(!!((c = o.publication) != null && c.isMuted || (u = r.getTrackPublication(o.source)) != null && u.isMuted));
	return import_react.useEffect(() => {
		const p = Fo(o).subscribe(a);
		return () => p.unsubscribe();
	}, [V$1(o)]), i;
}
function Qt(e) {
	const n = pa$1(e);
	return O$1(import_react.useMemo(() => Ls(n), [n]), n.isSpeaking);
}
function xe(e = {}) {
	const n = va$1(e.room), [t, r] = import_react.useState(n.localParticipant), [o, i] = import_react.useState(t.isMicrophoneEnabled), [a, c] = import_react.useState(t.isCameraEnabled), [u, p] = import_react.useState(t.isScreenShareEnabled), [h, l] = import_react.useState(t.lastMicrophoneError), [d, v] = import_react.useState(t.lastCameraError), [M, w] = import_react.useState(void 0), [A, P] = import_react.useState(void 0), D = (R) => {
		c(R.isCameraEnabled), i(R.isMicrophoneEnabled), p(R.isScreenShareEnabled), P(R.cameraTrack), w(R.microphoneTrack), l(R.participant.lastMicrophoneError), v(R.participant.lastCameraError), r(R.participant);
	};
	return import_react.useEffect(() => {
		const R = Nn$1(n.localParticipant).subscribe(D);
		return () => R.unsubscribe();
	}, [n]), {
		isMicrophoneEnabled: o,
		isScreenShareEnabled: u,
		isCameraEnabled: a,
		microphoneTrack: M,
		cameraTrack: A,
		lastMicrophoneError: h,
		lastCameraError: d,
		localParticipant: t
	};
}
function Bn() {
	const e = ha$1();
	return O$1(import_react.useMemo(() => Rs(e.localParticipant), [e]), e.localParticipant.permissions);
}
function Vn$1({ kind: e, room: n, track: t, requestPermissions: r, onError: o }) {
	const i = ts(), a = import_react.useMemo(() => n ?? i ?? new Room(), [n, i]), u = O$1(import_react.useMemo(() => As(e, o, r), [
		e,
		r,
		o
	]), []), [p, h] = import_react.useState((a == null ? void 0 : a.getActiveDevice(e)) ?? "default"), { className: l, activeDeviceObservable: d, setActiveMediaDevice: v } = import_react.useMemo(() => Us(e, a), [
		e,
		a,
		t
	]);
	return import_react.useEffect(() => {
		const M = d.subscribe((w) => {
			w && (I$1.info("setCurrentDeviceId", w), h(w));
		});
		return () => {
			M?.unsubscribe();
		};
	}, [d]), {
		devices: u,
		className: l,
		activeDeviceId: p,
		setActiveMediaDevice: v
	};
}
function qn({ kind: e, onError: n }) {
	return O$1(import_react.useMemo(() => As(e, n), [e, n]), []);
}
function Kt$1(e, n, t = {}) {
	const r = import_react.useRef([]), o = import_react.useRef(-1), i = n !== o.current, a = typeof t.customSortFunction == "function" ? t.customSortFunction(e) : xs(e);
	let c = [...a];
	if (i === !1) try {
		c = Ts(r.current, a, n);
	} catch (u) {
		I$1.error("Error while running updatePages(): ", u);
	}
	return i ? r.current = a : r.current = c, o.current = n, c;
}
function jn$1(e, n) {
	const [t, r] = import_react.useState(1), o = Math.max(Math.ceil(n.length / e), 1);
	t > o && r(o);
	const i = t * e, a = i - e, c = (l) => {
		r((d) => l === "next" ? d === o ? d : d + 1 : d === 1 ? d : d - 1);
	}, u = (l) => {
		l > o ? r(o) : l < 1 ? r(1) : r(l);
	};
	return {
		totalPageCount: o,
		nextPage: () => c("next"),
		prevPage: () => c("previous"),
		setPage: u,
		firstItemIndex: a,
		lastItemIndex: i,
		tracks: Kt$1(n, e).slice(a, i),
		currentPage: t
	};
}
function Yt(e = {}) {
	let n = es();
	e.participant && (n = e.participant);
	const { identity: r, name: o, metadata: i } = O$1(import_react.useMemo(() => Ro(n), [n]), {
		name: n == null ? void 0 : n.name,
		identity: n == null ? void 0 : n.identity,
		metadata: n == null ? void 0 : n.metadata
	});
	return {
		identity: r,
		name: o,
		metadata: i
	};
}
function Wn(e = {}) {
	const n = pa$1(e.participant);
	return O$1(import_react.useMemo(() => Rs(n), [n]), n.permissions);
}
function zn$1({ trackRef: e, onParticipantClick: n, disableSpeakingIndicator: t, htmlProps: r }) {
	const o = fa$1(e), i = import_react.useMemo(() => {
		const { className: d } = Hs();
		return M(r, {
			className: d,
			onClick: (v) => {
				var M;
				if ((M = r.onClick) == null || M.call(r, v), typeof n == "function") {
					const w = o.publication ?? o.participant.getTrackPublication(o.source);
					n({
						participant: o.participant,
						track: w
					});
				}
			}
		});
	}, [
		r,
		n,
		o.publication,
		o.source,
		o.participant
	]), a = o.participant.getTrackPublication(Track.Source.Microphone), c = import_react.useMemo(() => ({
		participant: o.participant,
		source: Track.Source.Microphone,
		publication: a
	}), [a, o.participant]), u = Ee(o), p = Ee(c), h = Qt(o.participant), l = $t(o);
	return { elementProps: {
		"data-lk-audio-muted": p,
		"data-lk-video-muted": u,
		"data-lk-speaking": t === !0 ? !1 : h,
		"data-lk-local-participant": o.participant.isLocal,
		"data-lk-source": o.source,
		"data-lk-facing-mode": l,
		...i
	} };
}
function ve(e = {}) {
	const n = va$1(e.room), [t, r] = import_react.useState([]);
	return import_react.useEffect(() => {
		const o = Is(n, { additionalRoomEvents: e.updateOnlyOn }).subscribe(r);
		return () => o.unsubscribe();
	}, [n, JSON.stringify(e.updateOnlyOn)]), t;
}
function Xt(e = {}) {
	const n = ve(e), { localParticipant: t } = xe(e);
	return import_react.useMemo(() => [t, ...n], [t, n]);
}
function Gn(e) {
	return e = aa(e), import_react.useMemo(() => (e == null ? void 0 : e.pin.state) !== void 0 && e.pin.state.length >= 1 ? e.pin.state : [], [e.pin.state]);
}
function Jn(e, n = {}) {
	const t = ha$1(), [r] = import_react.useState(n.updateOnlyOn), o = import_react.useMemo(() => typeof e == "string" ? Ms(t, e, { additionalEvents: r }) : Ds(t, e, { additionalEvents: r }), [
		t,
		JSON.stringify(e),
		r
	]), [i, a] = import_react.useState({ p: void 0 });
	return import_react.useEffect(() => {
		const c = o.subscribe((u) => a({ p: u }));
		return () => c.unsubscribe();
	}, [o]), i.p;
}
function $n(e = {}) {
	const n = va$1(e.room), { name: r, metadata: o } = O$1(import_react.useMemo(() => Ps(n), [n]), {
		name: n.name,
		metadata: n.metadata
	});
	return {
		name: r,
		metadata: o
	};
}
function Zt(e) {
	const n = va$1(e == null ? void 0 : e.room);
	return O$1(import_react.useMemo(() => Os(n), [n]), n.activeSpeakers);
}
function Qn(e) {
	const [n, t] = import_react.useState(Ss(e)), r = Zt();
	return import_react.useEffect(() => {
		t(Ss(e));
	}, [r, e]), n;
}
function Kn({ room: e, props: n }) {
	const t = va$1(e), { className: r, roomAudioPlaybackAllowedObservable: o, handleStartAudioPlayback: i } = import_react.useMemo(() => Ys(), []), { canPlayAudio: c } = O$1(import_react.useMemo(() => o(t), [t, o]), { canPlayAudio: t.canPlaybackAudio });
	return {
		mergedProps: import_react.useMemo(() => M(n, {
			className: r,
			onClick: () => {
				i(t);
			},
			style: { display: c ? "none" : "block" }
		}), [
			n,
			r,
			c,
			i,
			t
		]),
		canPlayAudio: c
	};
}
function Yn$1({ room: e, props: n }) {
	const t = va$1(e), { className: r, roomVideoPlaybackAllowedObservable: o, handleStartVideoPlayback: i } = import_react.useMemo(() => qs(), []), { canPlayVideo: c } = O$1(import_react.useMemo(() => o(t), [t, o]), { canPlayVideo: t.canPlaybackVideo });
	return {
		mergedProps: import_react.useMemo(() => M(n, {
			className: r,
			onClick: () => {
				i(t);
			},
			style: { display: c ? "none" : "block" }
		}), [
			n,
			r,
			c,
			i,
			t
		]),
		canPlayVideo: c
	};
}
function Xn(e, n = {}) {
	const t = import_react.useRef(null), r = import_react.useRef(null), o = n.minSwipeDistance ?? 50, i = (u) => {
		r.current = null, t.current = u.targetTouches[0].clientX;
	}, a = (u) => {
		r.current = u.targetTouches[0].clientX;
	}, c = import_react.useCallback(() => {
		if (!t.current || !r.current) return;
		const u = t.current - r.current, p = u > o, h = u < -o;
		p && n.onLeftSwipe && n.onLeftSwipe(), h && n.onRightSwipe && n.onRightSwipe();
	}, [o, n]);
	import_react.useEffect(() => {
		const u = e.current;
		return u && (u.addEventListener("touchstart", i, { passive: !0 }), u.addEventListener("touchmove", a, { passive: !0 }), u.addEventListener("touchend", c, { passive: !0 })), () => {
			u && (u.removeEventListener("touchstart", i), u.removeEventListener("touchmove", a), u.removeEventListener("touchend", c));
		};
	}, [e, c]);
}
function Zn({ props: e }) {
	const { dispatch: n, state: t } = sa$1().widget, { className: r } = import_react.useMemo(() => Ks(), []);
	return { mergedProps: import_react.useMemo(() => M(e, {
		className: r,
		onClick: () => {
			n && n({ msg: "toggle_chat" });
		},
		"aria-pressed": t != null && t.showChat ? "true" : "false",
		"data-lk-unread-msgs": t ? t.unreadMessages < 10 ? t.unreadMessages.toFixed(0) : "9+" : "0"
	}), [
		e,
		r,
		n,
		t
	]) };
}
function er(e, n, t = {}) {
	const [r, o] = import_react.useState(void 0);
	return import_react.useEffect(() => {
		var a;
		if (e === void 0) throw Error("token endpoint needs to be defined");
		if (((a = t.userInfo) == null ? void 0 : a.identity) === void 0) return;
		(async () => {
			I$1.debug("fetching token");
			const c = new URLSearchParams({
				...t.userInfo,
				roomName: n
			}), u = await fetch(`${e}?${c.toString()}`);
			if (!u.ok) {
				I$1.error(`Could not fetch token. Server responded with status ${u.status}: ${u.statusText}`);
				return;
			}
			const { accessToken: p } = await u.json();
			o(p);
		})();
	}, [
		e,
		n,
		JSON.stringify(t)
	]), r;
}
function tr(e) {
	var i, a;
	const n = fa$1(e), { className: t, mediaMutedObserver: r } = import_react.useMemo(() => js(n), [V$1(n)]);
	return {
		isMuted: O$1(r, !!((i = n.publication) != null && i.isMuted || (a = n.participant.getTrackPublication(n.source)) != null && a.isMuted)),
		className: t
	};
}
function nr({ source: e, onChange: n, initialState: t, captureOptions: r, publishOptions: o, onDeviceError: i, room: a, ...c }) {
	var m;
	const u = ts(), p = import_react.useMemo(() => a ?? u, [a, u]), h = (m = p == null ? void 0 : p.localParticipant) == null ? void 0 : m.getTrackPublication(e), l = import_react.useRef(!1), { toggle: d, className: v, pendingObserver: M$1, enabledObserver: w } = import_react.useMemo(() => p ? Ns(e, p, r, o, i) : $s(), [
		p,
		e,
		JSON.stringify(r),
		o
	]), A = O$1(M$1, !1), P = O$1(w, t ?? !!(h != null && h.isEnabled));
	import_react.useEffect(() => {
		n?.(P, l.current), l.current = !1;
	}, [P, n]), import_react.useEffect(() => {
		t !== void 0 && (I$1.debug("forcing initial toggle state", e, t), d(t));
	}, []);
	const D = import_react.useMemo(() => M(c, { className: v }), [c, v]), R = import_react.useCallback((f) => {
		var b;
		l.current = !0, d().catch(() => l.current = !1), (b = c.onClick) == null || b.call(c, f);
	}, [c, d]);
	return {
		toggle: d,
		enabled: P,
		pending: A,
		track: h,
		buttonProps: {
			...D,
			"aria-pressed": P,
			"data-lk-source": e,
			"data-lk-enabled": P,
			disabled: A,
			onClick: R
		}
	};
}
function rr(e = [
	Track.Source.Camera,
	Track.Source.Microphone,
	Track.Source.ScreenShare,
	Track.Source.ScreenShareAudio,
	Track.Source.Unknown
], n = {}) {
	const t = va$1(n.room), [r, o] = import_react.useState([]), [i, a] = import_react.useState([]), c = import_react.useMemo(() => e.map((p) => bo(p) ? p.source : p), [JSON.stringify(e)]);
	return import_react.useEffect(() => {
		const p = Xs(t, c, {
			additionalRoomEvents: n.updateOnlyOn,
			onlySubscribed: n.onlySubscribed
		}).subscribe(({ trackReferences: h, participants: l }) => {
			I$1.debug("setting track bundles", h, l), o(h), a(l);
		});
		return () => p.unsubscribe();
	}, [
		t,
		JSON.stringify(n.onlySubscribed),
		JSON.stringify(n.updateOnlyOn),
		JSON.stringify(e)
	]), import_react.useMemo(() => {
		if (ws(e)) {
			const p = tn(e, i), h = Array.from(r);
			return i.forEach((l) => {
				p.has(l.identity) && (p.get(l.identity) ?? []).forEach((v) => {
					if (r.find(({ participant: w, publication: A }) => l.identity === w.identity && A.source === v)) return;
					I$1.debug(`Add ${v} placeholder for participant ${l.identity}.`);
					const M = {
						participant: l,
						source: v
					};
					h.push(M);
				});
			}), h;
		} else return r;
	}, [
		r,
		i,
		e
	]);
}
function en(e, n) {
	const t = new Set(e);
	for (const r of n) t.delete(r);
	return t;
}
function tn(e, n) {
	const t = /* @__PURE__ */ new Map();
	if (ws(e)) {
		const r = e.filter((o) => o.withPlaceholder).map((o) => o.source);
		n.forEach((o) => {
			const i = o.getTrackPublications().map((c) => {
				var u;
				return (u = c.track) == null ? void 0 : u.source;
			}).filter((c) => c !== void 0), a = Array.from(en(new Set(r), new Set(i)));
			a.length > 0 && t.set(o.identity, a);
		});
	}
	return t;
}
function nn(e) {
	const [n, t] = import_react.useState(qt$1(e)), { trackObserver: r } = import_react.useMemo(() => Es(e), [e.participant.sid ?? e.participant.identity, e.source]);
	return import_react.useEffect(() => {
		const o = r.subscribe((i) => {
			t(i);
		});
		return () => o == null ? void 0 : o.unsubscribe();
	}, [r]), {
		participant: e.participant,
		source: e.source ?? Track.Source.Unknown,
		publication: n
	};
}
function sr(e, n) {
	return nn({
		name: e,
		participant: pa$1(n)
	});
}
function rn(e) {
	const n = va$1(e == null ? void 0 : e.room), t = re(n), r = import_react.useMemo(() => t === ConnectionState.Disconnected, [t]), o = import_react.useMemo(() => zs(n, e), [
		n,
		e,
		r
	]), i = O$1(o.isSendingObservable, !1), a = O$1(o.messageObservable, []);
	return {
		send: o.send,
		chatMessages: a,
		isSending: i
	};
}
function or(e = {}) {
	const [n, t] = import_react.useState(ia$1(e.defaults, e.preventLoad ?? !1)), r = import_react.useCallback((u) => {
		t((p) => ({
			...p,
			audioEnabled: u
		}));
	}, []), o = import_react.useCallback((u) => {
		t((p) => ({
			...p,
			videoEnabled: u
		}));
	}, []), i = import_react.useCallback((u) => {
		t((p) => ({
			...p,
			audioDeviceId: u
		}));
	}, []), a = import_react.useCallback((u) => {
		t((p) => ({
			...p,
			videoDeviceId: u
		}));
	}, []), c = import_react.useCallback((u) => {
		t((p) => ({
			...p,
			username: u
		}));
	}, []);
	return import_react.useEffect(() => {
		ra(n, e.preventSave ?? !1);
	}, [n, e.preventSave]), {
		userChoices: n,
		saveAudioInputEnabled: r,
		saveVideoInputEnabled: o,
		saveAudioInputDeviceId: i,
		saveVideoInputDeviceId: a,
		saveUsername: c
	};
}
function ar(e, n = {}) {
	const t = pa$1(e), r = va$1(n.room);
	return O$1(import_react.useMemo(() => _s(r, t), [r, t]), t.isLocal ? t.isE2EEEnabled : !!(t != null && t.isEncrypted));
}
function ir(e, n = {
	fftSize: 32,
	smoothingTimeConstant: 0
}) {
	const t = K$1(e) ? e.publication.track : e, [r, o] = import_react.useState(0);
	return import_react.useEffect(() => {
		if (!t || !t.mediaStream) return;
		const { cleanup: i, analyser: a } = createAudioAnalyser(t, n), c = a.frequencyBinCount, u = new Uint8Array(c), h = setInterval(() => {
			a.getByteFrequencyData(u);
			let l = 0;
			for (let d = 0; d < u.length; d++) {
				const v = u[d];
				l += v * v;
			}
			o(Math.sqrt(l / u.length) / 255);
		}, 1e3 / 30);
		return () => {
			i(), clearInterval(h);
		};
	}, [
		t,
		t == null ? void 0 : t.mediaStream,
		JSON.stringify(n)
	]), r;
}
var sn = (e) => {
	const n = (t) => {
		let i = 1 - Math.max(-100, Math.min(-10, t)) * -1 / 100;
		return i = Math.sqrt(i), i;
	};
	return e.map((t) => t === -Infinity ? 0 : n(t));
}, on = {
	bands: 5,
	loPass: 100,
	hiPass: 600,
	updateInterval: 32,
	analyserOptions: { fftSize: 2048 }
};
function cr(e, n = {}) {
	var a;
	const t = e instanceof Track ? e : (a = e == null ? void 0 : e.publication) == null ? void 0 : a.track, r = {
		...on,
		...n
	}, [o, i] = import_react.useState(new Array(r.bands).fill(0));
	return import_react.useEffect(() => {
		if (!t || !(t != null && t.mediaStream)) {
			i((v) => v.slice().fill(0));
			return;
		}
		const { analyser: c, cleanup: u } = createAudioAnalyser(t, r.analyserOptions), p = c.frequencyBinCount, h = new Float32Array(p), d = setInterval(() => {
			c.getFloatFrequencyData(h);
			let v = new Float32Array(h.length);
			for (let P = 0; P < h.length; P++) v[P] = h[P];
			v = v.slice(r.loPass, r.hiPass);
			const M = sn(v), w = M.length, A = [];
			for (let P = 0; P < r.bands; P++) {
				const D = Math.floor(P * w / r.bands), R = Math.floor((P + 1) * w / r.bands), m = M.slice(D, R), f = m.length;
				if (f === 0) A.push(0);
				else {
					const b = m.reduce((g, y) => g += y, 0);
					A.push(b / f);
				}
			}
			i(A);
		}, r.updateInterval);
		return () => {
			u(), clearInterval(d);
		};
	}, [
		t,
		t == null ? void 0 : t.mediaStream,
		JSON.stringify(n)
	]), o;
}
var an = {
	barCount: 120,
	volMultiplier: 5,
	updateInterval: 20
};
function ur(e, n = {}) {
	var h;
	const t = e instanceof Track ? e : (h = e == null ? void 0 : e.publication) == null ? void 0 : h.track, r = {
		...an,
		...n
	}, o = import_react.useRef(new Float32Array()), i = import_react.useRef(performance.now()), a = import_react.useRef(0), [c, u] = import_react.useState([]), p = import_react.useCallback((l) => {
		u(Array.from(un(l, r.barCount).map((d) => Math.sqrt(d) * r.volMultiplier)));
	}, []);
	return import_react.useEffect(() => {
		if (!t || !(t != null && t.mediaStream)) return;
		const { analyser: l, cleanup: d } = createAudioAnalyser(t, { fftSize: ke(r.barCount) }), v = ke(r.barCount), M = new Float32Array(v), w = () => {
			if (A = requestAnimationFrame(w), l.getFloatTimeDomainData(M), o.current.map((P, D) => P + M[D]), a.current += 1, performance.now() - i.current >= r.updateInterval) p(M.map((D) => D / a.current)), i.current = performance.now(), a.current = 0;
		};
		let A = requestAnimationFrame(w);
		return () => {
			d(), cancelAnimationFrame(A);
		};
	}, [
		t,
		t == null ? void 0 : t.mediaStream,
		JSON.stringify(n),
		p
	]), { bars: c };
}
function ke(e) {
	return e < 32 ? 32 : cn(e);
}
function cn(e) {
	let n = 2;
	for (; e >>= 1;) n <<= 1;
	return n;
}
function un(e, n) {
	const t = Math.floor(e.length / n), r = new Float32Array(n);
	for (let o = 0; o < n; o++) {
		const i = t * o;
		let a = 0;
		for (let c = 0; c < t; c++) a = a + Math.abs(e[i + c]);
		r[o] = a / t;
	}
	return r;
}
function ie$1(e, n = {}) {
	let t, r;
	typeof n == "string" ? t = n : (t = n == null ? void 0 : n.participantIdentity, r = n == null ? void 0 : n.room);
	const o = es(), i = Xt({
		room: r,
		updateOnlyOn: []
	}), a = import_react.useMemo(() => t ? i.find((p) => p.identity === t) : o, [
		t,
		i,
		o
	]);
	return O$1(import_react.useMemo(() => {
		if (a) return Zs(a, { sources: e });
	}, [a, JSON.stringify(e)]), []);
}
function dn(e) {
	var t, r, o;
	return O$1(import_react.useMemo(() => {
		var i;
		return (i = e == null ? void 0 : e.publication) != null && i.track ? ta(e == null ? void 0 : e.publication.track) : void 0;
	}, [(t = e == null ? void 0 : e.publication) == null ? void 0 : t.track]), {
		timestamp: Date.now(),
		rtpTimestamp: (o = (r = e == null ? void 0 : e.publication) == null ? void 0 : r.track) == null ? void 0 : o.rtpTimestamp
	});
}
var ln = { bufferSize: 100 };
function fn(e, n) {
	const t = {
		...ln,
		...n
	}, [r, o] = import_react.useState([]), i = dn(e), a = (c) => {
		var u;
		(u = t.onTranscription) == null || u.call(t, c), o((p) => ys(p, c.map((h) => bs(h, i)), t.bufferSize));
	};
	return import_react.useEffect(() => {
		if (!(e != null && e.publication)) return;
		const c = ea(e.publication).subscribe((u) => {
			a(...u);
		});
		return () => {
			c.unsubscribe();
		};
	}, [e && V$1(e), a]), { segments: r };
}
function mn(e = {}) {
	const n = es(), t = e.participant ?? n;
	return O$1(import_react.useMemo(() => t ? Fs(t) : Fs(t), [t]), { attributes: t == null ? void 0 : t.attributes });
}
function dr(e, n = {}) {
	const t = pa$1(n.participant), [r, o] = import_react.useState(t.attributes[e]);
	return import_react.useEffect(() => {
		if (!t) return;
		const i = Fs(t).subscribe((a) => {
			a.changed[e] !== void 0 && o(a.attributes[e]);
		});
		return () => {
			i.unsubscribe();
		};
	}, [t, e]), r;
}
var we = go.AgentState;
function lr() {
	const e = ve(), n = e.find((l) => l.kind === ParticipantInfo_Kind.AGENT && !(go.PublishOnBehalf in l.attributes)), t = e.find((l) => l.kind === ParticipantInfo_Kind.AGENT && l.attributes[go.PublishOnBehalf] === (n == null ? void 0 : n.identity)), r = ie$1([Track.Source.Microphone, Track.Source.Camera], n == null ? void 0 : n.identity), o = ie$1([Track.Source.Microphone, Track.Source.Camera], t == null ? void 0 : t.identity), i = r.find((l) => l.source === Track.Source.Microphone) ?? o.find((l) => l.source === Track.Source.Microphone), a = r.find((l) => l.source === Track.Source.Camera) ?? o.find((l) => l.source === Track.Source.Camera), { segments: c } = fn(i), u = re(), { attributes: p } = mn({ participant: n });
	return {
		agent: n,
		state: import_react.useMemo(() => u === ConnectionState.Disconnected ? "disconnected" : u === ConnectionState.Connecting || !n || !(p != null && p[we]) ? "connecting" : p[we], [
			p,
			n,
			u
		]),
		audioTrack: i,
		videoTrack: a,
		agentTranscriptions: c,
		agentAttributes: p
	};
}
function fr(e) {
	const n = va$1(e), t = re(n);
	return O$1(import_react.useMemo(() => ks(n), [n, t]), n.isRecording);
}
function pn(e, n) {
	const t = va$1(n == null ? void 0 : n.room), o = re(t) === ConnectionState.Disconnected, i = import_react.useMemo(() => oa$1(t, e), [t, e]);
	return { textStreams: O$1(o ? void 0 : i, []) };
}
function hn(e) {
	const { participantIdentities: n, trackSids: t } = e ?? {}, { textStreams: r } = pn(No.TRANSCRIPTION, { room: e == null ? void 0 : e.room });
	return import_react.useMemo(() => r.filter((i) => n ? n.includes(i.participantInfo.identity) : !0).filter((i) => {
		var a;
		return t ? t.includes(((a = i.streamInfo.attributes) == null ? void 0 : a[go.TranscribedTrackId]) ?? "") : !0;
	}), [
		r,
		n,
		t
	]);
}
var Pe = 2, Le = 400, Ae = 3, Re$1 = 1e3;
function mr(e) {
	const n = (0, import_react.useRef)([]), t = (0, import_react.useMemo)(() => new _(), []), r = (0, import_react.useCallback)(async () => t.lock().then(async (h) => {
		for (;;) {
			const l = n.current.pop();
			if (!l) {
				h();
				break;
			}
			switch (l.type) {
				case "connect":
					await l.room.connect(...l.args).then(l.resolve).catch(l.reject);
					break;
				case "disconnect":
					await l.room.disconnect(...l.args).then(l.resolve).catch(l.reject);
					break;
			}
		}
	}), []), o = (0, import_react.useRef)([]), i = (0, import_react.useCallback)((h) => {
		let l = 0;
		o.current = o.current.filter((d) => {
			const v = h.getTime() - d.getTime() < Re$1;
			return v && (l += 1), v;
		}), l > Ae && I$1.warn(`useSequentialRoomConnectDisconnect: room changed reference rapidly (over ${Ae}x in ${Re$1}ms). This is not recommended.`);
	}, []);
	(0, import_react.useEffect)(() => {
		n.current = [];
		const h = /* @__PURE__ */ new Date();
		o.current.push(h), i(h);
	}, [e, i]);
	const a = (0, import_react.useRef)([]), c = (0, import_react.useCallback)((h) => {
		let l = 0;
		a.current = a.current.filter((d) => {
			const v = h.getTime() - d.getTime() < Le;
			return v && (l += 1), v;
		}), l > Pe && I$1.warn(`useSequentialRoomConnectDisconnect: room connect / disconnect occurring in rapid sequence (over ${Pe}x in ${Le}ms). This is not recommended and may be the sign of a bug like a useEffect dependency changing every render.`);
	}, []), u = (0, import_react.useCallback)(async (...h) => new Promise((l, d) => {
		if (!e) throw new Error("Called connect(), but room was unset");
		const v = /* @__PURE__ */ new Date();
		c(v), n.current.push({
			type: "connect",
			room: e,
			args: h,
			resolve: l,
			reject: d
		}), a.current.push(v), r();
	}), [
		e,
		c,
		r
	]), p = (0, import_react.useCallback)(async (...h) => new Promise((l, d) => {
		if (!e) throw new Error("Called discconnect(), but room was unset");
		const v = /* @__PURE__ */ new Date();
		c(v), n.current.push({
			type: "disconnect",
			room: e,
			args: h,
			resolve: l,
			reject: d
		}), a.current.push(v), r();
	}), [
		e,
		c,
		r
	]);
	return {
		connect: e ? u : null,
		disconnect: e ? p : null
	};
}
var oe$1 = { exports: {} }, Oe;
function bn() {
	if (Oe) return oe$1.exports;
	Oe = 1;
	var e = typeof Reflect == "object" ? Reflect : null, n = e && typeof e.apply == "function" ? e.apply : function(f, b, g) {
		return Function.prototype.apply.call(f, b, g);
	}, t;
	e && typeof e.ownKeys == "function" ? t = e.ownKeys : Object.getOwnPropertySymbols ? t = function(f) {
		return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f));
	} : t = function(f) {
		return Object.getOwnPropertyNames(f);
	};
	function r(m) {
		console && console.warn && console.warn(m);
	}
	var o = Number.isNaN || function(f) {
		return f !== f;
	};
	function i() {
		i.init.call(this);
	}
	oe$1.exports = i, oe$1.exports.once = P, i.EventEmitter = i, i.prototype._events = void 0, i.prototype._eventsCount = 0, i.prototype._maxListeners = void 0;
	var a = 10;
	function c(m) {
		if (typeof m != "function") throw new TypeError("The \"listener\" argument must be of type Function. Received type " + typeof m);
	}
	Object.defineProperty(i, "defaultMaxListeners", {
		enumerable: !0,
		get: function() {
			return a;
		},
		set: function(m) {
			if (typeof m != "number" || m < 0 || o(m)) throw new RangeError("The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received " + m + ".");
			a = m;
		}
	}), i.init = function() {
		(this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
	}, i.prototype.setMaxListeners = function(f) {
		if (typeof f != "number" || f < 0 || o(f)) throw new RangeError("The value of \"n\" is out of range. It must be a non-negative number. Received " + f + ".");
		return this._maxListeners = f, this;
	};
	function u(m) {
		return m._maxListeners === void 0 ? i.defaultMaxListeners : m._maxListeners;
	}
	i.prototype.getMaxListeners = function() {
		return u(this);
	}, i.prototype.emit = function(f) {
		for (var b = [], g = 1; g < arguments.length; g++) b.push(arguments[g]);
		var y = f === "error", T = this._events;
		if (T !== void 0) y = y && T.error === void 0;
		else if (!y) return !1;
		if (y) {
			var C;
			if (b.length > 0 && (C = b[0]), C instanceof Error) throw C;
			var k = /* @__PURE__ */ new Error("Unhandled error." + (C ? " (" + C.message + ")" : ""));
			throw k.context = C, k;
		}
		var F = T[f];
		if (F === void 0) return !1;
		if (typeof F == "function") n(F, this, b);
		else for (var B = F.length, H = M(F, B), g = 0; g < B; ++g) n(H[g], this, b);
		return !0;
	};
	function p(m, f, b, g) {
		var y, T, C;
		if (c(b), T = m._events, T === void 0 ? (T = m._events = /* @__PURE__ */ Object.create(null), m._eventsCount = 0) : (T.newListener !== void 0 && (m.emit("newListener", f, b.listener ? b.listener : b), T = m._events), C = T[f]), C === void 0) C = T[f] = b, ++m._eventsCount;
		else if (typeof C == "function" ? C = T[f] = g ? [b, C] : [C, b] : g ? C.unshift(b) : C.push(b), y = u(m), y > 0 && C.length > y && !C.warned) {
			C.warned = !0;
			var k = /* @__PURE__ */ new Error("Possible EventEmitter memory leak detected. " + C.length + " " + String(f) + " listeners added. Use emitter.setMaxListeners() to increase limit");
			k.name = "MaxListenersExceededWarning", k.emitter = m, k.type = f, k.count = C.length, r(k);
		}
		return m;
	}
	i.prototype.addListener = function(f, b) {
		return p(this, f, b, !1);
	}, i.prototype.on = i.prototype.addListener, i.prototype.prependListener = function(f, b) {
		return p(this, f, b, !0);
	};
	function h() {
		if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
	}
	function l(m, f, b) {
		var g = {
			fired: !1,
			wrapFn: void 0,
			target: m,
			type: f,
			listener: b
		}, y = h.bind(g);
		return y.listener = b, g.wrapFn = y, y;
	}
	i.prototype.once = function(f, b) {
		return c(b), this.on(f, l(this, f, b)), this;
	}, i.prototype.prependOnceListener = function(f, b) {
		return c(b), this.prependListener(f, l(this, f, b)), this;
	}, i.prototype.removeListener = function(f, b) {
		var g, y, T, C, k;
		if (c(b), y = this._events, y === void 0) return this;
		if (g = y[f], g === void 0) return this;
		if (g === b || g.listener === b) --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete y[f], y.removeListener && this.emit("removeListener", f, g.listener || b));
		else if (typeof g != "function") {
			for (T = -1, C = g.length - 1; C >= 0; C--) if (g[C] === b || g[C].listener === b) {
				k = g[C].listener, T = C;
				break;
			}
			if (T < 0) return this;
			T === 0 ? g.shift() : w(g, T), g.length === 1 && (y[f] = g[0]), y.removeListener !== void 0 && this.emit("removeListener", f, k || b);
		}
		return this;
	}, i.prototype.off = i.prototype.removeListener, i.prototype.removeAllListeners = function(f) {
		var b, g, y;
		if (g = this._events, g === void 0) return this;
		if (g.removeListener === void 0) return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : g[f] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete g[f]), this;
		if (arguments.length === 0) {
			var T = Object.keys(g), C;
			for (y = 0; y < T.length; ++y) C = T[y], C !== "removeListener" && this.removeAllListeners(C);
			return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
		}
		if (b = g[f], typeof b == "function") this.removeListener(f, b);
		else if (b !== void 0) for (y = b.length - 1; y >= 0; y--) this.removeListener(f, b[y]);
		return this;
	};
	function d(m, f, b) {
		var g = m._events;
		if (g === void 0) return [];
		var y = g[f];
		return y === void 0 ? [] : typeof y == "function" ? b ? [y.listener || y] : [y] : b ? A(y) : M(y, y.length);
	}
	i.prototype.listeners = function(f) {
		return d(this, f, !0);
	}, i.prototype.rawListeners = function(f) {
		return d(this, f, !1);
	}, i.listenerCount = function(m, f) {
		return typeof m.listenerCount == "function" ? m.listenerCount(f) : v.call(m, f);
	}, i.prototype.listenerCount = v;
	function v(m) {
		var f = this._events;
		if (f !== void 0) {
			var b = f[m];
			if (typeof b == "function") return 1;
			if (b !== void 0) return b.length;
		}
		return 0;
	}
	i.prototype.eventNames = function() {
		return this._eventsCount > 0 ? t(this._events) : [];
	};
	function M(m, f) {
		for (var b = new Array(f), g = 0; g < f; ++g) b[g] = m[g];
		return b;
	}
	function w(m, f) {
		for (; f + 1 < m.length; f++) m[f] = m[f + 1];
		m.pop();
	}
	function A(m) {
		for (var f = new Array(m.length), b = 0; b < f.length; ++b) f[b] = m[b].listener || m[b];
		return f;
	}
	function P(m, f) {
		return new Promise(function(b, g) {
			function y(C) {
				m.removeListener(f, T), g(C);
			}
			function T() {
				typeof m.removeListener == "function" && m.removeListener("error", y), b([].slice.call(arguments));
			}
			R(m, f, T, { once: !0 }), f !== "error" && D(m, y, { once: !0 });
		});
	}
	function D(m, f, b) {
		typeof m.on == "function" && R(m, "error", f, b);
	}
	function R(m, f, b, g) {
		if (typeof m.on == "function") g.once ? m.once(f, b) : m.on(f, b);
		else if (typeof m.addEventListener == "function") m.addEventListener(f, function y(T) {
			g.once && m.removeEventListener(f, y), b(T);
		});
		else throw new TypeError("The \"emitter\" argument must be of type EventEmitter. Received type " + typeof m);
	}
	return oe$1.exports;
}
var ge = bn();
var vn = 2e4;
var gn = /* @__PURE__ */ ((e) => (e.CameraChanged = "cameraChanged", e.MicrophoneChanged = "microphoneChanged", e.StateChanged = "stateChanged", e))(gn || {});
var x = (e) => ({
	isConnected: e === "listening" || e === "thinking" || e === "speaking",
	canListen: e === "pre-connect-buffering" || e === "listening" || e === "thinking" || e === "speaking",
	isFinished: e === "disconnected" || e === "failed",
	isPending: e === "connecting" || e === "initializing" || e === "idle"
}), Sn = () => {
	const [e, n] = import_react.useState(null), [t, r] = import_react.useState(null), o = import_react.useRef("connecting"), i = import_react.useRef(!1), a = (c) => setTimeout(() => {
		if (!i.current) {
			n("Agent did not join the room.");
			return;
		}
		const { isConnected: u } = x(o.current);
		if (!u) {
			n("Agent joined the room but did not complete initializing.");
			return;
		}
	}, c ?? vn);
	return {
		agentTimeoutFailureReason: e,
		startAgentTimeout: import_react.useCallback((c) => {
			t && clearTimeout(t), n(null), r(a(c)), o.current = "connecting", i.current = !1;
		}, [t]),
		clearAgentTimeout: import_react.useCallback(() => {
			t && clearTimeout(t), n(null), r(null), o.current = "connecting", i.current = !1;
		}, [t]),
		clearAgentTimeoutFailureReason: import_react.useCallback(() => {
			n(null);
		}, []),
		updateAgentTimeoutState: import_react.useCallback((c) => {
			o.current = c;
		}, []),
		updateAgentTimeoutParticipantExists: import_react.useCallback((c) => {
			i.current = c;
		}, [])
	};
};
function yn(e, n) {
	const t = import_react.useRef(n);
	import_react.useEffect(() => {
		t.current = n;
	}, [n]);
	return {
		waitUntilConnected: import_react.useCallback(async (a) => {
			const { isConnected: c } = x(t.current);
			if (!c) return new Promise((u, p) => {
				const h = (v) => {
					const { isConnected: M } = x(v);
					M && (d(), u());
				}, l = () => {
					d(), p(/* @__PURE__ */ new Error("useAgent(/* ... */).waitUntilConnected - signal aborted"));
				}, d = () => {
					e.off("stateChanged", h), a?.removeEventListener("abort", l);
				};
				e.on("stateChanged", h), a?.addEventListener("abort", l);
			});
		}, [e]),
		waitUntilCouldBeListening: import_react.useCallback(async (a) => {
			const { canListen: c } = x(t.current);
			if (!c) return new Promise((u, p) => {
				const h = (v) => {
					const { canListen: M } = x(v);
					M && (d(), u());
				}, l = () => {
					d(), p(/* @__PURE__ */ new Error("useAgent(/* ... */).waitUntilCouldBeListening - signal aborted"));
				}, d = () => {
					e.off("stateChanged", h), a?.removeEventListener("abort", l);
				};
				e.on("stateChanged", h), a?.addEventListener("abort", l);
			});
		}, [e]),
		waitUntilFinished: import_react.useCallback(async (a) => {
			const { isFinished: c } = x(t.current);
			if (!c) return new Promise((u, p) => {
				const h = (v) => {
					const { isFinished: M } = x(v);
					M && (d(), u());
				}, l = () => {
					d(), p(/* @__PURE__ */ new Error("useAgent(/* ... */).waitUntilFinished - signal aborted"));
				}, d = () => {
					e.off("stateChanged", h), a?.removeEventListener("abort", l);
				};
				e.on("stateChanged", h), a?.addEventListener("abort", l);
			});
		}, [e])
	};
}
function Ue(e) {
	const n = ns();
	if (e = e ?? n, !e) throw new Error("No session provided, make sure you are inside a Session context or pass the session explicitly");
	const { room: t, internal: { agentConnectTimeoutMilliseconds: r, agentTimeoutFailureReason: o, startAgentTimeout: i, clearAgentTimeout: a, clearAgentTimeoutFailureReason: c, updateAgentTimeoutState: u, updateAgentTimeoutParticipantExists: p } } = e, h = import_react.useMemo(() => new ge.EventEmitter(), []), l = ve({ room: t }), d = import_react.useMemo(() => l.find((S) => S.kind === ParticipantInfo_Kind.AGENT && !(go.PublishOnBehalf in S.attributes)) ?? null, [l]), v = import_react.useMemo(() => d ? l.find((S) => S.kind === ParticipantInfo_Kind.AGENT && S.attributes[go.PublishOnBehalf] === d.identity) ?? null : null, [d, l]), [M, w] = import_react.useState((d == null ? void 0 : d.attributes) ?? {});
	import_react.useEffect(() => {
		if (!d) return;
		const S = (_) => {
			w(_);
		};
		return d.on(ParticipantEvent.AttributesChanged, S), () => {
			d.off(ParticipantEvent.AttributesChanged, S);
		};
	}, [d, h]);
	const A = ie$1([Track.Source.Camera, Track.Source.Microphone], {
		room: t,
		participantIdentity: d == null ? void 0 : d.identity
	}), P = ie$1([Track.Source.Camera, Track.Source.Microphone], {
		room: t,
		participantIdentity: v == null ? void 0 : v.identity
	}), D = import_react.useMemo(() => A.find((S) => S.source === Track.Source.Camera) ?? P.find((S) => S.source === Track.Source.Camera), [A, P]);
	import_react.useEffect(() => {
		h.emit("cameraChanged", D);
	}, [h, D]);
	const R = import_react.useMemo(() => A.find((S) => S.source === Track.Source.Microphone) ?? P.find((S) => S.source === Track.Source.Microphone), [A, P]);
	import_react.useEffect(() => {
		h.emit("microphoneChanged", R);
	}, [h, R]);
	const [m, f] = import_react.useState(t.state);
	import_react.useEffect(() => {
		const S = (_) => {
			f(_);
		};
		return t.on(RoomEvent.ConnectionStateChanged, S), () => {
			t.off(RoomEvent.ConnectionStateChanged, S);
		};
	}, [t]), import_react.useEffect(() => {
		d && c();
	}, [d]);
	const [b, g] = import_react.useState(null);
	import_react.useEffect(() => {
		if (!d) return;
		const S = (_) => {
			_.identity === (d == null ? void 0 : d.identity) && g("Agent left the room unexpectedly.");
		};
		return t.on(RoomEvent.ParticipantDisconnected, S), () => {
			t.off(RoomEvent.ParticipantDisconnected, S);
		};
	}, [d, t]), import_react.useEffect(() => {
		m === ConnectionState.Disconnected && g(null);
	}, [m]);
	const [y, T] = import_react.useState(() => t.localParticipant.getTrackPublication(Track.Source.Microphone) ?? null);
	import_react.useEffect(() => {
		const S = () => {
			T(t.localParticipant.getTrackPublication(Track.Source.Microphone) ?? null);
		}, _ = () => {
			T(null);
		};
		return t.localParticipant.on(ParticipantEvent.LocalTrackPublished, S), t.localParticipant.on(ParticipantEvent.LocalTrackUnpublished, _), () => {
			t.localParticipant.off(ParticipantEvent.LocalTrackPublished, S), t.localParticipant.off(ParticipantEvent.LocalTrackUnpublished, _);
		};
	}, [t.localParticipant]);
	const C = import_react.useMemo(() => {
		const S = [];
		return o && S.push(o), b && S.push(b), S;
	}, [o, b]), k = import_react.useMemo(() => {
		if (C.length > 0) return "failed";
		let S = "disconnected";
		return m !== ConnectionState.Disconnected && (S = "connecting"), y && (S = "pre-connect-buffering"), d && M[go.AgentState] && (S = M[go.AgentState]), S;
	}, [
		C,
		m,
		y,
		d,
		M
	]);
	import_react.useEffect(() => {
		h.emit("stateChanged", k), u(k);
	}, [h, k]), import_react.useEffect(() => {
		p(d !== null);
	}, [d]);
	const F = e.connectionState === "disconnected";
	import_react.useEffect(() => {
		if (!F) return i(r), () => {
			a();
		};
	}, [F, r]);
	const { identity: B, name: H, metadata: K } = Yt({ participant: d ?? void 0 }), te = import_react.useMemo(() => {
		const S = {
			attributes: M,
			internal: {
				agentParticipant: d,
				workerParticipant: v,
				emitter: h
			}
		};
		switch (k) {
			case "disconnected": return {
				...S,
				identity: void 0,
				name: void 0,
				metadata: void 0,
				state: k,
				...x(k),
				failureReasons: null,
				cameraTrack: void 0,
				microphoneTrack: void 0
			};
			case "connecting": return {
				...S,
				identity: void 0,
				name: void 0,
				metadata: void 0,
				state: k,
				...x(k),
				failureReasons: null,
				cameraTrack: void 0,
				microphoneTrack: void 0
			};
			case "initializing":
			case "idle": return {
				...S,
				identity: B,
				name: H,
				metadata: K,
				state: k,
				...x(k),
				failureReasons: null,
				cameraTrack: D,
				microphoneTrack: R
			};
			case "pre-connect-buffering": return {
				...S,
				identity: B,
				name: H,
				metadata: K,
				state: k,
				...x(k),
				failureReasons: null,
				cameraTrack: D,
				microphoneTrack: R
			};
			case "listening":
			case "thinking":
			case "speaking": return {
				...S,
				identity: B,
				name: H,
				metadata: K,
				state: k,
				...x(k),
				failureReasons: null,
				cameraTrack: D,
				microphoneTrack: R
			};
			case "failed": return {
				...S,
				identity: void 0,
				name: void 0,
				metadata: void 0,
				state: "failed",
				...x("failed"),
				failureReasons: C,
				cameraTrack: void 0,
				microphoneTrack: void 0
			};
		}
	}, [
		B,
		H,
		K,
		M,
		h,
		d,
		k,
		D,
		R
	]), { waitUntilConnected: X, waitUntilCouldBeListening: L, waitUntilFinished: N } = yn(h, k), q = import_react.useCallback((S) => new Promise((_, Z) => {
		const W = (J) => {
			J && (G(), _(J));
		}, z = () => {
			G(), Z(/* @__PURE__ */ new Error("useAgent(/* ... */).waitUntilCamera - signal aborted"));
		}, G = () => {
			h.off("cameraChanged", W), S?.removeEventListener("abort", z);
		};
		h.on("cameraChanged", W), S?.addEventListener("abort", z);
	}), [h]), se = import_react.useCallback((S) => new Promise((_, Z) => {
		const W = (J) => {
			J && (G(), _(J));
		}, z = () => {
			G(), Z(/* @__PURE__ */ new Error("useAgent(/* ... */).waitUntilMicrophone - signal aborted"));
		}, G = () => {
			h.off("microphoneChanged", W), S?.removeEventListener("abort", z);
		};
		h.on("microphoneChanged", W), S?.addEventListener("abort", z);
	}), [h]);
	return import_react.useMemo(() => ({
		...te,
		waitUntilConnected: X,
		waitUntilCouldBeListening: L,
		waitUntilFinished: N,
		waitUntilCamera: q,
		waitUntilMicrophone: se
	}), [
		te,
		X,
		L,
		N,
		q,
		se
	]);
}
var Cn = /* @__PURE__ */ ((e) => (e.ConnectionStateChanged = "connectionStateChanged", e.MediaDevicesError = "mediaDevicesError", e.EncryptionError = "encryptionError", e))(Cn || {});
function Mn(e, n) {
	const t = /* @__PURE__ */ new Set([...Object.keys(e), ...Object.keys(n)]);
	for (const r of t) switch (r) {
		case "roomName":
		case "participantName":
		case "participantIdentity":
		case "participantMetadata":
		case "participantAttributes":
		case "agentName":
		case "agentMetadata":
			if (e[r] !== n[r]) return !1;
			break;
		default:
			const o = r;
			throw new Error(`Options key ${o} not being checked for equality!`);
	}
	return !0;
}
function Tn(e, n) {
	const t = import_react.useRef(n);
	return import_react.useEffect(() => {
		t.current = n;
	}, [n]), import_react.useCallback(async (o, i) => {
		if (t.current !== o) return new Promise((a, c) => {
			const u = (l) => {
				l === o && (h(), a());
			}, p = () => {
				h(), c(/* @__PURE__ */ new Error(`useSession(/* ... */).waitUntilConnectionState(${o}, /* signal */) - signal aborted`));
			}, h = () => {
				e.off("connectionStateChanged", u), i?.removeEventListener("abort", p);
			};
			e.on("connectionStateChanged", u), i?.addEventListener("abort", p);
		});
	}, [e]);
}
function En(e, n) {
	const t = e instanceof TokenSourceConfigurable, r = import_react.useRef(t ? n : null);
	return import_react.useEffect(() => {
		if (!t) {
			r.current = null;
			return;
		}
		r.current !== null && Mn(r.current, n) || (r.current = n);
	}, [t, n]), import_react.useCallback(async () => {
		if (t) {
			if (!r.current) throw new Error("AgentSession - memoized token fetch options are not set, but the passed tokenSource was an instance of TokenSourceConfigurable. If you are seeing this please make a new GitHub issue!");
			return e.fetch(r.current);
		} else return e.fetch();
	}, [t, e]);
}
function pr(e, n = {}) {
	const { room: t, agentConnectTimeoutMilliseconds: r, ...o } = n, i = ts(), a = import_react.useMemo(() => i ?? t ?? new Room(), [i, t]), c = import_react.useMemo(() => new ge.EventEmitter(), []), u = import_react.useCallback((L) => ({ isConnected: L === ConnectionState.Connected || L === ConnectionState.Reconnecting || L === ConnectionState.SignalReconnecting }), []), [p, h] = import_react.useState(a.state);
	import_react.useEffect(() => {
		const L = (N) => {
			h(N);
		};
		return a.on(RoomEvent.ConnectionStateChanged, L), () => {
			a.off(RoomEvent.ConnectionStateChanged, L);
		};
	}, [a]), import_react.useEffect(() => {
		const L = async (N) => {
			c.emit("mediaDevicesError", N);
		};
		return a.on(RoomEvent.MediaDevicesError, L), () => {
			a.off(RoomEvent.MediaDevicesError, L);
		};
	}, [a, c]), import_react.useEffect(() => {
		const L = async (N) => {
			c.emit("encryptionError", N);
		};
		return a.on(RoomEvent.EncryptionError, L), () => {
			a.off(RoomEvent.EncryptionError, L);
		};
	}, [a, c]);
	const { localParticipant: l } = xe({ room: a }), d = l.getTrackPublication(Track.Source.Camera), v = import_react.useMemo(() => {
		if (d) return {
			source: Track.Source.Camera,
			participant: l,
			publication: d
		};
	}, [l, d]), M = l.getTrackPublication(Track.Source.Microphone), w = import_react.useMemo(() => {
		if (M) return {
			source: Track.Source.Microphone,
			participant: l,
			publication: M
		};
	}, [l, M]), A = l.getTrackPublication(Track.Source.ScreenShare), P = import_react.useMemo(() => {
		if (A) return {
			source: Track.Source.ScreenShare,
			participant: l,
			publication: A
		};
	}, [l, A]), { agentTimeoutFailureReason: D, startAgentTimeout: R, clearAgentTimeout: m, clearAgentTimeoutFailureReason: f, updateAgentTimeoutState: b, updateAgentTimeoutParticipantExists: g } = Sn(), y = import_react.useMemo(() => ({
		emitter: c,
		tokenSource: e,
		agentConnectTimeoutMilliseconds: r,
		agentTimeoutFailureReason: D,
		startAgentTimeout: R,
		clearAgentTimeout: m,
		clearAgentTimeoutFailureReason: f,
		updateAgentTimeoutState: b,
		updateAgentTimeoutParticipantExists: g
	}), [
		c,
		r,
		e,
		D,
		R,
		m,
		f,
		b,
		g
	]), T = import_react.useMemo(() => {
		const L = {
			room: a,
			internal: y
		};
		switch (p) {
			case ConnectionState.Connecting: return {
				...L,
				connectionState: ConnectionState.Connecting,
				...u(ConnectionState.Connecting),
				local: {
					cameraTrack: void 0,
					microphoneTrack: void 0,
					screenShareTrack: void 0
				}
			};
			case ConnectionState.Connected:
			case ConnectionState.Reconnecting:
			case ConnectionState.SignalReconnecting: return {
				...L,
				connectionState: p,
				...u(p),
				local: {
					cameraTrack: v,
					microphoneTrack: w,
					screenShareTrack: P
				}
			};
			case ConnectionState.Disconnected: return {
				...L,
				connectionState: ConnectionState.Disconnected,
				...u(ConnectionState.Disconnected),
				local: {
					cameraTrack: void 0,
					microphoneTrack: void 0,
					screenShareTrack: void 0
				}
			};
		}
	}, [
		y,
		a,
		p,
		v,
		w,
		u
	]);
	import_react.useEffect(() => {
		c.emit("connectionStateChanged", T.connectionState);
	}, [c, T.connectionState]);
	const C = Tn(c, T.connectionState), k = import_react.useCallback(async (L) => C(ConnectionState.Connected, L), [C]), F = import_react.useCallback(async (L) => C(ConnectionState.Disconnected, L), [C]), B = Ue(import_react.useMemo(() => ({
		connectionState: T.connectionState,
		room: a,
		internal: y
	}), [
		T,
		a,
		y
	])), H = En(e, o), K = import_react.useCallback(async (L = {}) => {
		var Z, W, z, G, J, Se;
		const { signal: N, tracks: q = { microphone: {
			enabled: !0,
			publishOptions: { preConnectBuffer: !0 }
		} }, roomConnectOptions: se } = L;
		await F(N);
		const S = () => {
			a.disconnect();
		};
		N?.addEventListener("abort", S);
		let _ = !1;
		await Promise.all([
			H().then(({ serverUrl: He, participantToken: ye }) => {
				var Ce, Me;
				return _ = (((Me = (Ce = decodeTokenPayload(ye).roomConfig) == null ? void 0 : Ce.agents) == null ? void 0 : Me.length) ?? 0) > 0, a.connect(He, ye, se);
			}),
			(Z = q.microphone) != null && Z.enabled ? a.localParticipant.setMicrophoneEnabled(!0, void 0, ((W = q.microphone) == null ? void 0 : W.publishOptions) ?? {}) : Promise.resolve(),
			(z = q.camera) != null && z.enabled ? a.localParticipant.setCameraEnabled(!0, void 0, ((G = q.camera) == null ? void 0 : G.publishOptions) ?? {}) : Promise.resolve(),
			(J = q.screenShare) != null && J.enabled ? a.localParticipant.setScreenShareEnabled(!0, void 0, ((Se = q.screenShare) == null ? void 0 : Se.publishOptions) ?? {}) : Promise.resolve()
		]), await k(N), _ && await B.waitUntilConnected(N), N?.removeEventListener("abort", S);
	}, [
		a,
		F,
		H,
		k,
		B.waitUntilConnected
	]), te = import_react.useCallback(async () => {
		await a.disconnect();
	}, [a]), X = import_react.useCallback(async () => {
		const L = await H();
		await a.prepareConnection(L.serverUrl, L.participantToken);
	}, [H, a]);
	return import_react.useEffect(() => {
		X().catch((L) => {
			console.warn("WARNING: Room.prepareConnection failed:", L);
		});
	}, []), import_react.useMemo(() => ({
		...T,
		waitUntilConnected: k,
		waitUntilDisconnected: F,
		prepareConnection: X,
		start: K,
		end: te
	}), [
		T,
		k,
		F,
		X,
		K,
		te
	]);
}
function hr(e, n, t, r) {
	const o = import_react.useMemo(() => () => {}, []), i = import_react.useCallback(t ?? o, r ?? []), a = r ? i : t, c = import_react.useMemo(() => e ? "internal" in e ? e.internal.emitter : e : null, [e]);
	import_react.useEffect(() => {
		if (!(!c || !a)) return c.on(n, a), () => {
			c.off(n, a);
		};
	}, [
		c,
		n,
		a
	]);
}
var kn = /* @__PURE__ */ ((e) => (e.MessageReceived = "messageReceived", e))(kn || {});
function br(e) {
	const { room: n } = ga$1(e), t = import_react.useMemo(() => new ge.EventEmitter(), []), r = Ue(e), o = hn({ room: n }), a = rn(import_react.useMemo(() => ({ room: n }), [n])), c = import_react.useMemo(() => o.map((d) => {
		var v, M, w;
		switch (d.participantInfo.identity) {
			case n.localParticipant.identity: return {
				type: "userTranscript",
				message: d.text,
				id: d.streamInfo.id,
				timestamp: d.streamInfo.timestamp,
				from: n.localParticipant
			};
			case (v = r.internal.agentParticipant) == null ? void 0 : v.identity:
			case (M = r.internal.workerParticipant) == null ? void 0 : M.identity: return {
				type: "agentTranscript",
				message: d.text,
				id: d.streamInfo.id,
				timestamp: d.streamInfo.timestamp,
				from: ((w = r.internal.agentParticipant) == null ? void 0 : w.identity) === d.participantInfo.identity ? r.internal.agentParticipant : r.internal.workerParticipant
			};
			default: return {
				type: "agentTranscript",
				message: d.text,
				id: d.streamInfo.id,
				timestamp: d.streamInfo.timestamp,
				from: Array.from(n.remoteParticipants.values()).find((A) => A.identity === d.participantInfo.identity)
			};
		}
	}), [o, n]), u = import_react.useMemo(() => [...c, ...a.chatMessages], [c, a.chatMessages]), p = import_react.useRef(/* @__PURE__ */ new Map()), h = import_react.useMemo(() => {
		const d = /* @__PURE__ */ new Date();
		for (const v of u) p.current.has(v.id) || p.current.set(v.id, d);
		return u.sort((v, M) => {
			const w = p.current.get(v.id), A = p.current.get(M.id);
			return typeof w > "u" || typeof A > "u" ? 0 : w.getTime() - A.getTime();
		});
	}, [u]), l = import_react.useRef(/* @__PURE__ */ new Set());
	return import_react.useEffect(() => {
		for (const d of h) l.current.has(d.id) || (l.current.add(d.id), t.emit("messageReceived", d));
	}, [h]), import_react.useMemo(() => ({
		messages: h,
		send: a.send,
		isSending: a.isSending,
		internal: { emitter: t }
	}), [
		h,
		a.send,
		a.isSending
	]);
}

//#endregion
//#region node_modules/@livekit/components-react/dist/components-lNrIMTWQ.mjs
var ca = /* @__PURE__ */ import_react.forwardRef(function(n, a) {
	const { buttonProps: c } = Nn(n);
	return /* @__PURE__ */ import_react.createElement("button", {
		ref: a,
		...c
	}, n.children);
}), la = /* @__PURE__ */ import_react.forwardRef(function({ room: n, ...a }, c) {
	const r = re(n);
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: c,
		...a
	}, r);
}), sa = /* @__PURE__ */ import_react.forwardRef(function(n, a) {
	const { mergedProps: c } = Zn({ props: n });
	return /* @__PURE__ */ import_react.createElement("button", {
		ref: a,
		...c
	}, n.children);
}), ia = /* @__PURE__ */ import_react.forwardRef(function(n, a) {
	const { buttonProps: c } = xn(n);
	return /* @__PURE__ */ import_react.createElement("button", {
		ref: a,
		...c
	}, n.children);
}), pt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentColor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", { d: "M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z" })), wt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentColor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", { d: "M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z" })), oa = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	viewBox: "0 0 24 24",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "#FFF",
	d: "M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"
})), ua = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 18,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",
	clipRule: "evenodd"
})), ie = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentcolor",
	fillRule: "evenodd",
	d: "M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",
	clipRule: "evenodd"
})), kt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("g", {
	stroke: "currentColor",
	strokeLinecap: "round",
	strokeLinejoin: "round",
	strokeWidth: 1.5
}, /* @__PURE__ */ import_react.createElement("path", { d: "M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9" }))), da = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentcolor",
	fillRule: "evenodd",
	d: "M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",
	clipRule: "evenodd"
})), ma = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",
	clipRule: "evenodd"
})), Rt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentcolor",
	fillRule: "evenodd",
	d: "M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",
	clipRule: "evenodd"
})), Mt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentColor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", { d: "M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z" })), yt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentColor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fillRule: "evenodd",
	d: "M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", { d: "M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z" })), bt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentcolor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" })), St = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentcolor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("g", { opacity: .25 }, /* @__PURE__ */ import_react.createElement("path", { d: "M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }))), Ct = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentcolor",
	...t
}, /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("g", { opacity: .25 }, /* @__PURE__ */ import_react.createElement("path", { d: "M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z" }))), It = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "currentColor",
	...t
}, /* @__PURE__ */ import_react.createElement("g", { opacity: .25 }, /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z" }), /* @__PURE__ */ import_react.createElement("path", { d: "M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z" }))), Re = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 20,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",
	clipRule: "evenodd"
})), xt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 20,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("g", { fill: "currentColor" }, /* @__PURE__ */ import_react.createElement("path", { d: "M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z" }), /* @__PURE__ */ import_react.createElement("path", {
	fillRule: "evenodd",
	d: "M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",
	clipRule: "evenodd"
}))), oe = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",
	clipRule: "evenodd",
	opacity: .7
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",
	clipRule: "evenodd",
	opacity: .6
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",
	clipRule: "evenodd",
	opacity: .5
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",
	clipRule: "evenodd"
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",
	clipRule: "evenodd",
	opacity: .4
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",
	clipRule: "evenodd",
	opacity: .9
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",
	clipRule: "evenodd",
	opacity: .3
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",
	clipRule: "evenodd",
	opacity: .8
}), /* @__PURE__ */ import_react.createElement("path", {
	fill: "currentColor",
	fillRule: "evenodd",
	d: "M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",
	clipRule: "evenodd",
	opacity: .2
})), Pt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	xmlns: "http://www.w3.org/2000/svg",
	width: 16,
	height: 16,
	fill: "none",
	...t
}, /* @__PURE__ */ import_react.createElement("g", {
	stroke: "currentColor",
	strokeLinecap: "round",
	strokeLinejoin: "round",
	strokeWidth: 1.5
}, /* @__PURE__ */ import_react.createElement("path", { d: "M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25" }))), Tt = /* @__PURE__ */ import_react.forwardRef(function({ trackRef: n, ...a }, c) {
	const r = Hn$1(), { mergedProps: s, inFocus: o } = Un({
		trackRef: n ?? r,
		props: a
	});
	return /* @__PURE__ */ import_react.createElement(jn.Consumer, null, (l) => l !== void 0 && /* @__PURE__ */ import_react.createElement("button", {
		ref: c,
		...s
	}, a.children ? a.children : o ? /* @__PURE__ */ import_react.createElement(Pt, null) : /* @__PURE__ */ import_react.createElement(kt, null)));
}), fa = /* @__PURE__ */ import_react.forwardRef(function({ kind: n, initialSelection: a, onActiveDeviceChange: c, onDeviceListChange: r, onDeviceSelectError: s, exactMatch: o, track: l, requestPermissions: i, onError: d, ...u }, v) {
	const f = ts(), p = import_react.useRef("default"), { devices: h, activeDeviceId: m, setActiveMediaDevice: y, className: C } = Vn$1({
		kind: n,
		room: f,
		track: l,
		requestPermissions: i,
		onError: import_react.useCallback((w) => {
			f && f.emit(RoomEvent.MediaDevicesError, w), d?.(w);
		}, [f, d])
	});
	import_react.useEffect(() => {
		a !== void 0 && y(a);
	}, [y]), import_react.useEffect(() => {
		typeof r == "function" && r(h);
	}, [r, h]), import_react.useEffect(() => {
		m !== p.current && c?.(m), p.current = m;
	}, [m]);
	const A = async (w) => {
		try {
			await y(w, { exact: o ?? !0 });
		} catch (M) {
			if (M instanceof Error) s?.(M);
			else throw M;
		}
	}, N = import_react.useMemo(() => G(u, { className: C }, { className: "lk-list" }), [C, u]), g = !!h.find((w) => w.label.toLowerCase().startsWith("default"));
	function R(w, M, P) {
		return w === M || !g && P === 0 && M === "default";
	}
	return /* @__PURE__ */ import_react.createElement("ul", {
		ref: v,
		...N
	}, h.map((w, M) => /* @__PURE__ */ import_react.createElement("li", {
		key: w.deviceId,
		id: w.deviceId,
		"data-lk-active": R(w.deviceId, m, M),
		"aria-selected": R(w.deviceId, m, M),
		role: "option"
	}, /* @__PURE__ */ import_react.createElement("button", {
		className: "lk-button",
		onClick: () => A(w.deviceId)
	}, w.label))));
}), ha = /* @__PURE__ */ import_react.forwardRef(function({ label: n = "Allow Audio", ...a }, c) {
	const { mergedProps: s } = Kn({
		room: va$1(a.room),
		props: a
	});
	return /* @__PURE__ */ import_react.createElement("button", {
		ref: c,
		...s
	}, n);
}), ga = /* @__PURE__ */ import_react.forwardRef(function({ label: n, ...a }, c) {
	const r = ha$1(), { mergedProps: s, canPlayAudio: o } = Kn({
		room: r,
		props: a
	}), { mergedProps: l, canPlayVideo: i } = Yn$1({
		room: r,
		props: s
	}), { style: d, ...u } = l;
	return d.display = o && i ? "none" : "block", /* @__PURE__ */ import_react.createElement("button", {
		ref: c,
		style: d,
		...u
	}, n ?? `Start ${o ? "Video" : "Audio"}`);
});
function Me(t, n) {
	switch (t) {
		case Track.Source.Microphone: return n ? /* @__PURE__ */ import_react.createElement(yt, null) : /* @__PURE__ */ import_react.createElement(Mt, null);
		case Track.Source.Camera: return n ? /* @__PURE__ */ import_react.createElement(wt, null) : /* @__PURE__ */ import_react.createElement(pt, null);
		case Track.Source.ScreenShare: return n ? /* @__PURE__ */ import_react.createElement(xt, null) : /* @__PURE__ */ import_react.createElement(Re, null);
		default: return;
	}
}
function At(t) {
	switch (t) {
		case ConnectionQuality.Excellent: return /* @__PURE__ */ import_react.createElement(bt, null);
		case ConnectionQuality.Good: return /* @__PURE__ */ import_react.createElement(St, null);
		case ConnectionQuality.Poor: return /* @__PURE__ */ import_react.createElement(Ct, null);
		default: return /* @__PURE__ */ import_react.createElement(It, null);
	}
}
var va = /* @__PURE__ */ import_react.forwardRef(function({ showIcon: n, ...a }, c) {
	const { buttonProps: r, enabled: s } = nr(a), [o, l] = import_react.useState(!1);
	return import_react.useEffect(() => {
		l(!0);
	}, []), o && /* @__PURE__ */ import_react.createElement("button", {
		ref: c,
		...r
	}, (n ?? !0) && Me(a.source, s), a.children);
}), ye = /* @__PURE__ */ import_react.forwardRef(function(n, a) {
	const { className: c, quality: r } = _n(n), s = import_react.useMemo(() => ({
		...G(n, { className: c }),
		"data-lk-quality": r
	}), [
		r,
		n,
		c
	]);
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: a,
		...s
	}, n.children ?? At(r));
}), K = /* @__PURE__ */ import_react.forwardRef(function({ participant: n, ...a }, c) {
	const r = pa$1(n), { className: s, infoObserver: o } = import_react.useMemo(() => Vs(r), [r]), { identity: l, name: i } = O$1(o, {
		name: r.name,
		identity: r.identity,
		metadata: r.metadata
	}), d = import_react.useMemo(() => G(a, {
		className: s,
		"data-lk-participant-name": i
	}), [
		a,
		s,
		i
	]);
	return /* @__PURE__ */ import_react.createElement("span", {
		ref: c,
		...d
	}, i !== "" ? i : l, a.children);
}), be = /* @__PURE__ */ import_react.forwardRef(function({ trackRef: n, show: a = "always", ...c }, r) {
	const { className: s, isMuted: o } = tr(n), l = a === "always" || a === "muted" && o || a === "unmuted" && !o, i = import_react.useMemo(() => G(c, { className: s }), [s, c]);
	return l ? /* @__PURE__ */ import_react.createElement("div", {
		ref: r,
		...i,
		"data-lk-muted": o
	}, c.children ?? Me(n.source, !o)) : null;
}), Nt = (t) => /* @__PURE__ */ import_react.createElement("svg", {
	width: 320,
	height: 320,
	viewBox: "0 0 320 320",
	preserveAspectRatio: "xMidYMid meet",
	fill: "none",
	xmlns: "http://www.w3.org/2000/svg",
	...t
}, /* @__PURE__ */ import_react.createElement("path", {
	d: "M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",
	fill: "white",
	fillOpacity: .25
}), /* @__PURE__ */ import_react.createElement("path", {
	d: "M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",
	fill: "white",
	fillOpacity: .25
}));
function Se(t, n = {}) {
	const [a, c] = import_react.useState(qt$1(t)), [r, s] = import_react.useState(a == null ? void 0 : a.isMuted), [o, l] = import_react.useState(a == null ? void 0 : a.isSubscribed), [i, d] = import_react.useState(a == null ? void 0 : a.track), [u, v] = import_react.useState("landscape"), f = import_react.useRef(), { className: p, trackObserver: E } = import_react.useMemo(() => Es(t), [
		t.participant.sid ?? t.participant.identity,
		t.source,
		K$1(t) && t.publication.trackSid
	]);
	return import_react.useEffect(() => {
		const h = E.subscribe((m) => {
			I$1.debug("update track", m), c(m), s(m == null ? void 0 : m.isMuted), l(m == null ? void 0 : m.isSubscribed), d(m == null ? void 0 : m.track);
		});
		return () => h == null ? void 0 : h.unsubscribe();
	}, [E]), import_react.useEffect(() => {
		var h, m;
		return i && (f.current && i.detach(f.current), (h = n.element) != null && h.current && !(t.participant.isLocal && (i == null ? void 0 : i.kind) === "audio") && i.attach(n.element.current)), f.current = (m = n.element) == null ? void 0 : m.current, () => {
			f.current && i?.detach(f.current);
		};
	}, [i, n.element]), import_react.useEffect(() => {
		var h, m;
		if (typeof ((h = a == null ? void 0 : a.dimensions) == null ? void 0 : h.width) == "number" && typeof ((m = a == null ? void 0 : a.dimensions) == null ? void 0 : m.height) == "number") v(a.dimensions.width > a.dimensions.height ? "landscape" : "portrait");
	}, [a]), {
		publication: a,
		isMuted: r,
		isSubscribed: o,
		track: i,
		elementProps: G(n.props, {
			className: p,
			"data-lk-local-participant": t.participant.isLocal,
			"data-lk-source": a == null ? void 0 : a.source,
			...(a == null ? void 0 : a.kind) === "video" && { "data-lk-orientation": u }
		})
	};
}
var Y, ue;
function Lt() {
	if (ue) return Y;
	ue = 1;
	var t = "Expected a function", n = NaN, a = "[object Symbol]", c = /^\s+|\s+$/g, r = /^[-+]0x[0-9a-f]+$/i, s = /^0b[01]+$/i, o = /^0o[0-7]+$/i, l = parseInt, i = typeof os == "object" && os && os.Object === Object && os, d = typeof self == "object" && self && self.Object === Object && self, u = i || d || Function("return this")(), f = Object.prototype.toString, p = Math.max, E = Math.min, h = function() {
		return u.Date.now();
	};
	function m(g, R, w) {
		var M, P, O, L, b, T, F = 0, re = !1, Z = !1, D = !0;
		if (typeof g != "function") throw new TypeError(t);
		R = N(R) || 0, y(w) && (re = !!w.leading, Z = "maxWait" in w, O = Z ? p(N(w.maxWait) || 0, R) : O, D = "trailing" in w ? !!w.trailing : D);
		function U(k) {
			var x = M, H = P;
			return M = P = void 0, F = k, L = g.apply(H, x), L;
		}
		function xe(k) {
			return F = k, b = setTimeout(W, R), re ? U(k) : L;
		}
		function Pe(k) {
			var x = k - T, H = k - F, se = R - x;
			return Z ? E(se, O - H) : se;
		}
		function ce(k) {
			var x = k - T, H = k - F;
			return T === void 0 || x >= R || x < 0 || Z && H >= O;
		}
		function W() {
			var k = h();
			if (ce(k)) return le(k);
			b = setTimeout(W, Pe(k));
		}
		function le(k) {
			return b = void 0, D && M ? U(k) : (M = P = void 0, L);
		}
		function Te() {
			b !== void 0 && clearTimeout(b), F = 0, M = T = P = b = void 0;
		}
		function Ae() {
			return b === void 0 ? L : le(h());
		}
		function G() {
			var k = h(), x = ce(k);
			if (M = arguments, P = this, T = k, x) {
				if (b === void 0) return xe(T);
				if (Z) return b = setTimeout(W, R), U(T);
			}
			return b === void 0 && (b = setTimeout(W, R)), L;
		}
		return G.cancel = Te, G.flush = Ae, G;
	}
	function y(g) {
		var R = typeof g;
		return !!g && (R == "object" || R == "function");
	}
	function C(g) {
		return !!g && typeof g == "object";
	}
	function A(g) {
		return typeof g == "symbol" || C(g) && f.call(g) == a;
	}
	function N(g) {
		if (typeof g == "number") return g;
		if (A(g)) return n;
		if (y(g)) {
			var R = typeof g.valueOf == "function" ? g.valueOf() : g;
			g = y(R) ? R + "" : R;
		}
		if (typeof g != "string") return g === 0 ? g : +g;
		g = g.replace(c, "");
		var w = s.test(g);
		return w || o.test(g) ? l(g.slice(2), w ? 2 : 8) : r.test(g) ? n : +g;
	}
	return Y = m, Y;
}
var de = /* @__PURE__ */ Yr(Lt());
function Vt(t) {
	const n = (0, import_react.useRef)(t);
	n.current = t, (0, import_react.useEffect)(() => () => {
		n.current();
	}, []);
}
function Ft(t, n = 500, a) {
	const c = (0, import_react.useRef)();
	Vt(() => {
		c.current && c.current.cancel();
	});
	const r = (0, import_react.useMemo)(() => {
		const s = de(t, n, a), o = (...l) => s(...l);
		return o.cancel = () => {
			s.cancel();
		}, o.isPending = () => !!c.current, o.flush = () => s.flush(), o;
	}, [
		t,
		n,
		a
	]);
	return (0, import_react.useEffect)(() => {
		c.current = de(t, n, a);
	}, [
		t,
		n,
		a
	]), r;
}
function Zt$1(t, n, a) {
	const c = ((d, u) => d === u), r = t instanceof Function ? t() : t, [s, o] = (0, import_react.useState)(r), l = (0, import_react.useRef)(r), i = Ft(o, n, a);
	return c(l.current, r) || (i(r), l.current = r), [s, i];
}
function Ht({ threshold: t = 0, root: n = null, rootMargin: a = "0%", freezeOnceVisible: c = !1, initialIsIntersecting: r = !1, onChange: s } = {}) {
	var o;
	const [l, i] = (0, import_react.useState)(null), [d, u] = (0, import_react.useState)(() => ({
		isIntersecting: r,
		entry: void 0
	})), v = (0, import_react.useRef)();
	v.current = s;
	const f = ((o = d.entry) == null ? void 0 : o.isIntersecting) && c;
	(0, import_react.useEffect)(() => {
		if (!l || !("IntersectionObserver" in window) || f) return;
		const h = new IntersectionObserver((m) => {
			const y = Array.isArray(h.thresholds) ? h.thresholds : [h.thresholds];
			m.forEach((C) => {
				const A = C.isIntersecting && y.some((N) => C.intersectionRatio >= N);
				u({
					isIntersecting: A,
					entry: C
				}), v.current && v.current(A, C);
			});
		}, {
			threshold: t,
			root: n,
			rootMargin: a
		});
		return h.observe(l), () => {
			h.disconnect();
		};
	}, [
		l,
		JSON.stringify(t),
		n,
		a,
		f,
		c
	]);
	const p = (0, import_react.useRef)(null);
	(0, import_react.useEffect)(() => {
		var h;
		!l && (h = d.entry) != null && h.target && !c && !f && p.current !== d.entry.target && (p.current = d.entry.target, u({
			isIntersecting: r,
			entry: void 0
		}));
	}, [
		l,
		d.entry,
		c,
		f,
		r
	]);
	const E = [
		i,
		!!d.isIntersecting,
		d.entry
	];
	return E.ref = E[0], E.isIntersecting = E[1], E.entry = E[2], E;
}
var Bt = /* @__PURE__ */ import_react.forwardRef(function({ onTrackClick: n, onClick: a, onSubscriptionStatusChanged: c, trackRef: r, manageSubscription: s, ...o }, l) {
	const i = fa$1(r), d = import_react.useRef(null);
	import_react.useImperativeHandle(l, () => d.current);
	const u = Ht({ root: d.current }), [v] = Zt$1(u, 3e3);
	import_react.useEffect(() => {
		s && i.publication instanceof RemoteTrackPublication && (v == null ? void 0 : v.isIntersecting) === !1 && (u == null ? void 0 : u.isIntersecting) === !1 && i.publication.setSubscribed(!1);
	}, [
		v,
		i,
		s
	]), import_react.useEffect(() => {
		s && i.publication instanceof RemoteTrackPublication && (u == null ? void 0 : u.isIntersecting) === !0 && i.publication.setSubscribed(!0);
	}, [
		u,
		i,
		s
	]);
	const { elementProps: f, publication: p, isSubscribed: E } = Se(i, {
		element: d,
		props: o
	});
	import_react.useEffect(() => {
		c?.(!!E);
	}, [E, c]);
	const h = (m) => {
		a?.(m), n?.({
			participant: i == null ? void 0 : i.participant,
			track: p
		});
	};
	return /* @__PURE__ */ import_react.createElement("video", {
		ref: d,
		...f,
		muted: !0,
		onClick: h
	});
}), ne = /* @__PURE__ */ import_react.forwardRef(function({ trackRef: n, onSubscriptionStatusChanged: a, volume: c, ...r }, s) {
	const o = fa$1(n), l = import_react.useRef(null);
	import_react.useImperativeHandle(s, () => l.current);
	const { elementProps: i, isSubscribed: d, track: u, publication: v } = Se(o, {
		element: l,
		props: r
	});
	return import_react.useEffect(() => {
		a?.(!!d);
	}, [d, a]), import_react.useEffect(() => {
		u === void 0 || c === void 0 || (u instanceof RemoteAudioTrack ? u.setVolume(c) : I$1.warn("Volume can only be set on remote audio tracks."));
	}, [c, u]), import_react.useEffect(() => {
		v === void 0 || r.muted === void 0 || (v instanceof RemoteTrackPublication ? v.setEnabled(!r.muted) : I$1.warn("Can only call setEnabled on remote track publications."));
	}, [
		r.muted,
		v,
		u
	]), /* @__PURE__ */ import_react.createElement("audio", {
		ref: l,
		...i
	});
});
function jt(t) {
	const n = !!es();
	return t.participant && !n ? /* @__PURE__ */ import_react.createElement(zn.Provider, { value: t.participant }, t.children) : /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, t.children);
}
function _t(t) {
	const n = !!Hn$1();
	return t.trackRef && !n ? /* @__PURE__ */ import_react.createElement(Vn.Provider, { value: t.trackRef }, t.children) : /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, t.children);
}
var Ot = /* @__PURE__ */ import_react.forwardRef(function({ trackRef: n, children: a, onParticipantClick: c, disableSpeakingIndicator: r, ...s }, o) {
	var p, E;
	const l = fa$1(n), { elementProps: i } = zn$1({
		htmlProps: s,
		disableSpeakingIndicator: r,
		onParticipantClick: c,
		trackRef: l
	}), d = ar(l.participant), u = Zo(), v = (p = ba$1()) == null ? void 0 : p.autoSubscription, f = import_react.useCallback((h) => {
		l.source && !h && u && u.pin.dispatch && as(l, u.pin.state) && u.pin.dispatch({ msg: "clear_pin" });
	}, [l, u]);
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: o,
		style: { position: "relative" },
		...i
	}, /* @__PURE__ */ import_react.createElement(_t, { trackRef: l }, /* @__PURE__ */ import_react.createElement(jt, { participant: l.participant }, a ?? /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, K$1(l) && (((E = l.publication) == null ? void 0 : E.kind) === "video" || l.source === Track.Source.Camera || l.source === Track.Source.ScreenShare) ? /* @__PURE__ */ import_react.createElement(Bt, {
		trackRef: l,
		onSubscriptionStatusChanged: f,
		manageSubscription: v
	}) : K$1(l) && /* @__PURE__ */ import_react.createElement(ne, {
		trackRef: l,
		onSubscriptionStatusChanged: f
	}), /* @__PURE__ */ import_react.createElement("div", { className: "lk-participant-placeholder" }, /* @__PURE__ */ import_react.createElement(Nt, null)), /* @__PURE__ */ import_react.createElement("div", { className: "lk-participant-metadata" }, /* @__PURE__ */ import_react.createElement("div", { className: "lk-participant-metadata-item" }, l.source === Track.Source.Camera ? /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, d && /* @__PURE__ */ import_react.createElement(Rt, { style: { marginRight: "0.25rem" } }), /* @__PURE__ */ import_react.createElement(be, {
		trackRef: {
			participant: l.participant,
			source: Track.Source.Microphone
		},
		show: "muted"
	}), /* @__PURE__ */ import_react.createElement(K, null)) : /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement(Re, { style: { marginRight: "0.25rem" } }), /* @__PURE__ */ import_react.createElement(K, null, "'s screen"))), /* @__PURE__ */ import_react.createElement(ye, { className: "lk-participant-metadata-item" }))), /* @__PURE__ */ import_react.createElement(Tt, { trackRef: l }))));
});
function Ea(t) {
	const n = G(t, { className: "lk-focus-layout" });
	return /* @__PURE__ */ import_react.createElement("div", { ...n }, t.children);
}
function pa({ trackRef: t, ...n }) {
	return /* @__PURE__ */ import_react.createElement(Ot, {
		trackRef: t,
		...n
	});
}
function Ce({ tracks: t, ...n }) {
	return /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, t.map((a) => /* @__PURE__ */ import_react.createElement(Vn.Provider, {
		value: a,
		key: V$1(a)
	}, H(n.children))));
}
function Wt({ totalPageCount: t, nextPage: n, prevPage: a, currentPage: c, pagesContainer: r }) {
	const [s, o] = import_react.useState(!1);
	return import_react.useEffect(() => {
		let l;
		return r && (l = na(r.current, 2e3).subscribe(o)), () => {
			l && l.unsubscribe();
		};
	}, [r]), /* @__PURE__ */ import_react.createElement("div", {
		className: "lk-pagination-control",
		"data-lk-user-interaction": s
	}, /* @__PURE__ */ import_react.createElement("button", {
		className: "lk-button",
		onClick: a
	}, /* @__PURE__ */ import_react.createElement(ie, null)), /* @__PURE__ */ import_react.createElement("span", { className: "lk-pagination-count" }, `${c} of ${t}`), /* @__PURE__ */ import_react.createElement("button", {
		className: "lk-button",
		onClick: n
	}, /* @__PURE__ */ import_react.createElement(ie, null)));
}
var qt = /* @__PURE__ */ import_react.forwardRef(function({ totalPageCount: n, currentPage: a }, c) {
	const r = new Array(n).fill("").map((s, o) => o + 1 === a ? /* @__PURE__ */ import_react.createElement("span", {
		"data-lk-active": !0,
		key: o
	}) : /* @__PURE__ */ import_react.createElement("span", { key: o }));
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: c,
		className: "lk-pagination-indicator"
	}, r);
});
function wa({ tracks: t, ...n }) {
	const a = import_react.createRef(), c = import_react.useMemo(() => G(n, { className: "lk-grid-layout" }), [n]), { layout: r } = Hn(a, t.length), s = jn$1(r.maxTiles, t);
	return Xn(a, {
		onLeftSwipe: s.nextPage,
		onRightSwipe: s.prevPage
	}), /* @__PURE__ */ import_react.createElement("div", {
		ref: a,
		"data-lk-pagination": s.totalPageCount > 1,
		...c
	}, /* @__PURE__ */ import_react.createElement(Ce, { tracks: s.tracks }, n.children), t.length > r.maxTiles && /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement(qt, {
		totalPageCount: s.totalPageCount,
		currentPage: s.currentPage
	}), /* @__PURE__ */ import_react.createElement(Wt, {
		pagesContainer: a,
		...s
	})));
}
var $t$1 = 130, Dt = 140, me = 1, Ie = 16 / 10, Ut = (1 - Ie) * -1;
function ka({ tracks: t, orientation: n, ...a }) {
	const c = import_react.useRef(null), [r, s] = import_react.useState(0), { width: o, height: l } = Jt$1(c), i = n || (l >= o ? "vertical" : "horizontal"), d = i === "vertical" ? Math.max(o * Ut, $t$1) : Math.max(l * Ie, Dt), u = cs(), v = Math.max(i === "vertical" ? (l - u) / d : (o - u) / d, me);
	let f = Math.round(v);
	Math.abs(v - r) < .5 ? f = Math.round(r) : r !== v && s(v);
	const p = Kt$1(t, f);
	return import_react.useLayoutEffect(() => {
		c.current && (c.current.dataset.lkOrientation = i, c.current.style.setProperty("--lk-max-visible-tiles", f.toString()));
	}, [f, i]), /* @__PURE__ */ import_react.createElement("aside", {
		key: i,
		className: "lk-carousel",
		ref: c,
		...a
	}, /* @__PURE__ */ import_react.createElement(Ce, { tracks: p }, a.children));
}
function Ra({ value: t, onPinChange: n, onWidgetChange: a, children: c }) {
	const r = ua$1(t);
	return import_react.useEffect(() => {
		I$1.debug("PinState Updated", { state: r.pin.state }), n && r.pin.state && n(r.pin.state);
	}, [r.pin.state, n]), import_react.useEffect(() => {
		I$1.debug("Widget Updated", { widgetState: r.widget.state }), a && r.widget.state && a(r.widget.state);
	}, [a, r.widget.state]), /* @__PURE__ */ import_react.createElement(jn.Provider, { value: r }, c);
}
var Ma = /* @__PURE__ */ import_react.forwardRef(function({ trackRef: n, ...a }, c) {
	const v = cr(fa$1(n), {
		bands: 7,
		loPass: 300
	});
	return /* @__PURE__ */ import_react.createElement("svg", {
		ref: c,
		width: "100%",
		height: "100%",
		viewBox: "0 0 200 90",
		...a,
		className: "lk-audio-visualizer"
	}, /* @__PURE__ */ import_react.createElement("rect", {
		x: "0",
		y: "0",
		width: "100%",
		height: "100%"
	}), /* @__PURE__ */ import_react.createElement("g", { style: { transform: `translate(${130 / 2}px, 0)` } }, v.map((f, p) => /* @__PURE__ */ import_react.createElement("rect", {
		key: p,
		x: p * 10,
		y: 90 / 2 - f * 50 / 2,
		width: 6,
		height: f * 50
	}))));
});
function ya({ participants: t, ...n }) {
	return /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, t.map((a) => /* @__PURE__ */ import_react.createElement(zn.Provider, {
		value: a,
		key: a.identity
	}, H(n.children))));
}
function ba({ room: t, volume: n, muted: a }) {
	const c = rr([
		Track.Source.Microphone,
		Track.Source.ScreenShareAudio,
		Track.Source.Unknown
	], {
		updateOnlyOn: [],
		onlySubscribed: !0,
		room: t
	}).filter((r) => !r.participant.isLocal && r.publication.kind === Track.Kind.Audio);
	return /* @__PURE__ */ import_react.createElement("div", { style: { display: "none" } }, c.map((r) => /* @__PURE__ */ import_react.createElement(ne, {
		key: V$1(r),
		trackRef: r,
		volume: n,
		muted: a
	})));
}
var Sa = /* @__PURE__ */ import_react.forwardRef(function({ childrenPosition: n = "before", children: a, ...c }, r) {
	const { name: s } = $n();
	return /* @__PURE__ */ import_react.createElement("span", {
		ref: r,
		...c
	}, n === "before" && a, s, n === "after" && a);
});
function Gt(t) {
	const n = import_react.useMemo(() => G(t, { className: "lk-toast" }), [t]);
	return /* @__PURE__ */ import_react.createElement("div", { ...n }, t.children);
}
var Qt$1 = (t) => {
	const n = [];
	for (let a = 0; a < t; a++) n.push([a, t - 1 - a]);
	return n;
}, fe = (t) => [[Math.floor(t / 2)], [-1]], Xt$1 = (t, n, a) => {
	const [c, r] = (0, import_react.useState)(0), [s, o] = (0, import_react.useState)([[]]);
	(0, import_react.useEffect)(() => {
		if (t === "thinking") o(fe(n));
		else if (t === "connecting" || t === "initializing") o([...Qt$1(n)]);
		else o(t === "listening" ? fe(n) : t === void 0 || t === "speaking" ? [new Array(n).fill(0).map((i, d) => d)] : [[]]);
		r(0);
	}, [t, n]);
	const l = (0, import_react.useRef)(null);
	return (0, import_react.useEffect)(() => {
		let i = performance.now();
		const d = (u) => {
			u - i >= a && (r((f) => f + 1), i = u), l.current = requestAnimationFrame(d);
		};
		return l.current = requestAnimationFrame(d), () => {
			l.current !== null && cancelAnimationFrame(l.current);
		};
	}, [
		a,
		n,
		t,
		s.length
	]), s[c % s.length];
}, Yt$1 = /* @__PURE__ */ new Map([
	["connecting", 2e3],
	["initializing", 2e3],
	["listening", 500],
	["thinking", 150]
]), Jt = (t, n) => {
	if (t === void 0) return 1e3;
	let a = Yt$1.get(t);
	if (a) switch (t) {
		case "connecting":
			a /= n;
			break;
	}
	return a;
}, Kt = /* @__PURE__ */ import_react.forwardRef(function({ state: n, options: a, barCount: c = 15, trackRef: r, track: s, children: o, ...l }, i) {
	const d = G(l, { className: "lk-audio-bar-visualizer" });
	let u = Hn$1();
	(r || s) && (u = r || s);
	const v = cr(u, {
		bands: c,
		loPass: 100,
		hiPass: 200
	}), f = (a == null ? void 0 : a.minHeight) ?? 20, p = (a == null ? void 0 : a.maxHeight) ?? 100, E = Xt$1(n, c, Jt(n, c) ?? 100);
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: i,
		...d,
		"data-lk-va-state": n
	}, v.map((h, m) => o ? H(o, {
		"data-lk-highlighted": E.includes(m),
		"data-lk-bar-index": m,
		className: "lk-audio-bar",
		style: { height: `${Math.min(p, Math.max(f, h * 100 + 5))}%` }
	}) : /* @__PURE__ */ import_react.createElement("span", {
		key: m,
		"data-lk-highlighted": E.includes(m),
		"data-lk-bar-index": m,
		className: `lk-audio-bar ${E.includes(m) && "lk-highlighted"}`,
		style: { height: `${Math.min(p, Math.max(f, h * 100 + 5))}%` }
	})));
}), Ca = /* @__PURE__ */ import_react.forwardRef(function({ children: n, disableSpeakingIndicator: a, onParticipantClick: c, trackRef: r, ...s }, o) {
	const l = fa$1(r), { elementProps: i } = zn$1({
		trackRef: l,
		htmlProps: s,
		disableSpeakingIndicator: a,
		onParticipantClick: c
	});
	return /* @__PURE__ */ import_react.createElement("div", {
		ref: o,
		style: {
			position: "relative",
			minHeight: "160px"
		},
		...i
	}, /* @__PURE__ */ import_react.createElement(Vn.Provider, { value: l }, n ?? /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, K$1(l) && /* @__PURE__ */ import_react.createElement(ne, { trackRef: l }), /* @__PURE__ */ import_react.createElement(Kt, {
		barCount: 7,
		options: { minHeight: 8 }
	}), /* @__PURE__ */ import_react.createElement("div", { className: "lk-participant-metadata" }, /* @__PURE__ */ import_react.createElement("div", { className: "lk-participant-metadata-item" }, /* @__PURE__ */ import_react.createElement(be, { trackRef: l }), /* @__PURE__ */ import_react.createElement(K, null)), /* @__PURE__ */ import_react.createElement(ye, { className: "lk-participant-metadata-item" })))));
});
function Ia(t) {
	const [n, a] = import_react.useState(void 0), c = re(t.room);
	return import_react.useEffect(() => {
		switch (c) {
			case ConnectionState.Reconnecting:
				a(/* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement(oe, { className: "lk-spinner" }), " Reconnecting"));
				break;
			case ConnectionState.Connecting:
				a(/* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement(oe, { className: "lk-spinner" }), " Connecting"));
				break;
			case ConnectionState.Disconnected:
				a(/* @__PURE__ */ import_react.createElement(import_react.Fragment, null, "Disconnected"));
				break;
			default:
				a(void 0);
				break;
		}
	}, [c]), n ? /* @__PURE__ */ import_react.createElement(Gt, { className: "lk-toast-connection-state" }, n) : /* @__PURE__ */ import_react.createElement(import_react.Fragment, null);
}
var xa = /* @__PURE__ */ import_react.forwardRef(function({ entry: n, hideName: a = !1, hideTimestamp: c = !1, messageFormatter: r, ...s }, o) {
	var f, p, E, h;
	const l = import_react.useMemo(() => r ? r(n.message) : n.message, [n.message, r]), i = !!n.editTimestamp, d = new Date(n.timestamp), u = typeof navigator < "u" ? navigator.language : "en-US", v = ((f = n.from) == null ? void 0 : f.name) ?? ((p = n.from) == null ? void 0 : p.identity);
	return /* @__PURE__ */ import_react.createElement("li", {
		ref: o,
		className: "lk-chat-entry",
		title: d.toLocaleTimeString(u, { timeStyle: "full" }),
		"data-lk-message-origin": (E = n.from) != null && E.isLocal ? "local" : "remote",
		...s
	}, (!c || !a || i) && /* @__PURE__ */ import_react.createElement("span", { className: "lk-meta-data" }, !a && /* @__PURE__ */ import_react.createElement("strong", { className: "lk-participant-name" }, v), (!c || i) && /* @__PURE__ */ import_react.createElement("span", { className: "lk-timestamp" }, i && "edited ", d.toLocaleTimeString(u, { timeStyle: "short" }))), /* @__PURE__ */ import_react.createElement("span", { className: "lk-message-body" }, l), /* @__PURE__ */ import_react.createElement("span", { className: "lk-message-attachements" }, (h = n.attachedFiles) == null ? void 0 : h.map((m) => m.type.startsWith("image/") && /* @__PURE__ */ import_react.createElement("img", {
		style: {
			maxWidth: "300px",
			maxHeight: "300px"
		},
		key: m.name,
		src: URL.createObjectURL(m),
		alt: m.name
	}))));
});
function Pa(t) {
	return ps(t, ds()).map((n, a) => {
		if (typeof n == "string") return n;
		{
			const c = n.content.toString(), r = n.type === "url" ? /^http(s?):\/\//.test(c) ? c : `https://${c}` : `mailto:${c}`;
			return /* @__PURE__ */ import_react.createElement("a", {
				className: "lk-chat-link",
				key: a,
				href: r,
				target: "_blank",
				rel: "noreferrer"
			}, c);
		}
	});
}
function Ta(t) {
	return /* @__PURE__ */ import_react.createElement(qn$1.Provider, { value: t.session }, /* @__PURE__ */ import_react.createElement(Yn.Provider, { value: t.session.room }, t.children));
}

//#endregion
//#region node_modules/@livekit/components-react/dist/prefabs.mjs
function ee({ messageFormatter: r, messageDecoder: d, messageEncoder: u, channelTopic: n, ...S }) {
	const g = import_react.useRef(null), m = import_react.useRef(null), { chatMessages: c, send: I, isSending: t } = rn(import_react.useMemo(() => ({
		messageDecoder: d,
		messageEncoder: u,
		channelTopic: n
	}), [
		d,
		u,
		n
	])), h = Zo(), i = import_react.useRef(0);
	async function v(s) {
		s.preventDefault(), m.current && m.current.value.trim() !== "" && (await I(m.current.value), m.current.value = "", m.current.focus());
	}
	return import_react.useEffect(() => {
		var s;
		g && ((s = g.current) == null || s.scrollTo({ top: g.current.scrollHeight }));
	}, [g, c]), import_react.useEffect(() => {
		var o, E, a, w, b;
		if (!h || c.length === 0) return;
		if ((o = h.widget.state) != null && o.showChat && c.length > 0 && i.current !== ((E = c[c.length - 1]) == null ? void 0 : E.timestamp)) {
			i.current = (a = c[c.length - 1]) == null ? void 0 : a.timestamp;
			return;
		}
		const s = c.filter((A) => !i.current || A.timestamp > i.current).length, { widget: f } = h;
		s > 0 && ((w = f.state) == null ? void 0 : w.unreadMessages) !== s && ((b = f.dispatch) == null || b.call(f, {
			msg: "unread_msg",
			count: s
		}));
	}, [c, h == null ? void 0 : h.widget]), /* @__PURE__ */ import_react.createElement("div", {
		...S,
		className: "lk-chat"
	}, /* @__PURE__ */ import_react.createElement("div", { className: "lk-chat-header" }, "Messages", h && /* @__PURE__ */ import_react.createElement(sa, { className: "lk-close-button" }, /* @__PURE__ */ import_react.createElement(oa, null))), /* @__PURE__ */ import_react.createElement("ul", {
		className: "lk-list lk-chat-messages",
		ref: g
	}, S.children ? c.map((s, f) => H(S.children, {
		entry: s,
		key: s.id ?? f,
		messageFormatter: r
	})) : c.map((s, f, o) => {
		const E = f >= 1 && o[f - 1].from === s.from, a = f >= 1 && s.timestamp - o[f - 1].timestamp < 6e4;
		return /* @__PURE__ */ import_react.createElement(xa, {
			key: s.id ?? f,
			hideName: E,
			hideTimestamp: E === !1 ? !1 : a,
			entry: s,
			messageFormatter: r
		});
	})), /* @__PURE__ */ import_react.createElement("form", {
		className: "lk-chat-form",
		onSubmit: v
	}, /* @__PURE__ */ import_react.createElement("input", {
		className: "lk-form-control lk-chat-form-input",
		disabled: t,
		ref: m,
		type: "text",
		placeholder: "Enter a message...",
		onInput: (s) => s.stopPropagation(),
		onKeyDown: (s) => s.stopPropagation(),
		onKeyUp: (s) => s.stopPropagation()
	}), /* @__PURE__ */ import_react.createElement("button", {
		type: "submit",
		className: "lk-button lk-chat-form-button",
		disabled: t
	}, "Send")));
}
function O({ kind: r, initialSelection: d, onActiveDeviceChange: u, tracks: n, requestPermissions: S = !1, ...g }) {
	const [m, l] = import_react.useState(!1), [c, I] = import_react.useState([]), [t, h] = import_react.useState(!0), [i, v] = import_react.useState(S), s = (a, w) => {
		I$1.debug("handle device change"), l(!1), u?.(a, w);
	}, f = import_react.useRef(null), o = import_react.useRef(null);
	import_react.useLayoutEffect(() => {
		m && v(!0);
	}, [m]), import_react.useLayoutEffect(() => {
		let a;
		return f.current && o.current && (c || t) && (a = ls(f.current, o.current, (w, b) => {
			o.current && Object.assign(o.current.style, {
				left: `${w}px`,
				top: `${b}px`
			});
		})), h(!1), () => {
			a?.();
		};
	}, [
		f,
		o,
		c,
		t
	]);
	const E = import_react.useCallback((a) => {
		o.current && a.target !== f.current && m && fs(o.current, a) && l(!1);
	}, [
		m,
		o,
		f
	]);
	return import_react.useEffect(() => (document.addEventListener("click", E), () => {
		document.removeEventListener("click", E);
	}), [E]), /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement("button", {
		className: "lk-button lk-button-menu",
		"aria-pressed": m,
		...g,
		onClick: () => l(!m),
		ref: f
	}, g.children), !g.disabled && /* @__PURE__ */ import_react.createElement("div", {
		className: "lk-device-menu",
		ref: o,
		style: { visibility: m ? "visible" : "hidden" }
	}, r ? /* @__PURE__ */ import_react.createElement(fa, {
		initialSelection: d,
		onActiveDeviceChange: (a) => s(r, a),
		onDeviceListChange: I,
		kind: r,
		track: n == null ? void 0 : n[r],
		requestPermissions: i
	}) : /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement("div", { className: "lk-device-menu-heading" }, "Audio inputs"), /* @__PURE__ */ import_react.createElement(fa, {
		kind: "audioinput",
		onActiveDeviceChange: (a) => s("audioinput", a),
		onDeviceListChange: I,
		track: n == null ? void 0 : n.audioinput,
		requestPermissions: i
	}), /* @__PURE__ */ import_react.createElement("div", { className: "lk-device-menu-heading" }, "Video inputs"), /* @__PURE__ */ import_react.createElement(fa, {
		kind: "videoinput",
		onActiveDeviceChange: (a) => s("videoinput", a),
		onDeviceListChange: I,
		track: n == null ? void 0 : n.videoinput,
		requestPermissions: i
	}))));
}
function j() {
	import_react.useEffect(() => {
		Q();
	}, []);
}
function Ke(r, d) {
	const [u, n] = import_react.useState(), S = import_react.useMemo(() => new _(), []);
	return import_react.useEffect(() => {
		let g = !1, m = [];
		return S.lock().then(async (l) => {
			try {
				(r.audio || r.video) && (m = await createLocalTracks(r), g ? m.forEach((c) => c.stop()) : n(m));
			} catch (c) {
				d && c instanceof Error ? d(c) : I$1.error(c);
			} finally {
				l();
			}
		}), () => {
			g = !0, m.forEach((l) => {
				l.stop();
			});
		};
	}, [
		JSON.stringify(r, T),
		d,
		S
	]), u;
}
function et(r, d, u) {
	const [n, S] = import_react.useState(null), [g, m] = import_react.useState(!1), l = qn({ kind: u }), [c, I] = import_react.useState(void 0), [t, h] = import_react.useState(), [i, v] = import_react.useState(d);
	import_react.useEffect(() => {
		v(d);
	}, [d]);
	const s = async (E, a) => {
		try {
			const w = a === "videoinput" ? await createLocalVideoTrack({
				deviceId: E,
				resolution: VideoPresets.h720.resolution
			}) : await createLocalAudioTrack({ deviceId: E }), b = await w.getDeviceId(!1);
			b && E !== b && (o.current = b, v(b)), h(w);
		} catch (w) {
			w instanceof Error && S(w);
		}
	}, f = async (E, a) => {
		await E.setDeviceId(a), o.current = a;
	}, o = import_react.useRef(i);
	return import_react.useEffect(() => {
		r && !t && !n && !g && (I$1.debug("creating track", u), m(!0), s(i, u).finally(() => {
			m(!1);
		}));
	}, [
		r,
		t,
		n,
		g
	]), import_react.useEffect(() => {
		t && (r ? c != null && c.deviceId && o.current !== (c == null ? void 0 : c.deviceId) ? (I$1.debug(`switching ${u} device from`, o.current, c.deviceId), f(t, c.deviceId)) : (I$1.debug(`unmuting local ${u} track`), t.unmute()) : (I$1.debug(`muting ${u} track`), t.mute().then(() => I$1.debug(t.mediaStreamTrack))));
	}, [
		t,
		c,
		r,
		u
	]), import_react.useEffect(() => () => {
		t && (I$1.debug(`stopping local ${u} track`), t.stop(), t.mute());
	}, []), import_react.useEffect(() => {
		I(l == null ? void 0 : l.find((E) => E.deviceId === i));
	}, [i, l]), {
		selectedDevice: c,
		localTrack: t,
		deviceError: n
	};
}
function tt({ defaults: r = {}, onValidate: d, onSubmit: u, onError: n, debug: S, joinLabel: g = "Join Room", micLabel: m = "Microphone", camLabel: l = "Camera", userLabel: c = "Username", persistUserChoices: I = !0, videoProcessor: t, ...h }) {
	const { userChoices: i, saveAudioInputDeviceId: v, saveAudioInputEnabled: s, saveVideoInputDeviceId: f, saveVideoInputEnabled: o, saveUsername: E } = or({
		defaults: r,
		preventSave: !I,
		preventLoad: !I
	}), [a, w] = import_react.useState(i), [b, A] = import_react.useState(a.audioEnabled), [y, L] = import_react.useState(a.videoEnabled), [T, $] = import_react.useState(a.audioDeviceId), [p, M] = import_react.useState(a.videoDeviceId), [V, ae] = import_react.useState(a.username);
	import_react.useEffect(() => {
		s(b);
	}, [b, s]), import_react.useEffect(() => {
		o(y);
	}, [y, o]), import_react.useEffect(() => {
		v(T);
	}, [T, v]), import_react.useEffect(() => {
		f(p);
	}, [p, f]), import_react.useEffect(() => {
		E(V);
	}, [V, E]);
	const D = Ke({
		audio: b ? { deviceId: i.audioDeviceId } : !1,
		video: y ? {
			deviceId: i.videoDeviceId,
			processor: t
		} : !1
	}, n), U = import_react.useRef(null), P = import_react.useMemo(() => D == null ? void 0 : D.filter((C) => C.kind === Track.Kind.Video)[0], [D]), ne = import_react.useMemo(() => {
		if (P) {
			const { facingMode: C } = facingModeFromLocalTrack(P);
			return C;
		} else return "undefined";
	}, [P]), q = import_react.useMemo(() => D == null ? void 0 : D.filter((C) => C.kind === Track.Kind.Audio)[0], [D]);
	import_react.useEffect(() => (U.current && P && (P.unmute(), P.attach(U.current)), () => {
		P?.detach();
	}), [P]);
	const [ce, se] = import_react.useState(), _ = import_react.useCallback((C) => typeof d == "function" ? d(C) : C.username !== "", [d]);
	import_react.useEffect(() => {
		const C = {
			username: V,
			videoEnabled: y,
			videoDeviceId: p,
			audioEnabled: b,
			audioDeviceId: T
		};
		w(C), se(_(C));
	}, [
		V,
		y,
		_,
		b,
		T,
		p
	]);
	function re(C) {
		C.preventDefault(), _(a) ? typeof u == "function" && u(a) : I$1.warn("Validation failed with: ", a);
	}
	return j(), /* @__PURE__ */ import_react.createElement("div", {
		className: "lk-prejoin",
		...h
	}, /* @__PURE__ */ import_react.createElement("div", { className: "lk-video-container" }, P && /* @__PURE__ */ import_react.createElement("video", {
		ref: U,
		width: "1280",
		height: "720",
		"data-lk-facing-mode": ne
	}), (!P || !y) && /* @__PURE__ */ import_react.createElement("div", { className: "lk-camera-off-note" }, /* @__PURE__ */ import_react.createElement(Nt, null))), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group-container" }, /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group audio" }, /* @__PURE__ */ import_react.createElement(va, {
		initialState: b,
		source: Track.Source.Microphone,
		onChange: (C) => A(C)
	}, m), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group-menu" }, /* @__PURE__ */ import_react.createElement(O, {
		initialSelection: T,
		kind: "audioinput",
		disabled: !q,
		tracks: { audioinput: q },
		onActiveDeviceChange: (C, F) => $(F)
	}))), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group video" }, /* @__PURE__ */ import_react.createElement(va, {
		initialState: y,
		source: Track.Source.Camera,
		onChange: (C) => L(C)
	}, l), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group-menu" }, /* @__PURE__ */ import_react.createElement(O, {
		initialSelection: p,
		kind: "videoinput",
		disabled: !P,
		tracks: { videoinput: P },
		onActiveDeviceChange: (C, F) => M(F)
	})))), /* @__PURE__ */ import_react.createElement("form", { className: "lk-username-container" }, /* @__PURE__ */ import_react.createElement("input", {
		className: "lk-form-control",
		id: "username",
		name: "username",
		type: "text",
		defaultValue: V,
		placeholder: c,
		onChange: (C) => ae(C.target.value),
		autoComplete: "off"
	}), /* @__PURE__ */ import_react.createElement("button", {
		className: "lk-button lk-join-button",
		type: "submit",
		onClick: re,
		disabled: !ce
	}, g)), S && /* @__PURE__ */ import_react.createElement(import_react.Fragment, null, /* @__PURE__ */ import_react.createElement("strong", null, "User Choices:"), /* @__PURE__ */ import_react.createElement("ul", {
		className: "lk-list",
		style: {
			overflow: "hidden",
			maxWidth: "15rem"
		}
	}, /* @__PURE__ */ import_react.createElement("li", null, "Username: ", `${a.username}`), /* @__PURE__ */ import_react.createElement("li", null, "Video Enabled: ", `${a.videoEnabled}`), /* @__PURE__ */ import_react.createElement("li", null, "Audio Enabled: ", `${a.audioEnabled}`), /* @__PURE__ */ import_react.createElement("li", null, "Video Device: ", `${a.videoDeviceId}`), /* @__PURE__ */ import_react.createElement("li", null, "Audio Device: ", `${a.audioDeviceId}`))));
}
function Ge({ props: r }) {
	const { dispatch: d, state: u } = sa$1().widget, n = "lk-button lk-settings-toggle";
	return { mergedProps: import_react.useMemo(() => M(r, {
		className: n,
		onClick: () => {
			d && d({ msg: "toggle_settings" });
		},
		"aria-pressed": u != null && u.showSettings ? "true" : "false"
	}), [
		r,
		n,
		d,
		u
	]) };
}
var Je = /* @__PURE__ */ import_react.forwardRef(function(d, u) {
	const { mergedProps: n } = Ge({ props: d });
	return /* @__PURE__ */ import_react.createElement("button", {
		ref: u,
		...n
	}, d.children);
}), ze = (r) => {
	switch (r) {
		case Track.Source.Camera: return 1;
		case Track.Source.Microphone: return 2;
		case Track.Source.ScreenShare: return 3;
		default: return 0;
	}
};
function te({ variation: r, controls: d, saveUserChoices: u = !0, onDeviceError: n, ...S }) {
	var $;
	const [g, m] = import_react.useState(!1), l = Zo();
	import_react.useEffect(() => {
		var p, M;
		((p = l == null ? void 0 : l.widget.state) == null ? void 0 : p.showChat) !== void 0 && m((M = l == null ? void 0 : l.widget.state) == null ? void 0 : M.showChat);
	}, [($ = l == null ? void 0 : l.widget.state) == null ? void 0 : $.showChat]);
	const I = Dn(`(max-width: ${g ? 1e3 : 760}px)`) ? "minimal" : "verbose";
	r ?? (r = I);
	const t = {
		leave: !0,
		...d
	}, h = Bn();
	if (!h) t.camera = !1, t.chat = !1, t.microphone = !1, t.screenShare = !1;
	else {
		const p = (M) => h.canPublish && (h.canPublishSources.length === 0 || h.canPublishSources.includes(ze(M)));
		t.camera ?? (t.camera = p(Track.Source.Camera)), t.microphone ?? (t.microphone = p(Track.Source.Microphone)), t.screenShare ?? (t.screenShare = p(Track.Source.ScreenShare)), t.chat ?? (t.chat = h.canPublishData && (d == null ? void 0 : d.chat));
	}
	const i = import_react.useMemo(() => r === "minimal" || r === "verbose", [r]), v = import_react.useMemo(() => r === "textOnly" || r === "verbose", [r]), s = gs(), [f, o] = import_react.useState(!1), E = import_react.useCallback((p) => {
		o(p);
	}, [o]), a = G({ className: "lk-control-bar" }, S), { saveAudioInputEnabled: w, saveVideoInputEnabled: b, saveAudioInputDeviceId: A, saveVideoInputDeviceId: y } = or({ preventSave: !u }), L = import_react.useCallback((p, M) => M ? w(p) : null, [w]), T = import_react.useCallback((p, M) => M ? b(p) : null, [b]);
	return /* @__PURE__ */ import_react.createElement("div", { ...a }, t.microphone && /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group" }, /* @__PURE__ */ import_react.createElement(va, {
		source: Track.Source.Microphone,
		showIcon: i,
		onChange: L,
		onDeviceError: (p) => n == null ? void 0 : n({
			source: Track.Source.Microphone,
			error: p
		})
	}, v && "Microphone"), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group-menu" }, /* @__PURE__ */ import_react.createElement(O, {
		kind: "audioinput",
		onActiveDeviceChange: (p, M) => A(M ?? "default")
	}))), t.camera && /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group" }, /* @__PURE__ */ import_react.createElement(va, {
		source: Track.Source.Camera,
		showIcon: i,
		onChange: T,
		onDeviceError: (p) => n == null ? void 0 : n({
			source: Track.Source.Camera,
			error: p
		})
	}, v && "Camera"), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group-menu" }, /* @__PURE__ */ import_react.createElement(O, {
		kind: "videoinput",
		onActiveDeviceChange: (p, M) => y(M ?? "default")
	}))), t.screenShare && s && /* @__PURE__ */ import_react.createElement(va, {
		source: Track.Source.ScreenShare,
		captureOptions: {
			audio: !0,
			selfBrowserSurface: "include"
		},
		showIcon: i,
		onChange: E,
		onDeviceError: (p) => n == null ? void 0 : n({
			source: Track.Source.ScreenShare,
			error: p
		})
	}, v && (f ? "Stop screen share" : "Share screen")), t.chat && /* @__PURE__ */ import_react.createElement(sa, null, i && /* @__PURE__ */ import_react.createElement(ua, null), v && "Chat"), t.settings && /* @__PURE__ */ import_react.createElement(Je, null, i && /* @__PURE__ */ import_react.createElement(da, null), v && "Settings"), t.leave && /* @__PURE__ */ import_react.createElement(ia, null, i && /* @__PURE__ */ import_react.createElement(ma, null), v && "Leave"), /* @__PURE__ */ import_react.createElement(ga, null));
}
function at({ chatMessageFormatter: r, chatMessageDecoder: d, chatMessageEncoder: u, SettingsComponent: n, ...S }) {
	var s, f;
	const [g, m] = import_react.useState({
		showChat: !1,
		unreadMessages: 0,
		showSettings: !1
	}), l = import_react.useRef(null), c = rr([{
		source: Track.Source.Camera,
		withPlaceholder: !0
	}, {
		source: Track.Source.ScreenShare,
		withPlaceholder: !1
	}], {
		updateOnlyOn: [RoomEvent.ActiveSpeakersChanged],
		onlySubscribed: !1
	}), I = (o) => {
		I$1.debug("updating widget state", o), m(o);
	}, t = ca$1(), h = c.filter(K$1).filter((o) => o.publication.source === Track.Source.ScreenShare), i = (s = Gn(t)) == null ? void 0 : s[0], v = c.filter((o) => !ss(o, i));
	return import_react.useEffect(() => {
		var o, E, a, w, b, A;
		if (h.some((y) => y.publication.isSubscribed) && l.current === null ? (I$1.debug("Auto set screen share focus:", { newScreenShareTrack: h[0] }), (E = (o = t.pin).dispatch) == null || E.call(o, {
			msg: "set_pin",
			trackReference: h[0]
		}), l.current = h[0]) : l.current && !h.some((y) => {
			var L, T;
			return y.publication.trackSid === ((T = (L = l.current) == null ? void 0 : L.publication) == null ? void 0 : T.trackSid);
		}) && (I$1.debug("Auto clearing screen share focus."), (w = (a = t.pin).dispatch) == null || w.call(a, { msg: "clear_pin" }), l.current = null), i && !K$1(i)) {
			const y = c.find((L) => L.participant.identity === i.participant.identity && L.source === i.source);
			y !== i && K$1(y) && ((A = (b = t.pin).dispatch) == null || A.call(b, {
				msg: "set_pin",
				trackReference: y
			}));
		}
	}, [
		h.map((o) => `${o.publication.trackSid}_${o.publication.isSubscribed}`).join(),
		(f = i == null ? void 0 : i.publication) == null ? void 0 : f.trackSid,
		c
	]), j(), /* @__PURE__ */ import_react.createElement("div", {
		className: "lk-video-conference",
		...S
	}, us() && /* @__PURE__ */ import_react.createElement(Ra, {
		value: t,
		onWidgetChange: I
	}, /* @__PURE__ */ import_react.createElement("div", { className: "lk-video-conference-inner" }, i ? /* @__PURE__ */ import_react.createElement("div", { className: "lk-focus-layout-wrapper" }, /* @__PURE__ */ import_react.createElement(Ea, null, /* @__PURE__ */ import_react.createElement(ka, { tracks: v }, /* @__PURE__ */ import_react.createElement(Ot, null)), i && /* @__PURE__ */ import_react.createElement(pa, { trackRef: i }))) : /* @__PURE__ */ import_react.createElement("div", { className: "lk-grid-layout-wrapper" }, /* @__PURE__ */ import_react.createElement(wa, { tracks: c }, /* @__PURE__ */ import_react.createElement(Ot, null))), /* @__PURE__ */ import_react.createElement(te, { controls: {
		chat: !0,
		settings: !!n
	} })), /* @__PURE__ */ import_react.createElement(ee, {
		style: { display: g.showChat ? "grid" : "none" },
		messageFormatter: r,
		messageEncoder: u,
		messageDecoder: d
	}), n && /* @__PURE__ */ import_react.createElement("div", {
		className: "lk-settings-menu-modal",
		style: { display: g.showSettings ? "block" : "none" }
	}, /* @__PURE__ */ import_react.createElement(n, null))), /* @__PURE__ */ import_react.createElement(ba, null), /* @__PURE__ */ import_react.createElement(Ia, null));
}
function nt({ ...r }) {
	const [d, u] = import_react.useState({
		showChat: !1,
		unreadMessages: 0
	}), n = rr([Track.Source.Microphone]);
	return j(), /* @__PURE__ */ import_react.createElement(Ra, { onWidgetChange: u }, /* @__PURE__ */ import_react.createElement("div", {
		className: "lk-audio-conference",
		...r
	}, /* @__PURE__ */ import_react.createElement("div", { className: "lk-audio-conference-stage" }, /* @__PURE__ */ import_react.createElement(Ce, { tracks: n }, /* @__PURE__ */ import_react.createElement(Ca, null))), /* @__PURE__ */ import_react.createElement(te, { controls: {
		microphone: !0,
		screenShare: !1,
		camera: !1,
		chat: !0
	} }), d.showChat && /* @__PURE__ */ import_react.createElement(ee, null)));
}
function ct({ controls: r, saveUserChoices: d = !0, onDeviceError: u, ...n }) {
	const S = {
		leave: !0,
		microphone: !0,
		...r
	}, g = Bn(), { microphoneTrack: m, localParticipant: l } = xe(), c = import_react.useMemo(() => ({
		participant: l,
		source: Track.Source.Microphone,
		publication: m
	}), [l, m]);
	g ? S.microphone ?? (S.microphone = g.canPublish) : S.microphone = !1;
	const I = G({ className: "lk-agent-control-bar" }, n), { saveAudioInputEnabled: t, saveAudioInputDeviceId: h } = or({ preventSave: !d }), i = import_react.useCallback((v, s) => {
		s && t(v);
	}, [t]);
	return /* @__PURE__ */ import_react.createElement("div", { ...I }, S.microphone && /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group" }, /* @__PURE__ */ import_react.createElement(va, {
		source: Track.Source.Microphone,
		showIcon: !0,
		onChange: i,
		onDeviceError: (v) => u == null ? void 0 : u({
			source: Track.Source.Microphone,
			error: v
		})
	}, /* @__PURE__ */ import_react.createElement(Kt, {
		trackRef: c,
		barCount: 7,
		options: { minHeight: 5 }
	})), /* @__PURE__ */ import_react.createElement("div", { className: "lk-button-group-menu" }, /* @__PURE__ */ import_react.createElement(O, {
		kind: "audioinput",
		onActiveDeviceChange: (v, s) => h(s ?? "default")
	}))), S.leave && /* @__PURE__ */ import_react.createElement(ia, null, "Disconnect"), /* @__PURE__ */ import_react.createElement(ga, null));
}

//#endregion
export { gn as AgentEvent, nt as AudioConference, ne as AudioTrack, Ma as AudioVisualizer, Kt as BarVisualizer, pt as CameraDisabledIcon, wt as CameraIcon, ka as CarouselLayout, ee as Chat, oa as ChatCloseIcon, xa as ChatEntry, ua as ChatIcon, sa as ChatToggle, ie as Chevron, ca as ClearPinButton, ye as ConnectionQualityIndicator, la as ConnectionState, Ia as ConnectionStateToast, te as ControlBar, ia as DisconnectButton, pa as FocusLayout, Ea as FocusLayoutContainer, Tt as FocusToggle, kt as FocusToggleIcon, da as GearIcon, wa as GridLayout, rs as LKFeatureContext, jn as LayoutContext, Ra as LayoutContextProvider, ma as LeaveIcon, W as LiveKitRoom, Rt as LockLockedIcon, O as MediaDeviceMenu, fa as MediaDeviceSelect, kn as MessagesEvent, Mt as MicDisabledIcon, yt as MicIcon, Ca as ParticipantAudioTile, zn as ParticipantContext, jt as ParticipantContextIfNeeded, ya as ParticipantLoop, K as ParticipantName, Nt as ParticipantPlaceholder, Ot as ParticipantTile, tt as PreJoin, bt as QualityExcellentIcon, St as QualityGoodIcon, Ct as QualityPoorIcon, It as QualityUnknownIcon, ba as RoomAudioRenderer, Yn as RoomContext, Sa as RoomName, Re as ScreenShareIcon, xt as ScreenShareStopIcon, Cn as SessionEvent, Ta as SessionProvider, oe as SpinnerIcon, ha as StartAudio, ga as StartMediaButton, Gt as Toast, Ce as TrackLoop, be as TrackMutedIndicator, Vn as TrackRefContext, _t as TrackRefContextIfNeeded, va as TrackToggle, Pt as UnfocusToggleIcon, at as VideoConference, Bt as VideoTrack, ct as VoiceAssistantControlBar, Pa as formatChatMessageLinks, K$1 as isTrackReference, vs as setLogExtension, hs as setLogLevel, Ue as useAgent, In as useAudioPlayback, ur as useAudioWaveform, rn as useChat, Zn as useChatToggle, Nn as useClearPinButton, _n as useConnectionQualityIndicator, re as useConnectionState, ca$1 as useCreateLayoutContext, Fn as useDataChannel, xn as useDisconnectButton, ua$1 as useEnsureCreateLayoutContext, aa as useEnsureLayoutContext, pa$1 as useEnsureParticipant, va$1 as useEnsureRoom, ga$1 as useEnsureSession, fa$1 as useEnsureTrackRef, hr as useEvents, $t as useFacingMode, ba$1 as useFeatureContext, Un as useFocusToggle, Hn as useGridLayout, ar as useIsEncrypted, Ee as useIsMuted, fr as useIsRecording, Qt as useIsSpeaking, sa$1 as useLayoutContext, $ as useLiveKitRoom, xe as useLocalParticipant, Bn as useLocalParticipantPermissions, Zo as useMaybeLayoutContext, es as useMaybeParticipantContext, ts as useMaybeRoomContext, ns as useMaybeSessionContext, Hn$1 as useMaybeTrackRefContext, Vn$1 as useMediaDeviceSelect, qn as useMediaDevices, cr as useMultibandTrackVolume, jn$1 as usePagination, dr as useParticipantAttribute, mn as useParticipantAttributes, da$1 as useParticipantContext, Yt as useParticipantInfo, Wn as useParticipantPermissions, zn$1 as useParticipantTile, ie$1 as useParticipantTracks, Xt as useParticipants, or as usePersistentUserChoices, Gn as usePinnedTracks, et as usePreviewDevice, Ke as usePreviewTracks, Jn as useRemoteParticipant, ve as useRemoteParticipants, ha$1 as useRoomContext, $n as useRoomInfo, mr as useSequentialRoomConnectDisconnect, pr as useSession, ma$1 as useSessionContext, br as useSessionMessages, Qn as useSortedParticipants, Zt as useSpeakingParticipants, Kn as useStartAudio, Yn$1 as useStartVideo, Xn as useSwipe, pn as useTextStream, er as useToken, sr as useTrackByName, tr as useTrackMutedIndicator, la$1 as useTrackRefContext, nr as useTrackToggle, fn as useTrackTranscription, ir as useTrackVolume, rr as useTracks, hn as useTranscriptions, Kt$1 as useVisualStableUpdate, lr as useVoiceAssistant };
//# sourceMappingURL=@livekit_components-react.js.map